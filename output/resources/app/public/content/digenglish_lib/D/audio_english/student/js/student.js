!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=24)}([function(e,t){e.exports=React},function(e,t){e.exports=mobxReact},function(e,t){e.exports=mobx},function(e,t,n){e.exports=n(43)()},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;var o=n(13),i=n(12);function a(e){if(!e)return e;e.displayMode=""+e.displayMode=="2"?"2":"1";var t=e.thumb?e.thumb:"";return(t.startsWith("static/")||""===t)&&(t=t.endsWith("w.jpg")?"".concat("/content/digenglish_lib/","/images/default_member_w.jpg"):"".concat("/content/digenglish_lib/","/images/default_member_m.jpg")),e.thumb=t,e}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,s;return t=e,s=[{key:"pub_init",value:function(){var t=navigator.userAgent;e._isMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t)||/android/i.test(t),e._tempBnd=document.createElement("div"),e._tempBnd.style.display="none",e._tempEl=document.createElement("div"),e._tempBnd.appendChild(e._tempEl),null===document.body?document.addEventListener("DOMContentLoaded",(function(t){document.body.appendChild(e._tempBnd)})):document.body.appendChild(e._tempBnd)}},{key:"pub_load",value:function(t,n,r,o,i,s){e._lesson=o,e._book=r,e._nextBook=i,e._prevBook=s,e._students=[],t&&t.forEach((function(t,n){e._students[n]=a(t)})),e._student=a(n)}},{key:"pub_reloadStudents",value:function(t){i.getStudents((function(n,r){for(;e._students.length>0;)e._students.pop();for(;e._students_inited.length>0;)e._students_inited.pop();for(var o=0,i=n.length;o<i;o++)e.isDvlp?e._students[o]=a(n[o]):e._students[o]=a({id:n[o].id,name:n[o].name,thumb:n[o].defaultThumbnail,avatar:n[o].profileThumbnail,nickname:n[o].nickName,displayMode:n[o].displayMode,inited:!0}),e._students_inited.push(n[o].id);t()}))}},{key:"pub_parseStyle",value:function(t){return e._tempEl.style.cssText=t,e._tempEl.style}},{key:"pub_initAudio",value:function(){e._common_audio=document.getElementById("common_audio"),e._ding_audio=document.getElementById("ding_audio"),e._dingend_audio=document.getElementById("dingend_audio"),e._btn_audio=document.getElementById("btn_audio"),e._correct_audio=document.getElementById("correct_audio"),e._wrong_audio=document.getElementById("wrong_audio"),e._topad_audio=document.getElementById("topad_audio"),e._goodjob_audio=document.getElementById("goodjob_audio"),e._btn_back_audio=document.getElementById("btn_back_audio"),e._btn_page_audio=document.getElementById("btn_page_audio"),e._card_audio=document.getElementById("card_audio"),e._popup_audio=document.getElementById("popup_audio"),e._flips_audio=document.getElementById("card_flips"),e._clock_audio=document.getElementById("clock_audio"),e._write_audio=document.getElementById("write_audio"),e._like_bubble_audio=document.getElementById("like_bubble"),e._all_btn_click_audio=document.getElementById("all_btn_click")}},{key:"pub_playAllBtnClick",value:function(){e._all_btn_click_audio&&(e._all_btn_click_audio.currentTime=0,e._all_btn_click_audio.play())}},{key:"pub_playLikeBubble",value:function(){e._like_bubble_audio&&(e._like_bubble_audio.currentTime=0,e._like_bubble_audio.play())}},{key:"pub_playWrite",value:function(){e._write_audio&&(e._write_audio.currentTime=0,e._write_audio.play())}},{key:"pub_playClock",value:function(){e._clock_audio&&(e._clock_audio.currentTime=4.5,e._clock_audio.play())}},{key:"pub_playFlips",value:function(){e._flips_audio&&(e._flips_audio.currentTime=0,e._flips_audio.play())}},{key:"pub_playPopup",value:function(){e._popup_audio&&(e._popup_audio.currentTime=0,e._popup_audio.play())}},{key:"pub_playCard",value:function(){e._card_audio&&(e._card_audio.currentTime=0,e._card_audio.play())}},{key:"pub_playBtnPage",value:function(){e._btn_page_audio&&(e._btn_page_audio.currentTime=0,e._btn_page_audio.play())}},{key:"pub_playBtnBack",value:function(){e._btn_back_audio&&(e._btn_back_audio.currentTime=0,e._btn_back_audio.play())}},{key:"pub_playGoodjob",value:function(){e._goodjob_audio&&(e._goodjob_audio.currentTime=0,e._goodjob_audio.play())}},{key:"pub_playDing",value:function(){e._ding_audio&&(e._ding_audio.currentTime=0,e._ding_audio.play())}},{key:"pub_playDingend",value:function(){e._dingend_audio&&(e._dingend_audio.currentTime=0,e._dingend_audio.play())}},{key:"pub_playToPad",value:function(){e._topad_audio&&(e._topad_audio.currentTime=0,e._topad_audio.play())}},{key:"pub_playBtnTab",value:function(){e._btn_audio&&(e._btn_audio.currentTime=0,e._btn_audio.play())}},{key:"pub_playCorrect",value:function(){e._correct_audio&&(e._correct_audio.currentTime=0,e._correct_audio.play())}},{key:"pub_playWrong",value:function(){e._wrong_audio&&(e._wrong_audio.currentTime=0,e._wrong_audio.play())}},{key:"pub_playStudentBubble",value:function(){var e=document.getElementById("student_bubble");e&&(e.currentTime=0,e.paused&&e.play())}},{key:"pub_stop",value:function(){null!=e._common_audio.onended&&e._common_audio.onended.call(e._common_audio,new Event("ended")),e._common_audio.oncanplaythrough=null,isNaN(e._common_audio.duration)||e._common_audio.paused||e._common_audio.pause()}},{key:"pub_play",value:function(t,n){e.pub_stop(),t=o.nteString(t,"");var r=o.nteString(e._common_audio.getAttribute("src"),"");if(""!==t||""!==r){""!==t&&r!==t&&(e._common_audio.src=t);var i=function t(r){e._common_audio.onended=null,null!==n&&n(!0),e._common_audio.removeEventListener("error",t)};e._common_audio.onended=function(t){e._common_audio.onended=null,null!==n&&n(!!t),e._common_audio.removeEventListener("error",i)},e._common_audio.addEventListener("error",i),isNaN(e._common_audio.duration)?(e._common_audio.oncanplaythrough=function(t){0!==e._common_audio.currentTime&&(e._common_audio.currentTime=0),e._common_audio.play(),e._common_audio.oncanplaythrough=null},e._common_audio.load()):(0!==e._common_audio.currentTime&&(e._common_audio.currentTime=0),e._common_audio.oncanplaythrough=null,e._common_audio.play())}else null!=n&&n(!0)}},{key:"pub_set",value:function(t,n,r){e._isDvlp=n,e._lang=r,i.set(n)}},{key:"pub_addInitedStudent",value:function(t){for(var n=!0,r=0,o=e._students_inited.length;r<o;r++)e._students_inited[r]===t.id&&(n=!1);n&&e._students_inited.push(t.id);var i=e._start_idx>0&&e._students.length>0&&e._students_inited.length>=e._students.length;return i&&(window.clearTimeout(e._start_idx),e._start_idx=-1),i}},{key:"pub_start",value:function(t){0===e._students.length||e._students_inited.length>=e._students.length?t():e._start_idx=window.setTimeout(t,2e3)}},{key:"pub_clear",value:function(){for(;e._students.length>0;)e._students.pop();for(;e._students_inited.length>0;)e._students_inited.pop()}},{key:"isMobile",get:function(){return e._isMobile}},{key:"tempEl",get:function(){return e._tempEl}},{key:"students",get:function(){return e._students}},{key:"student",get:function(){return e._student}},{key:"lang",get:function(){return e._lang}},{key:"isDvlp",get:function(){return e._isDvlp}},{key:"data_url",get:function(){return e._data_url}},{key:"lesson",get:function(){return e._lesson}},{key:"book",get:function(){return e._book}},{key:"nextBook",get:function(){return e._nextBook}},{key:"prevBook",get:function(){return e._prevBook}}],(n=null)&&r(t.prototype,n),s&&r(t,s),e}();t.App=s,s._isMobile=!1,s._students=[],s._students_inited=[],s._student=null,s._lang="ko",s._isDvlp=!1,s._data_url="../data/",s._lesson="",s._book="",s._nextBook=!1,s._prevBook=!1,s._start_idx=-1,s.isStarted=!1},function(e,t){e.exports=_},function(e,t,n){"use strict";function r(e,t,n){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var h=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":d(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.ImgBtn=t.AudioBtn=t.ToggleBtn=void 0;var _=n(0),m=n(2),y=n(1),v=function(e){s(n,e);var t=u(n);function n(e){var r;return o(this,n),(r=t.call(this,e)).m_pID=-1,r._inited=r._inited.bind(f(r)),r._onClick=r._onClick.bind(f(r)),r}return a(n,[{key:"_inited",value:function(e){var t=this;!this.m_el&&e&&(this.m_el=e,this.props.onRef&&this.props.onRef(e),e.setAttribute("touch-action","none"),e.addEventListener("pointerdown",(function(n){if(!(t.m_pID>=0)){if(t.m_pID=n.pointerId,!t.props.disableCapture)try{e.setPointerCapture(t.m_pID)}catch(e){}t.props.onMouseDown&&t.props.onMouseDown(n)}})),e.addEventListener("pointerup",(function(n){if(t.m_pID===n.pointerId){try{e.releasePointerCapture(t.m_pID)}catch(e){}t.m_pID=-1,t.props.onMouseUp&&t.props.onMouseUp(n)}})),e.addEventListener("pointerleave",(function(n){if(t.props.disableCapture){if(t.m_pID!==n.pointerId)return;try{e.releasePointerCapture(t.m_pID)}catch(e){}t.m_pID=-1}t.props.onMouseLeave&&t.props.onMouseLeave(n)})),e.addEventListener("pointercancel",(function(n){if(t.m_pID===n.pointerId){try{e.releasePointerCapture(t.m_pID)}catch(e){}t.m_pID=-1,t.props.onMouseLeave&&t.props.onMouseLeave(n)}})))}},{key:"_onClick",value:function(e){this.props.onClick&&this.props.onClick(e),this.props.preventEvent&&(e.preventDefault(),e.stopPropagation())}},{key:"componentDidUpdate",value:function(e){if((this.props.disabled&&!e.disabled||!this.props.view&&e.view)&&this.m_pID>=0){try{this.m_el&&this.m_el.releasePointerCapture(this.m_pID)}catch(e){}this.m_pID=-1}}}]),n}(_.Component);h([m.observable],v.prototype,"m_pID",void 0);var b=function(e){s(n,e);var t=u(n);function n(e){var r;return o(this,n),(r=t.call(this,e)).m_on=!1,r.m_on=!0===e.on,r}return a(n,[{key:"componentWillReceiveProps",value:function(e){this.props.on!==e.on&&(this.m_on=!0===e.on)}},{key:"render",value:function(){var e=[];this.props.className&&e.push(this.props.className),this.m_on&&e.push("on"),this.m_pID>0&&e.push("down");var t=e.join(" "),n=this.props.style;return!1===this.props.view&&(n||(n={}),n.display="none"),_.createElement("button",{id:this.props.id,className:t,onClick:this._onClick,ref:this._inited,disabled:!0===this.props.disabled,draggable:!1,onTransitionEnd:this.props.onTransitionEnd,style:n},this.props.children)}}]),n}(v);h([m.observable],b.prototype,"m_on",void 0),b=h([y.observer],b),t.ToggleBtn=b;var g=function(e){s(n,e);var t=u(n);function n(e){return o(this,n),t.call(this,e)}return a(n,[{key:"play",value:function(){var e=this;this.m_on||(this.m_on=!0,this.props.playFnc(this.props.src,(function(t){e.m_on&&(e.m_on=!1,e.props.onPause&&e.props.onPause(t))})))}},{key:"_onClick",value:function(e){this.m_on?(this.props.pauseFnc(),this.m_on=!1):this.play(),r(p(n.prototype),"_onClick",this).call(this,e)}}]),n}(b);h([m.action],g.prototype,"play",null),h([m.action],g.prototype,"_onClick",null),g=h([y.observer],g),t.AudioBtn=g;var w=function(e){s(n,e);var t=u(n);function n(e){var r;return o(this,n),(r=t.call(this,e)).m_on=!1,r.m_on=!0===e.on,r}return a(n,[{key:"componentWillReceiveProps",value:function(e){this.props.on!==e.on&&(this.m_on=!0===e.on)}},{key:"render",value:function(){var e=[];this.props.className&&e.push(this.props.className),this.m_on&&e.push("on"),this.m_pID>0&&e.push("down"),!0===this.props.disabled&&e.push("disable");var t=e.join(" "),n=this.props.style;return!1===this.props.view&&(n||(n={}),n.display="none"),_.createElement("img",{id:this.props.id,className:t,onClick:this._onClick,ref:this._inited,draggable:!1,onTransitionEnd:this.props.onTransitionEnd,style:n,src:this.props.src,useMap:this.props.useMap})}}]),n}(v);h([m.observable],w.prototype,"m_on",void 0),w=h([y.observer],w),t.ImgBtn=w},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getBounds=t.getTimeStr=t.wait=void 0;var o=n(5);t.wait=function(e){return r(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){o.delay(t,e)})));case 1:case"end":return t.stop()}}),t)})))},t.getTimeStr=function(e,t){var n=Math.round(t/1e3),r=Math.round(e/1e3),o=Math.floor(r/60),i=Math.floor(o/60),a="";return o%=60,i>0||n>=3600?(a=i+":",a+=o>=10?o+":":"0"+o+":"):n>=600?a+=o>=10?o+":":"0"+o+":":a=o+":",a+=(r%=60)>=10?r:"0"+r},t.getBounds=function(e){var t={left:0,top:0,width:0,height:0};if(!e)return t;try{var n=e.getBoundingClientRect();t.left=n.left,t.top=n.top,t.width=n.width,t.height=n.height}catch(e){}var r=e.ownerDocument,o=r.body,i=r.documentElement;t.left=t.left-(i.clientLeft||o.clientLeft||0),t.top=t.top-(i.clientTop||o.clientTop||0);var a=r.defaultView;return t.left+=a.pageXOffset||i.scrollLeft||o.scrollLeft,t.top+=a.pageYOffset||i.scrollTop||o.scrollTop,t}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),f=n(2),p=n(1),d=n(16),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(c,e);var t,n,a,s=i(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e))._div=null,t._bndW=0,t._width=0,t._fontSize=0,t._myW=0,t._numOfLine=0,t._ref=function(e){!t._div&&e&&(t._div=e,t.props.onRef&&t.props.onRef(e))},t._aniFrame=function(e){t._canCalc()&&(t._calc(),window.requestAnimationFrame(t._aniFrame))},t._resized=function(e,n){t._myW=e,window.requestAnimationFrame(t._aniFrame)},t._fontSize=t.props.maxSize?t.props.maxSize:0,t}return t=c,(n=[{key:"_canCalc",value:function(){return!(!this.props.view||this._myW<=0||!this._div||this._width>0)}},{key:"_calc",value:function(){if(this._canCalc()&&this._div){var e=this._div.getBoundingClientRect(),t=this._myW-e.width;if(!(t<-1||t>1)){var n=this._div.childNodes;if(0!==n.length){var r=0,o=-100,i=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER,s=0;n.forEach((function(e,t){var n=0,c=0;if(e instanceof HTMLElement){var u=e,l=window.getComputedStyle(u);if("absolute"===l.position);else if("inline"===l.display){var f=l.marginRight?parseInt(l.marginRight,10):0,p=l.marginLeft?parseInt(l.marginLeft,10):0;isNaN(f)&&(f=0),isNaN(p)&&(p=0);for(var d=u.getClientRects(),h=0;h<d.length;h++){var _=d.item(h);if(_){var m=_.top,y=_.bottom,v=_.left-p,b=_.right+f;0===s?(o=(m+y)/2,r=1):(o<m||o>y)&&(o=(m+y)/2,r++),i=Math.min(i,v),a=Math.max(a,b),s++}}}else{var g=u.getBoundingClientRect(),w=l.marginRight?parseInt(l.marginRight,10):0,x=l.marginLeft?parseInt(l.marginLeft,10):0;isNaN(w)&&(w=0),isNaN(x)&&(x=0),n=w,c=x;var E=g.top,O=g.bottom,S=g.left-c,P=g.right+n;O-E>0&&(0===s?(o=(E+O)/2,r=1):(o<E||o>O)&&(o=(E+O)/2,r++),i=Math.min(i,S),a=Math.max(a,P),s++)}}else{var k=document.createRange();k.selectNodeContents(e);for(var R=k.getClientRects(),j=0;j<R.length;j++){var C=R.item(j);if(C){var D=C.top,T=C.bottom,N=C.left,I=C.right;0===s?(o=(D+T)/2,r=1):(o<D||o>T)&&(o=(D+T)/2,r++),i=Math.min(i,N),a=Math.max(a,I),s++}}}})),this._numOfLine=r;var c=this.props.maxLineNum?this.props.maxLineNum:1;if(c<1&&(c=1),r>c){var u=this.props.minSize?this.props.minSize:0;this._fontSize>0&&u>0&&this._fontSize>u?this._fontSize--:this._width=Math.ceil(a-i+2)}else s>0&&(this._width=Math.ceil(a-i+2))}}}}},{key:"componentDidUpdate",value:function(e){this.props.view&&!e.view?(this._fontSize=this.props.maxSize?this.props.maxSize:0,this._width=0,window.requestAnimationFrame(this._aniFrame)):!this.props.view&&e.view&&(this._width=0),this.props.view&&this.props.rcalcNum&&this.props.rcalcNum!==e.rcalcNum&&(this._fontSize=this.props.maxSize?this.props.maxSize:0,this._width=0,window.requestAnimationFrame(this._aniFrame)),0===this._fontSize&&this.props.maxSize&&(this._fontSize=this.props.maxSize)}},{key:"render",value:function(){var e,t=this.props.className,n={whiteSpace:"normal"};return this._fontSize>0&&(n.fontSize=this._fontSize+"px"),this.props.lineHeight&&(n.lineHeight=this.props.lineHeight+"%"),this._width>0?(n.width=this._width+"px",n.display="inline-block",e=this.props.textAlign?this.props.textAlign:this._numOfLine<=1?"center":"left",n.textAlign=e):(n.width="100%",n.display="inline-block",this.props.viewWhenInit||(n.opacity=.01),e=this.props.textAlign?this.props.textAlign:this._numOfLine<=1?"center":"left",n.textAlign=e),l.createElement(l.Fragment,null,l.createElement("div",{ref:this._ref,className:t,style:n,onClick:this.props.onClick},this.props.children,l.createElement(d.default,{handleWidth:!0,handleHeight:!0,onResize:this._resized})))}}])&&r(t.prototype,n),a&&r(t,a),c}(l.Component);u([f.observable],h.prototype,"_width",void 0),u([f.observable],h.prototype,"_fontSize",void 0),h=u([p.observer],h),t.default=h},function(e,t){e.exports=ReactIdSwiper},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._getBlockJSX=t._getJSX=t._splitSpace=t._sentence2jsx=void 0;var r=n(0);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block",n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,s=new RegExp(/\{(.*?)\}/g),c={key:0},u=[],l=e.replace(/\s\s+/gi," ").replace(/<\s*br\s*\/*\s*>/gi,"<br>").split("<br>");return l.forEach((function(e,l){if(t){for(var f=s.exec(e),p=0,d="",h=[];f;){f.index>p&&(d=e.substring(p,f.index),h.push(i(d,c,a))),d=f[1];var _=n;_||(_=d),o?i(_,c,a):_,h.push(r.createElement("span",{key:c.key++,className:t,"data-correct":d}," ",_," ")),p=s.lastIndex,f=s.exec(e)}p<e.length&&(d=e.substring(p),h.push(i(d,c,a))),u[l]=r.createElement(r.Fragment,{key:c.key++},h)}else u[l]=r.createElement(r.Fragment,{key:c.key++},i(e,c,a))})),u}function i(e,t,n){for(var o=e.split(/\s/g),i=new RegExp(/[\.\!\?\s]/g),a=[],s=0;s<o.length;s++){var c=o[s];if(""!==c){for(var u=[],l=0,f="",p=i.exec(c);p;)p.index>l&&(f=c.substring(l,p.index),u.push(r.createElement("span",{key:t.key++},f))),f=p[0],u.push(f),l=i.lastIndex,p=i.exec(c);l<c.length&&(f=c.substring(l),u.push(r.createElement("span",{key:t.key++},f))),a.push(r.createElement("span",{key:t.key++,className:n},u.map((function(e){return e}))))}}return a}t._sentence2jsx=o,t._splitSpace=i,t._getJSX=function(e){var t=o(e,"block",void 0,!0,"word");return r.createElement(r.Fragment,null,t.map((function(e,n){return n===t.length-1?e:r.createElement(r.Fragment,{key:n},e,r.createElement("br",null))})))},t._getBlockJSX=function(e){var t=o(e,"block",void 0,!0,"word");return r.createElement(r.Fragment,null,t.map((function(e,n){return n===t.length-1?e:r.createElement(r.Fragment,{key:n},e,r.createElement("br",null))})))}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.state=t.setCallback=t.setInputs=t.Keyboard=void 0;var d=n(0),h=n(2),_=n(1),m=n(5),y=n(13),v=n(6);n(47);var b=-1,g=0,w=null,x=null,E=null,O=-1,S=-1,P=null,k=null,R=null,j=null,C=null;function D(e){return"keyDown"in e&&"done"in e}var T=function e(){l(this,e),this.state="hide",this.capslock=!1,this.disableDone=!1};p([h.observable],T.prototype,"state",void 0),p([h.observable],T.prototype,"capslock",void 0),p([h.observable],T.prototype,"disableDone",void 0);var N=new T;t.state=N;var I=m.throttle((function(){if(!(O<0))if(E)if(0===O)E.done();else{var e=A(O,N.capslock);E.keyDown(O,e)}else if(w){if(document.activeElement!==w&&w.focus(),0===O)return void(j?j():"on"===N.state&&(N.state="off"));if(13===O&&C)return void C();var t=y.nteInt(w.selectionStart,-1),n=y.nteInt(w.selectionEnd,-1);if(t<0||n<0)return;var r=A(O,N.capslock),o=w.value,i=o.substring(0,t),a=o.substring(n);8===O&&t>0&&(i=i.substring(0,i.length-1));var s=i+r+a;w.value=s;var c=(i+r).length;w.setSelectionRange(c,c),P&&P(s)}else if(x){document.activeElement!==x&&x.focus();var u=y.nteInt(x.selectionStart,-1),l=y.nteInt(x.selectionEnd,-1);if(u<0||l<0||O<0)return;var f=x.value,p=f.length,d=A(O,N.capslock);if(0===O)return void(j&&j());if(13===O)return void(C&&C());if(9===O)return void(k&&k());if(8===O){if(0===u&&0===l)return void(R&&R())}else if(S>0){if(p>S)return x.value=f.substring(0,S),x.selectionStart=S,void(x.selectionEnd=S);if(p===S&&u===S&&l===S)return void(k&&k())}var h,_=f.substring(0,u),m=f.substring(l),v=(_+d).length;if(8===O)u>0&&u===l&&(_=_.substring(0,_.length-1)),h=_+m,v=_.length,x.value=h,x.selectionStart=v,x.selectionEnd=v,P&&P(h);else{var b=(h=_+d+m).length;S>0&&b>S&&(h=h.substring(0,S)),b=h.length,(v=(_+d).length)>b&&(v=b),x.value=h,x.selectionStart=v,x.selectionEnd=v,P&&P(h),S>0&&v>=b&&k&&k()}}}),60),M=function e(t){O<0?I.cancel():(g>30&&I(),g++,b=window.requestAnimationFrame(e))};function A(e,t){var n;return 32===e?" ":9===e?"\t":13===e?"\n":8===e?"":188===e?t?"-":",":222===e?t?'"':"'":190===e?t?"?":".":e>=65&&e<=90?(n=String.fromCharCode(e),t?n:n.toLowerCase()):t?48===e?")":49===e?"!":50===e?"@":51===e?"#":52===e?"$":53===e?"%":54===e?"^":55===e?"&":56===e?"*":57===e?"(":"":String.fromCharCode(e)}t.setCallback=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;P=e,R=t,k=n,j=r,C=o},t.setInputs=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e&&D(e)?(E=e,x=null,w=null):e instanceof HTMLTextAreaElement?(w=e,x=null,E=null):e instanceof HTMLInputElement?(x=e,w=null,E=null):(x=null,w=null,E=null,O=-1),S=t};var B=function(e){i(n,e);var t=s(n);function n(e){var r;return l(this,n),(r=t.call(this,e))._keyDown=function(){20!==r.props.keyCode?(b>=0&&(window.cancelAnimationFrame(b),b=-1),I.cancel(),O=r.props.keyCode,I(),g=0,b=window.requestAnimationFrame(M)):N.capslock=!N.capslock},r._keyUp=function(){g=0,b>=0&&(window.cancelAnimationFrame(b),b=-1),I.cancel(),O=-1},r._leave=function(){g=0,b>=0&&(window.cancelAnimationFrame(b),b=-1),I.cancel(),O=-1},r}return o(n,[{key:"render",value:function(){return d.createElement(v.ToggleBtn,{className:this.props.className,onMouseDown:this._keyDown,onMouseUp:this._keyUp,onMouseLeave:this._leave,disableCapture:!0,on:this.props.on},this.props.children)}}]),n}(d.Component),H=function(e){i(n,e);var t=s(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments))._on=function(){"off"===N.state&&(N.state="on")},e._off=function(){"on"===N.state&&(N.state="off")},e}return o(n,[{key:"render",value:function(){var e=N.state,t=N.capslock,n=N.disableDone;return d.createElement("div",{className:"keyboard-box "+e+(t?" uppercase":"")},d.createElement("div",null,d.createElement(B,{className:"s",keyCode:49},A(49,t)),d.createElement(B,{className:"s",keyCode:50},A(50,t)),d.createElement(B,{className:"s",keyCode:51},A(51,t)),d.createElement(B,{className:"s",keyCode:52},A(52,t)),d.createElement(B,{className:"s",keyCode:53},A(53,t)),d.createElement(B,{className:"s",keyCode:54},A(54,t)),d.createElement(B,{className:"s",keyCode:55},A(55,t)),d.createElement(B,{className:"s",keyCode:56},A(56,t)),d.createElement(B,{className:"s",keyCode:57},A(57,t)),d.createElement(B,{className:"s",keyCode:48},A(48,t)),d.createElement(B,{className:"s",keyCode:188},A(188,t)),d.createElement(B,{className:"s",keyCode:222},A(222,t)),d.createElement(B,{className:"s",keyCode:190},A(190,t)),d.createElement(B,{className:"s key_back",keyCode:8})),d.createElement("div",null,d.createElement(B,{className:"m alpha",keyCode:81},A(81,t)),d.createElement(B,{className:"m alpha",keyCode:87},A(87,t)),d.createElement(B,{className:"m alpha",keyCode:69},A(69,t)),d.createElement(B,{className:"m alpha",keyCode:82},A(82,t)),d.createElement(B,{className:"m alpha",keyCode:84},A(84,t)),d.createElement(B,{className:"m alpha",keyCode:89},A(89,t)),d.createElement(B,{className:"m alpha",keyCode:85},A(85,t)),d.createElement(B,{className:"m alpha",keyCode:73},A(73,t)),d.createElement(B,{className:"m alpha",keyCode:79},A(79,t)),d.createElement(B,{className:"m alpha",keyCode:80},A(80,t)),d.createElement(B,{className:"b key_shift",on:N.capslock,keyCode:20})),d.createElement("div",null,d.createElement(B,{className:"m alpha",keyCode:65},A(65,t)),d.createElement(B,{className:"m alpha",keyCode:83},A(83,t)),d.createElement(B,{className:"m alpha",keyCode:68},A(68,t)),d.createElement(B,{className:"m alpha",keyCode:70},A(70,t)),d.createElement(B,{className:"m alpha",keyCode:71},A(71,t)),d.createElement(B,{className:"m alpha",keyCode:72},A(72,t)),d.createElement(B,{className:"m alpha",keyCode:74},A(74,t)),d.createElement(B,{className:"m alpha",keyCode:75},A(75,t)),d.createElement(B,{className:"m alpha",keyCode:76},A(76,t)),d.createElement(B,{className:"b key_enter",keyCode:13})),d.createElement("div",null,d.createElement(B,{className:"m alpha",keyCode:90},A(90,t)),d.createElement(B,{className:"m alpha",keyCode:88},A(88,t)),d.createElement(B,{className:"m alpha",keyCode:67},A(67,t)),d.createElement(B,{className:"m alpha",keyCode:86},A(86,t)),d.createElement(B,{className:"m alpha",keyCode:66},A(66,t)),d.createElement(B,{className:"m alpha",keyCode:78},A(78,t)),d.createElement(B,{className:"m alpha",keyCode:77},A(77,t)),d.createElement(B,{className:"b key_space",keyCode:32}),d.createElement(B,{className:"b done"+(n?" dis":""),keyCode:0})),d.createElement(v.ToggleBtn,{className:"key_hide",onClick:this._off}),d.createElement(v.ToggleBtn,{className:"key_view",onClick:this._on}))}}]),n}(d.Component);H=p([_.observer],H),t.Keyboard=H},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getPreviewResultMember=t.getPreviewResultClass=t.getPreviewDmsResult=t.getPreviewResult=t.uploadInclassReport=t.stopVideoRecord=t.startVideoRecord=t.switchCamera=t.stopCamera=t.startCustomCamera=t.startCamera=t.getStudents=t.uploadImageToServer=t.uploadFileToServer=t.stopVoiceRecord=t.startVoiceRecord=t.sendTeacher=t.disableSoftwareKeyboard=t.sendPAD=t.sendPADToID=t.sendLauncher=t.uploadStudentReport=t.addStudentForStudentReportType6=t.hideStudentReportListPage=t.showStudentReportListPage=t.showStudentReportUI=t.hideStudentReportUI=t.startStudentReportProcess=t.finishContentPage=t.set=void 0;var o=n(5),i=!1;t.set=function(e){i=e},t.finishContentPage=function(){if(!i)try{window.tsoc_o.finishContentPage()}catch(e){}},t.startStudentReportProcess=function(e,t,n){if(!i)try{window.tsoc_o.startStudentReportProcess(e,t,n)}catch(e){}},t.hideStudentReportUI=function(){if(!i)try{window.tsoc_o.hideStudentReportUI()}catch(e){}},t.showStudentReportUI=function(){if(!i)try{window.tsoc_o.showStudentReportUI()}catch(e){}},t.showStudentReportListPage=function(){if(!i)try{window.tsoc_o.showStudentReportListPage()}catch(e){}},t.hideStudentReportListPage=function(){if(!i)try{window.tsoc_o.hideStudentReportListPage()}catch(e){}},t.addStudentForStudentReportType6=function(e){if(!i)try{window.tsoc_o.addStudentForStudentReportType6(e)}catch(e){}},t.uploadStudentReport=function(e,t,n){if(!i)try{window.psoc_o.uploadStudentReport(e,t,n)}catch(e){}},t.sendLauncher=function(e,t){if(5!==e||i)if(6!==e||i)if(7!==e||i){if(8===e)if(i)try{window.top.tsoc_o.gotoPrevBook()}catch(e){}else try{window.tsoc_o.gotoPrevBook()}catch(e){}else if(9===e)if(i)try{window.top.tsoc_o.gotoNextBook()}catch(e){}else try{window.tsoc_o.gotoNextBook()}catch(e){}}else try{window.tsoc_o.setTitleBar(t)}catch(e){}else try{window.tsoc_o.showTitleBar()}catch(e){}else try{window.tsoc_o.hideTitleBar()}catch(e){}},t.sendPADToID=function(e,t,n){var r={type:t,data:n};if(i)try{window.top.tsoc_o.sendPADToID(e,r)}catch(e){}else try{window.tsoc_o.sendPADToID(e,r)}catch(e){}},t.sendPAD=function(e,t){var n={type:e,data:t};if(i)try{window.top.tsoc_o.sendAll(n)}catch(e){}else try{window.tsoc_o.sendAll(n)}catch(e){}},t.disableSoftwareKeyboard=function(){try{window.psoc_o.disableSoftwareKeyboard()}catch(e){}},t.sendTeacher=function(e,t){var n={type:e,data:t};if(i)try{window.opener.tsoc_o.sendTeacher(n)}catch(e){}else try{window.psoc_o.sendTeacher(n)}catch(e){}},t.startVoiceRecord=function(){try{window.psoc_o.startVoiceRecord()}catch(e){}},t.stopVoiceRecord=function(){try{window.psoc_o.stopVoiceRecord()}catch(e){}},t.uploadFileToServer=function(e){try{window.psoc_o.uploadFileToServer(e)}catch(e){}},t.uploadImageToServer=function(e){try{window.psoc_o.uploadImageToServer(e)}catch(e){}},t.getStudents=function(e){if(i)if(window.top.tsoc_o)try{window.top.tsoc_o.getStudents(e)}catch(e){}else e([],!1);else try{window.tsoc_o.getStudents(e)}catch(e){}},t.startCamera=function(){if(!i)try{window.psoc_o.startCamera()}catch(e){}},t.startCustomCamera=function(e){if(!i)try{window.psoc_o.startCustomCamera(e)}catch(e){}},t.stopCamera=function(){if(!i)try{window.psoc_o.stopCamera()}catch(e){}},t.switchCamera=function(){if(!i)try{window.psoc_o.switchCamera()}catch(e){}},t.startVideoRecord=function(){if(!i)try{window.psoc_o.startVideoRecord()}catch(e){}},t.stopVideoRecord=function(){if(!i)try{window.psoc_o.stopVideoRecord()}catch(e){}},t.uploadInclassReport=function(e){if(!i)try{window.tsoc_o.uploadInclassReport(e)}catch(e){}},t.getPreviewResult=function(e){return r(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){if(i)t([]);else{var n=!1;window.tsoc_o.getPreviewResult((function(e){n||(n=!0,t(e))}),e),o.delay((function(){n||(n=!0,t([]))}),5e3)}})));case 1:case"end":return t.stop()}}),t)})))},t.getPreviewDmsResult=function(e){return r(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){if(i)t([]);else{var n=!1;window.tsoc_o.getPreviewDmsResult((function(e){n||(n=!0,t(e))}),e),o.delay((function(){n||(n=!0,t([]))}),5e3)}})));case 1:case"end":return t.stop()}}),t)})))},t.getPreviewResultClass=function(e){return r(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){if(i)t([]);else{var n=!1;window.tsoc_o.getPreviewResultClass((function(e){n||(n=!0,t(e))}),e),o.delay((function(){n||(n=!0,t([]))}),5e3)}})));case 1:case"end":return t.stop()}}),t)})))},t.getPreviewResultMember=function(e){return r(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){if(i)t([]);else{var n=!1;window.tsoc_o.getPreviewResultMember((function(e){n||(n=!0,t(e))}),e),o.delay((function(){n||(n=!0,t([]))}),5e3)}})));case 1:case"end":return t.stop()}}),t)})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._toStringTimestamp=t.getDateStr=t.nteArray=t.intToHTMLcolor=t.nteBool=t.nteString=t.nteFloat=t.nteInt=t.nteUInt=t.getUnicUrl=t.getUnicNum=t.getUnic=void 0;var r=n(20);Date.now||(Date.now=function(){return(new Date).getTime()});var o=0;function i(){return a().toString(36)}function a(){var e=Date.now();return e>o?o=e:o+=1,o}t.getUnic=i,t.getUnicNum=a,t.getUnicUrl=function(e){if(!e)return"";var t=e=e.trim();return 0!==t.indexOf("http://")&&0!==t.indexOf("https://")||(t=t.indexOf("?")>0?t+"&t="+i():t+"?t="+i()),t},t.nteUInt=function(e,t){if(r.isNullOrUndefined(e))return t;if(r.isNumber(e))return isNaN(e)||e<0?t:Math.round(e);var n=parseInt(String(e),10);return isNaN(n)||n<0?t:n},t.nteInt=function(e,t){if(r.isNullOrUndefined(e))return t;if(r.isNumber(e))return Math.round(e);var n=parseInt(String(e),10);return isNaN(n)?t:n},t.nteFloat=function(e,t){if(r.isNullOrUndefined(e))return t;if(r.isNumber(e))return e;var n=parseFloat(String(e));return isNaN(n)?t:n},t.nteString=function(e,t){return r.isNullOrUndefined(e)?t:String(e)},t.nteBool=function(e,t){if(r.isNullOrUndefined(e))return t;if(r.isBoolean(e))return e;var n=String(e);return"true"===n||"false"!==n&&t},t.intToHTMLcolor=function(e){var t=e-0,n=(t=(255&t)<<16|65280&t|(16711680&t)>>>16).toString(16);return n="#000000".substring(0,7-n.length)+n},t.nteArray=function(e){if(e){if(Array.isArray(e))return e;if("string"==typeof e){var t=e;if(t.indexOf("[")>=0&&t.indexOf("]")>0)try{return JSON.parse(t)}catch(e){}}var n=[];return n.push(e),n}return[]},t.getDateStr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".",t=new Date,n=t.getFullYear(),r=t.getMonth()+1,o=t.getDate(),i=r<10?"0"+r:""+r,a=o<10?"0"+o:""+o;return n+e+i+e+a},t._toStringTimestamp=function(e){var t=e.getFullYear(),n=e.getMonth()+1+"";parseInt(n,10)<10&&(n="0"+n);var r=e.getDate()+"";return parseInt(r,10)<10&&(r="0"+r),t+"-"+n+"-"+r+" "+e.toTimeString().substr(0,8)}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),f=n(2),p=n(1),d=n(21),h=n(13),_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(c,e);var t,n,a,s=i(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).m_btnH=0,t.m_max=0,t.m_sy=-1,t.m_vy=-1,t.m_time=-1,t.m_bSend=!1,t.m_state={y:0,alpha:1,tDur:0,aDur:0,isOn:!1,disabled:!1},t._ref=function(e){if(!(t.m_max>0)&&e){e.setAttribute("touch-action","none");var n=window.getComputedStyle(e),r=h.nteFloat(n.height,0),o=h.nteFloat(n.bottom,0);r>0&&(t.m_btnH=r,t.m_max=r+o+10,t.props.view||(t.m_state.y=t.m_max))}},t._down=function(e){t.m_state.isOn||t.m_state.disabled||(t.m_state.y=t.props.originY,t.m_state.alpha=1,t.m_state.tDur=0,t.m_state.aDur=0,t.m_state.isOn=!0,t.m_vy=0,t.m_time=Date.now())},t._start=function(e,n){t.m_sy=n.y,t.m_bSend=!0},t._drag=function(e,n){if(t.m_state.isOn&&!t.m_state.disabled){var r=n.y-t.m_sy;"teacher"===t.props.type?(n.deltaY<-1?t.m_bSend=!1:n.deltaY>=0&&(t.m_bSend=!0),r<0&&(r=0)):(n.deltaY>1?t.m_bSend=!1:n.deltaY<=0&&(t.m_bSend=!0),r>0&&(r=0)),!1===t.props.preventDrag&&(t.m_state.y=r+t.props.originY);var o=Date.now();t.m_vy=n.deltaY/(o-t.m_time),t.m_time=o}},t._stop=function(e,n){if(t.m_state.isOn&&!t.m_state.disabled)if(t.m_bSend){var r=.5*t.m_vy*1e3,o=n.y-t.m_sy;"teacher"===t.props.type?(r<t.m_btnH?r=t.m_btnH:r>4*t.m_btnH&&(r=4*t.m_btnH),o<0&&(o=0)):(-1*r<t.m_btnH?r=-t.m_btnH:-1*r>4*t.m_btnH&&(r=-4*t.m_btnH),o>0&&(o=0)),t.m_state.tDur=.5,t.m_state.aDur=.5,t.m_state.alpha=0,t.m_state.y=o+r+t.props.originY,t.props.onSend()}else t.m_state.isOn=!1,t.m_state.tDur=.3,t.m_state.aDur=0,t.m_state.y=t.props.originY},e.sended?(t.m_state.alpha=0,t.m_state.disabled=!0):e.view?(t.m_state.y=e.originY,t.m_state.alpha=1,t.m_state.tDur=.3,t.m_state.aDur=0,t.m_state.isOn=!1,t.m_state.disabled=!1):e.view||(t.m_state.y=e.originY,t.m_state.alpha=0,t.m_state.tDur=.3,t.m_state.aDur=.3,t.m_state.isOn=!1,t.m_state.disabled=!0),t}return t=c,(n=[{key:"componentWillReceiveProps",value:function(e){e.sended&&!this.props.sended?(this.m_state.alpha=0,this.m_state.disabled=!0):e.view&&!this.props.view?(this.m_state.y=e.originY,this.m_state.alpha=1,e.preventUpWhenView?(this.m_state.tDur=0,this.m_state.aDur=.3):(this.m_state.tDur=.3,this.m_state.aDur=0),this.m_state.isOn=!1,this.m_state.disabled=!1):!e.view&&this.props.view?(this.m_state.y=this.m_max,this.m_state.alpha=0,this.m_state.tDur=.3,this.m_state.aDur=.3,this.m_state.isOn=!1,this.m_state.disabled=!0):!e.view||e.sended||this.m_state.isOn||e.originY===this.props.originY||(this.m_state.y=e.originY,this.m_state.tDur=.3,this.m_state.aDur=0)}},{key:"render",value:function(){var e=this.m_state,t=e.y,n=e.tDur,r=e.aDur,o=e.alpha,i=e.isOn,a=e.disabled,s={transform:"translateY(".concat(t,"px)"),transition:"transform ".concat(n,"s, opacity ").concat(r/2,"s ").concat(r/2,"s"),opacity:o,pointerEvents:a||!this.props.view?"none":"auto"},c=[];return"pad"===this.props.type?c.push("fel_toteacher"):c.push("fel_topad"),i&&c.push("on"),l.createElement(d.DraggableCore,{onMouseDown:this._down,onDrag:this._drag,onStart:this._start,onStop:this._stop},l.createElement("button",{ref:this._ref,className:c.join(" "),style:s}))}}])&&r(t.prototype,n),a&&r(t,a),c}(l.Component);u([f.observable],_.prototype,"m_state",void 0),_=u([p.observer],_),t.default=_},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.KTextArea=void 0;var f=n(0),p=n(2),d=n(1),h=n(5),_=n(16),m=n(11),y=n(7),v=n(13);n(48);var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(c,e);var t,n,a,s=i(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).m_top=0,t.m_cntH=0,t.m_bndH=0,t.m_sTop=0,t.m_sH=0,t.m_pid=-1,t._text="",t._selStart=0,t._selEnd=0,t._lineHeight=0,t._paddingVer=0,t._isSamsungDevice=!1,t._checkLimit=function(){if(!t.m_textarea)return!1;var e=t.m_textarea.value,n=!0;if(t.props.skipEnter&&(n=e.indexOf("/r")<0&&e.indexOf("/n")<0),t.props.maxLength&&t.props.maxLength>0&&e.length>t.props.maxLength&&(n=!1),t.props.maxLineNum&&t.props.maxLineNum>0&&t._lineHeight>0){var r=t.m_textarea.scrollHeight;Math.round((r-t._paddingVer)/t._lineHeight)>t.props.maxLineNum&&(n=!1)}return n?(t._text=e,t._selStart=t.m_textarea.selectionStart,t._selEnd=t.m_textarea.selectionEnd):(t.m_textarea.value=t._text,t.m_textarea.setSelectionRange(t._selStart,t._selEnd),t.props.onLimit&&t.props.onLimit()),n},t._onScroll=function(){t._calc()},t._onChange=function(){t.m_textarea&&(t._checkLimit(),t._calc(),t.props.onChange&&t.props.onChange(t.m_textarea.value))},t._onDone=function(){t.m_textarea&&t.props.onDone&&t.props.onDone(t.m_textarea.value)},t._onResize=function(e,n){t.m_bndH=n,t._calc()},t._onSelect=function(){t.m_textarea&&(t._selStart=t.m_textarea.selectionStart,t._selEnd=t.m_textarea.selectionEnd)},t._detectLineHeight=function(){if(t.m_textarea){var e=window.getComputedStyle(t.m_textarea),n=v.nteUInt(e.fontSize,0),r=e.lineHeight,o=v.nteUInt(r,0);t._paddingVer=v.nteUInt(e.paddingTop,0)+v.nteUInt(e.paddingBottom,0),r&&r.endsWith("%")?t._lineHeight=n*o/100:r&&r.endsWith("px")?t._lineHeight=o:t._lineHeight=o>0?n*o:1.2*n,101===t._lineHeight&&(t._isSamsungDevice=!0)}},t._refArea=function(e){!t.m_textarea&&e&&(t.m_textarea=e,t._detectLineHeight(),t.props.on&&(m.setInputs(t.m_textarea),m.setCallback(t._onChange,null,null,t._onDone)))},t._onFocus=function(e){t.m_textarea&&!t.props.on&&t.m_textarea.blur()},t._onBlur=function(e){t.m_textarea&&t.props.on&&t.m_pid<0&&t._focusArea()},t._refWrap=function(e){!t.m_wrap&&e&&(t.m_wrap=e)},t._refBar=function(e){if(!t.m_bar&&e){t.m_bar=e;var n=function(e){t._releasePID()},r=function(e){if(!t.props.preventScrollByBar&&t.m_textarea&&t.m_bar&&e.pointerId===t.m_pid){var n=t.m_textarea.scrollHeight,r=n-t.m_bndH,o=-r*e.clientY/t.m_bndH,i=.98*t.m_bndH;o>0?o=0:o<-r&&(o=-r),t.m_sTop=-1*o*i/n,t.m_sH=t.m_bndH*i/n,t.m_textarea.scrollTop=-o,t.m_top=o,t.m_cntH=n}};e.addEventListener("pointerdown",(function(e){if(!t.props.preventScrollByBar&&!t.props.autoResize&&t.m_textarea&&t.m_bar&&!(t.m_pid>=0)){t.m_pid=e.pointerId;try{t.m_bar.setPointerCapture(t.m_pid)}catch(e){}r(e)}})),e.addEventListener("pointercancel",n),e.addEventListener("pointerup",n),e.addEventListener("pointerleave",n),e.addEventListener("pointermove",r)}},t._calc=h.throttle((function(){if(t.m_textarea&&!(t.m_bndH<=0))if(t._checkLimit())if(t.props.autoResize){t.m_textarea.scrollTop=0,t.m_sTop=0,t.m_sH=0,t.m_top=0,t.m_textarea.style.height="auto";var e=t.m_textarea.scrollHeight;t.m_textarea.style.height=e+"px",t.m_cntH=e}else{var n=t.m_textarea.scrollTop;if(t.props.chkLineHeight&&t._lineHeight>0)n=Math.round(n/t._lineHeight)*t._lineHeight,t.m_textarea.scrollTop=n;n*=-1;var r=t.m_textarea.scrollHeight;if(r>t.m_bndH){var o=.98*t.m_bndH;t.m_sTop=-1*n*o/r,t.m_sH=t.m_bndH*o/r}else t.m_sH=0;t.m_top=n,t.m_cntH=r}else t._calc()}),t.props.autoResize?20:10),t}return t=c,(n=[{key:"_focusArea",value:function(){return l(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.wait(100);case 2:if(this.m_textarea&&this.props.on){e.next=4;break}return e.abrupt("return");case 4:this.m_textarea.focus();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"_releasePID",value:function(){if(this.m_pid>=0&&this.m_bar){try{this.m_bar.releasePointerCapture(this.m_pid)}catch(e){}this.m_pid=-1}}},{key:"componentDidUpdate",value:function(e){this.props.on&&!e.on?this.m_textarea&&(m.setInputs(this.m_textarea),m.setCallback(this._onChange,null,null,this._onDone),this._focusArea(),this._detectLineHeight()):!this.props.on&&e.on&&this._releasePID(),!this.props.view&&e.view?(this._releasePID(),this.m_textarea&&(this.m_textarea.value=""),this._text="",this._selStart=0,this._selEnd=0):this.props.view&&!e.view&&this._detectLineHeight()}},{key:"render",value:function(){var e,t=this.props,n=(t.view,t.autoResize),r=t.className,o=this.props.limitByCode?void 0:this.props.maxLength;return this._isSamsungDevice&&(e={lineHeight:"84px"}),f.createElement("div",{ref:this._refWrap,className:"k-tarea"+(r?" "+r:"")+(n?" auto-resize":"")},f.createElement("div",{className:"k-tarea-bg",style:{top:this.m_top+"px",height:this.m_cntH+"px"}}),f.createElement("textarea",{ref:this._refArea,disabled:!this.props.on,onSelect:this._onSelect,onScroll:this._onScroll,onChange:this._onChange,onFocus:this._onFocus,onBlur:this._onBlur,autoFocus:!1,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",rows:this.props.rows,spellCheck:!1,maxLength:o,style:e},this.props.children),f.createElement("div",{"touch-action":"none",className:"k-tarea-bar",hidden:this.m_sH<=0,ref:this._refBar},f.createElement("div",{className:"k-tarea-drag",style:{top:this.m_sTop+"px",height:this.m_sH+"px",pointerEvents:"none"}})),f.createElement(_.default,{handleWidth:!1,handleHeight:!0,onResize:this._onResize}))}},{key:"value",get:function(){return this.m_textarea?this.m_textarea.value:""}}])&&r(t.prototype,n),a&&r(t,a),c}(f.Component);u([p.observable],b.prototype,"m_top",void 0),u([p.observable],b.prototype,"m_cntH",void 0),u([p.observable],b.prototype,"m_sTop",void 0),u([p.observable],b.prototype,"m_sH",void 0),b=u([d.observer],b),t.KTextArea=b},function(e,t,n){"use strict";n.r(t),n.d(t,"withResizeDetector",(function(){return de}));var r=n(0),o=n.n(r),i=n(18),a=n(22),s=function(e){var t=[],n=null,r=function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];t=o,n||(n=requestAnimationFrame((function(){n=null,e.apply(void 0,t)})))};return r.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},r},c=n(3);var u=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},l=n(23),f="object"==typeof self&&self&&self.Object===Object&&self,p=l.a||f||Function("return this")(),d=function(){return p.Date.now()},h=p.Symbol,_=Object.prototype,m=_.hasOwnProperty,y=_.toString,v=h?h.toStringTag:void 0;var b=function(e){var t=m.call(e,v),n=e[v];try{e[v]=void 0;var r=!0}catch(e){}var o=y.call(e);return r&&(t?e[v]=n:delete e[v]),o},g=Object.prototype.toString;var w=function(e){return g.call(e)},x=h?h.toStringTag:void 0;var E=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":x&&x in Object(e)?b(e):w(e)};var O=function(e){return null!=e&&"object"==typeof e};var S=function(e){return"symbol"==typeof e||O(e)&&"[object Symbol]"==E(e)},P=/^\s+|\s+$/g,k=/^[-+]0x[0-9a-f]+$/i,R=/^0b[01]+$/i,j=/^0o[0-7]+$/i,C=parseInt;var D=function(e){if("number"==typeof e)return e;if(S(e))return NaN;if(u(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=u(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(P,"");var n=R.test(e);return n||j.test(e)?C(e.slice(2),n?2:8):k.test(e)?NaN:+e},T=Math.max,N=Math.min;var I=function(e,t,n){var r,o,i,a,s,c,l=0,f=!1,p=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function _(t){var n=r,i=o;return r=o=void 0,l=t,a=e.apply(i,n)}function m(e){return l=e,s=setTimeout(v,t),f?_(e):a}function y(e){var n=e-c;return void 0===c||n>=t||n<0||p&&e-l>=i}function v(){var e=d();if(y(e))return b(e);s=setTimeout(v,function(e){var n=t-(e-c);return p?N(n,i-(e-l)):n}(e))}function b(e){return s=void 0,h&&r?_(e):(r=o=void 0,a)}function g(){var e=d(),n=y(e);if(r=arguments,o=this,c=e,n){if(void 0===s)return m(c);if(p)return clearTimeout(s),s=setTimeout(v,t),_(c)}return void 0===s&&(s=setTimeout(v,t)),a}return t=D(t)||0,u(n)&&(f=!!n.leading,i=(p="maxWait"in n)?T(D(n.maxWait)||0,t):i,h="trailing"in n?!!n.trailing:h),g.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=c=o=s=void 0},g.flush=function(){return void 0===s?a:b(d())},g};var M=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return u(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),I(e,t,{leading:r,maxWait:t,trailing:o})},A={debounce:I,throttle:M},B=function(e){return"function"==typeof e},H=function(){return"undefined"==typeof window};function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e,t){return!t||"object"!==q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function U(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(a,e);var t,n,r,o,i=(t=a,function(){var e,n=W(t);if(U()){var r=W(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return F(this,e)});function a(){return L(this,a),i.apply(this,arguments)}return n=a,(r=[{key:"render",value:function(){return this.props.children}}])&&z(n.prototype,r),o&&z(n,o),a}(r.PureComponent);function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?$(e):t}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(f,e);var t,n,c,u,l=(t=f,function(){var e,n=Z(t);if(Q()){var r=Z(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return K(this,e)});function f(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),ee($(t=l.call(this,e)),"cancelHandler",(function(){t.resizeHandler&&t.resizeHandler.cancel&&(t.resizeHandler.cancel(),t.resizeHandler=null)})),ee($(t),"rafClean",(function(){t.raf&&t.raf.cancel&&(t.raf.cancel(),t.raf=null)})),ee($(t),"toggleObserver",(function(e){var n=t.getElement();n&&t.resizeObserver[e]&&t.resizeObserver[e](n)})),ee($(t),"getElement",(function(){var e=t.props,n=e.querySelector,r=e.targetDomEl;if(!H()){if(n)return document.querySelector(n);if(r&&((o=r)instanceof Element||o instanceof HTMLDocument))return r;var o,a=t.element&&Object(i.findDOMNode)(t.element);if(a)return a.parentElement}})),ee($(t),"createUpdater",(function(){return t.rafClean(),t.raf=s((function(e){var n=e.width,r=e.height,o=t.props.onResize;B(o)&&o(n,r),t.setState({width:n,height:r})})),t.raf})),ee($(t),"createResizeHandler",(function(e){var n=t.state,r=n.width,o=n.height,i=t.props,a=i.handleWidth,s=i.handleHeight;if(a||s){var c=t.createUpdater();e.forEach((function(e){var n=e&&e.contentRect||{},i=n.width,u=n.height,l=a&&r!==i||s&&o!==u;!t.skipOnMount&&l&&!H()&&c({width:i,height:u}),t.skipOnMount=!1}))}})),ee($(t),"onRef",(function(e){t.element=e})),ee($(t),"getRenderType",(function(){var e=t.props,n=e.render,o=e.children;return B(n)?"renderProp":B(o)?"childFunction":Object(r.isValidElement)(o)?"child":Array.isArray(o)?"childArray":"parent"})),ee($(t),"getTargetComponent",(function(){var e=t.props,n=e.render,o=e.children,i=e.nodeType,a=t.state,s={width:a.width,height:a.height};switch(t.getRenderType()){case"renderProp":return Object(r.cloneElement)(n(s),{key:"resize-detector"});case"childFunction":return Object(r.cloneElement)(o(s));case"child":return Object(r.cloneElement)(o,s);case"childArray":return o.map((function(e){return!!e&&Object(r.cloneElement)(e,s)}));default:return Object(r.createElement)(i)}}));var n=e.skipOnMount,o=e.refreshMode,c=e.refreshRate,u=e.refreshOptions;t.state={width:void 0,height:void 0},t.skipOnMount=n,t.raf=null,t.element=null,t.unmounted=!1;var p=A[o];return t.resizeHandler=p?p(t.createResizeHandler,c,u):t.createResizeHandler,t.resizeObserver=new a.a(t.resizeHandler),t}return n=f,(c=[{key:"componentDidMount",value:function(){this.toggleObserver("observe")}},{key:"componentWillUnmount",value:function(){this.toggleObserver("unobserve"),this.rafClean(),this.cancelHandler(),this.unmounted=!0}},{key:"render",value:function(){return o.a.createElement(X,{ref:this.onRef},this.getTargetComponent())}}])&&Y(n.prototype,c),u&&Y(n,u),f}(r.PureComponent);te.propTypes={handleWidth:c.bool,handleHeight:c.bool,skipOnMount:c.bool,refreshRate:c.number,refreshMode:c.string,refreshOptions:Object(c.shape)({leading:c.bool,trailing:c.bool}),querySelector:c.string,targetDomEl:c.any,onResize:c.func,render:c.func,children:c.any,nodeType:c.node},te.defaultProps={handleWidth:!1,handleHeight:!1,skipOnMount:!1,refreshRate:1e3,refreshMode:void 0,refreshOptions:void 0,querySelector:null,targetDomEl:null,onResize:null,render:void 0,children:null,nodeType:"div"};var ne=te;function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ae(e,t,n){return t&&ie(e.prototype,t),n&&ie(e,n),e}function se(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ue(e){return function(){var t,n=pe(e);if(fe()){var r=pe(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return le(this,t)}}function le(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var de=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{handleWidth:!0,handleHeight:!0};return function(n){se(i,n);var r=ue(i);function i(){return oe(this,i),r.apply(this,arguments)}return ae(i,[{key:"render",value:function(){return o.a.createElement(ne,t,o.a.createElement(e,this.props))}}]),i}(r.Component)};t.default=ne},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=ReactDOM},function(e,t,n){"use strict";e.exports=n(26)},function(e,t,n){(function(e){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},o=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,a=String(e).replace(o,(function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),c=r[n];n<i;c=r[++n])_(c)||!g(c)?a+=" "+c:a+=" "+s(c);return a},t.deprecate=function(n,r){if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,r).apply(this,arguments)};var o=!1;return function(){if(!o){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),o=!0}return n.apply(this,arguments)}};var i,a={};function s(e,n){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),h(n)?r.showHidden=n:n&&t._extend(r,n),v(r.showHidden)&&(r.showHidden=!1),v(r.depth)&&(r.depth=2),v(r.colors)&&(r.colors=!1),v(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),l(r,e,r.depth)}function c(e,t){var n=s.styles[t];return n?"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m":e}function u(e,t){return e}function l(e,n,r){if(e.customInspect&&n&&E(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,e);return y(o)||(o=l(e,o,r)),o}var i=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(y(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(m(t))return e.stylize(""+t,"number");if(h(t))return e.stylize(""+t,"boolean");if(_(t))return e.stylize("null","null")}(e,n);if(i)return i;var a=Object.keys(n),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),x(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return f(n);if(0===a.length){if(E(n)){var c=n.name?": "+n.name:"";return e.stylize("[Function"+c+"]","special")}if(b(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(w(n))return e.stylize(Date.prototype.toString.call(n),"date");if(x(n))return f(n)}var u,g="",O=!1,S=["{","}"];(d(n)&&(O=!0,S=["[","]"]),E(n))&&(g=" [Function"+(n.name?": "+n.name:"")+"]");return b(n)&&(g=" "+RegExp.prototype.toString.call(n)),w(n)&&(g=" "+Date.prototype.toUTCString.call(n)),x(n)&&(g=" "+f(n)),0!==a.length||O&&0!=n.length?r<0?b(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),u=O?function(e,t,n,r,o){for(var i=[],a=0,s=t.length;a<s;++a)R(t,String(a))?i.push(p(e,t,n,r,String(a),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(p(e,t,n,r,o,!0))})),i}(e,n,r,s,a):a.map((function(t){return p(e,n,r,s,t,O)})),e.seen.pop(),function(e,t,n){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(u,g,S)):S[0]+g+S[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,n,r,o,i){var a,s,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),R(r,o)||(a="["+o+"]"),s||(e.seen.indexOf(c.value)<0?(s=_(n)?l(e,c.value,null):l(e,c.value,n-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),v(a)){if(i&&o.match(/^\d+$/))return s;(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function d(e){return Array.isArray(e)}function h(e){return"boolean"==typeof e}function _(e){return null===e}function m(e){return"number"==typeof e}function y(e){return"string"==typeof e}function v(e){return void 0===e}function b(e){return g(e)&&"[object RegExp]"===O(e)}function g(e){return"object"==typeof e&&null!==e}function w(e){return g(e)&&"[object Date]"===O(e)}function x(e){return g(e)&&("[object Error]"===O(e)||e instanceof Error)}function E(e){return"function"==typeof e}function O(e){return Object.prototype.toString.call(e)}function S(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(v(i)&&(i=Object({NODE_ENV:"production"}).NODE_DEBUG||""),n=n.toUpperCase(),!a[n])if(new RegExp("\\b"+n+"\\b","i").test(i)){var r=e.pid;a[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,r,e)}}else a[n]=function(){};return a[n]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=d,t.isBoolean=h,t.isNull=_,t.isNullOrUndefined=function(e){return null==e},t.isNumber=m,t.isString=y,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=v,t.isRegExp=b,t.isObject=g,t.isDate=w,t.isError=x,t.isFunction=E,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(28);var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function k(){var e=new Date,t=[S(e.getHours()),S(e.getMinutes()),S(e.getSeconds())].join(":");return[e.getDate(),P[e.getMonth()],t].join(" ")}function R(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",k(),t.format.apply(t,arguments))},t.inherits=n(29),t._extend=function(e,t){if(!t||!g(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var j="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function C(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(j&&e[j]){var t;if("function"!=typeof(t=e[j]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,j,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,o)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),j&&Object.defineProperty(t,j,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=j,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var o=n.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var i=this,a=function(){return o.apply(i,arguments)};t.apply(this,n).then((function(t){e.nextTick(a,null,t)}),(function(t){e.nextTick(C,t,a)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,r(t)),n}}).call(this,n(27))},function(e,t){e.exports=ReactDraggable},function(e,t,n){"use strict";(function(e){var n=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var o=r[n];e.call(t,o[1],o[0])}},t}()}(),r="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,o=void 0!==e&&e.Math===Math?e:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),i="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(o):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var a=["top","right","bottom","left","width","height","size","weight"],s="undefined"!=typeof MutationObserver,c=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,o=0;function a(){n&&(n=!1,e()),r&&c()}function s(){i(a)}function c(){var e=Date.now();if(n){if(e-o<2)return;r=!0}else n=!0,r=!1,setTimeout(s,t);o=e}return c}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){r&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),s?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){r&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;a.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),u=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},l=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||o},f=y(0,0,0,0);function p(e){return parseFloat(e)||0}function d(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+p(e["border-"+n+"-width"])}),0)}function h(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return f;var r=l(e).getComputedStyle(e),o=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var o=r[n],i=e["padding-"+o];t[o]=p(i)}return t}(r),i=o.left+o.right,a=o.top+o.bottom,s=p(r.width),c=p(r.height);if("border-box"===r.boxSizing&&(Math.round(s+i)!==t&&(s-=d(r,"left","right")+i),Math.round(c+a)!==n&&(c-=d(r,"top","bottom")+a)),!function(e){return e===l(e).document.documentElement}(e)){var u=Math.round(s+i)-t,h=Math.round(c+a)-n;1!==Math.abs(u)&&(s-=u),1!==Math.abs(h)&&(c-=h)}return y(o.left,o.top,s,c)}var _="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof l(e).SVGGraphicsElement}:function(e){return e instanceof l(e).SVGElement&&"function"==typeof e.getBBox};function m(e){return r?_(e)?function(e){var t=e.getBBox();return y(0,0,t.width,t.height)}(e):h(e):f}function y(e,t,n,r){return{x:e,y:t,width:n,height:r}}var v=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=y(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=m(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),b=function(e,t){var n,r,o,i,a,s,c,l=(r=(n=t).x,o=n.y,i=n.width,a=n.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,c=Object.create(s.prototype),u(c,{x:r,y:o,width:i,height:a,top:o,right:r+i,bottom:a+o,left:r}),c);u(this,{target:e,contentRect:l})},g=function(){function e(e,t,r){if(this.activeObservations_=[],this.observations_=new n,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof l(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new v(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof l(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new b(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),w="undefined"!=typeof WeakMap?new WeakMap:new n,x=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=c.getInstance(),r=new g(t,n,this);w.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){x.prototype[e]=function(){var t;return(t=w.get(this))[e].apply(t,arguments)}}));var E=void 0!==o.ResizeObserver?o.ResizeObserver:x;t.a=E}).call(this,n(17))},function(e,t,n){"use strict";(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.a=n}).call(this,n(17))},function(e,t,n){e.exports=n(25)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(19),o=n(0),i=n(18),a=n(4),s=n(12),c=n(30);r.setConfig({ErrorOverlay:function(e){return o.createElement("div",null)}});var u,l={clear:a.App.pub_clear,importLink:c.importLink,importHTML:c.importHTML},f=!0;u=n(31),f=!1;var p=!1,d=u,h=d.default,_=d.AppProvider,m=d.appContext;l.set=function(e,t,n){a.App.pub_set(e,t,n),m.setData(e)},l.render=function(){a.App.pub_initAudio(),i.render(o.createElement(_,null,o.createElement(h,null)),document.getElementById("wrap"))},f?(l.init=function(e,t,n,r,o){a.App.pub_load(e,null,t,n,r,o)},l.start=function(){p=!0,setTimeout((function(){return m.start()}),500)},l.receive=function(e){if(4===e.type){var t=e.data;p?t&&t.id&&""!==t.id&&s.sendPADToID(t.id,a.App.isStarted?0:1,null):a.App.pub_addInitedStudent(t)&&(p||(p=!0,m.start()))}else m.receive(e)},l.teachingTool=function(e){}):(l.init=function(e,t,n,r,o){a.App.pub_load(null,e,t,n,r,o),s.sendTeacher(4,e)},l.receive=function(e){null!=a.App.student&&m.receive(e)},l.notifyUploadToServerResult=function(e){console.log("app_o['notifyUploadToServerResult']"),m.uploaded(e)},l.notify=function(e){m.notify(e)},l.notifyVideoRecord=function(e){m.notifyVideoRecord(e)},l.notifyStartVoice=function(){m.notify("notifyStartVoice")},l.notifyVoiceRecordResult=function(e){m.notifyRecorded(e)},l.notifyTakePicture=function(e,t){m.notifyTakePicture&&m.notifyTakePicture(e,t)}),n(62),e.app_o=l}).call(this,n(17))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=(r=n(0))&&"object"==typeof r&&"default"in r?r.default:r;function i(e){return i.warnAboutHMRDisabled&&(i.warnAboutHMRDisabled=!0,console.error("React-Hot-Loader: misconfiguration detected, using production version in non-production environment."),console.error("React-Hot-Loader: Hot Module Replacement is not enabled.")),o.Children.only(e.children)}i.warnAboutHMRDisabled=!1;var a=function e(){return e.shouldWrapWithAppContainer?function(e){return function(t){return o.createElement(i,null,o.createElement(e,t))}}:function(e){return e}};a.shouldWrapWithAppContainer=!1;t.AppContainer=i,t.hot=a,t.areComponentsEqual=function(e,t){return e===t},t.setConfig=function(){},t.cold=function(e){return e},t.configureComponent=function(){}},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,u=[],l=!1,f=-1;function p(){l&&c&&(l=!1,c.length?u=c.concat(u):f=-1,u.length&&d())}function d(){if(!l){var e=s(p);l=!0;for(var t=u.length;t;){for(c=u,u=[];++f<t;)c&&c[f].run();f=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function _(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||s(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=_,o.addListener=_,o.once=_,o.off=_,o.removeListener=_,o.removeAllListeners=_,o.emit=_,o.prependListener=_,o.prependOnceListener=_,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.importLink=t.importHTML=void 0,t.importHTML=function(e){return new Promise((function(t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="document",r.onload=function(e){if(e){var o=r.response;o&&o.body&&o.body.firstElementChild?t(o.body.firstElementChild):o&&o.documentElement?t(o.documentElement):n("error")}},r.onerror=function(e){n(e)},r.send(null)}))},t.importLink=function(e,t){return new Promise((function(t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="document",r.onload=function(e){if(e){var n=r.response;t(n)}},r.onerror=function(e){n(e)},r.send(null)}))}},function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.appContext=t.AppProvider=void 0;var f=n(0),p=n(19),d=n(1),h=n(33),_=n(34),m=n(36);Object.defineProperty(t,"appContext",{enumerable:!0,get:function(){return m.sContext}}),Object.defineProperty(t,"AppProvider",{enumerable:!0,get:function(){return m.StudentProvider}});var y=n(39),v=n(40);n(60),n(61);var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(u,e);var t,n,s,c=a(u);function u(){return r(this,u),c.apply(this,arguments)}return t=u,(n=[{key:"render",value:function(){var e=this.props,t=e.state,n=e.actions,r="direction"===t.viewDiv?0:-1280;return f.createElement(f.Fragment,null,f.createElement("div",{id:"preload_hidden",style:{opacity:0}},f.createElement("span",null,"가나다라"),f.createElement("span",{style:{fontWeight:"bold"}},"가나다라")),f.createElement("div",{className:"content-container"},f.createElement("div",{className:"content-wrapper",style:{left:r+"px"}},f.createElement("div",null,f.createElement(_.default,{className:"video-direction",view:"direction"===t.viewDiv,on:t.directionON,isTeacher:!1,video_url:"/content/digenglish_lib/direction/audio_english.webp",video_frame:125})),f.createElement("div",null,f.createElement(v.default,{view:"content"===t.viewDiv,qsMode:t.qsMode,scriptProg:t.scriptProg,state:t,actions:n}),f.createElement(y.Loading,{view:t.loading}),f.createElement(h.SVGAni,{className:"goodjob-svg",view:t.goodjob,delay:3e3,data:"".concat("/content/digenglish_lib/","images/goodjob_ls.svg"),onComplete:n.goodjobComplete}),f.createElement(h.SVGEmbed,{className:"eyeon_svg",data:"".concat("/content/digenglish_lib/","images/eyeon_ls.svg"),view:"eyeon"===t.viewDiv||"direction"===t.viewDiv,bPlay:!1})))))}}])&&o(t.prototype,n),s&&o(t,s),u}(f.Component);b=l([d.observer],b);var g=m.useStudent((function(e){return f.createElement(d.Observer,null,(function(){return f.createElement(b,{state:e.state,actions:e.actions})}))}));t.default=p.hot(e)(g)}).call(this,n(32)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";function r(e,t,n){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var h=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":d(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.SVGAni=t.SVGBg=t.SVGEmbed=void 0;var _=n(0),m=n(20),y=n(1),v=n(2),b=n(5),g=function(e){s(n,e);var t=u(n);function n(e){var r;return o(this,n),(r=t.call(this,e)).m_obj=null,r.m_svg=null,r.m_bPlay=!1,r._ref=r._ref.bind(f(r)),r}return a(n,[{key:"_init",value:function(){if(!this.m_svg&&this.m_obj){var e=this.m_obj;null===this.m_svg&&null!==e.contentDocument&&null!==e.contentDocument.firstElementChild&&"svg"===e.contentDocument.firstElementChild.tagName.toLowerCase()&&(this.m_svg=e.contentDocument.firstElementChild)}}},{key:"_ref",value:function(e){var t=this;!this.m_obj&&e&&(this.m_obj=e,null==e.contentDocument||null==e.contentDocument.firstElementChild||"svg"!==e.contentDocument.firstElementChild.tagName.toLowerCase()?e.onload=e.oncanplay=e.onloadeddata=function(e){t.m_svg||(t._init(),t.m_bPlay?t._play(-1):t._pause(-1))}:this._pause(-1))}},{key:"_play",value:function(e){if(this.m_bPlay=!0,this._init(),null!=this.m_svg)try{e>=0&&this.m_svg.setCurrentTime(e),this.m_svg.animationsPaused()&&this.m_svg.unpauseAnimations()}catch(e){}}},{key:"_pause",value:function(e){if(this.m_bPlay=!1,this._init(),null!=this.m_svg)try{e>=0&&this.m_svg.setCurrentTime(e),this.m_svg.animationsPaused()||this.m_svg.pauseAnimations()}catch(e){}}},{key:"componentDidUpdate",value:function(e){if(this.props.bPlay!==e.bPlay||this.props.time!==e.time){var t=m.isUndefined(this.props.time)?-1:this.props.time;this.props.bPlay?this._play(t):this._pause(t)}}},{key:"render",value:function(){var e={};return this.props.view||(e.zIndex=-1,e.visibility="hidden",e.pointerEvents="none"),_.createElement("object",{className:this.props.className,ref:this._ref,data:this.props.data,type:"image/svg+xml",style:e})}}]),n}(_.Component);t.SVGEmbed=g;var w=function(e){s(n,e);var t=u(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).m_character=null,e}return a(n,[{key:"_init",value:function(){r(p(n.prototype),"_init",this).call(this),!this.m_character&&this.m_svg&&(this.m_character=this.m_svg.querySelector("#character"),this.m_character&&this.m_character.setAttribute("opacity",this.props.viewCharactor?"1":"0"))}},{key:"componentDidUpdate",value:function(e){r(p(n.prototype),"componentDidUpdate",this).call(this,e),this.m_character&&this.props.viewCharactor!==e.viewCharactor&&this.m_character.setAttribute("opacity",this.props.viewCharactor?"1":"0")}}]),n}(g);t.SVGBg=w;var x=function(e){s(n,e);var t=u(n);function n(e){var r;return o(this,n),(r=t.call(this,e)).m_play=!1,r}return a(n,[{key:"componentDidUpdate",value:function(e){var t=this;if(this.props.view&&!e.view){this.m_play=!0;var n=this.props.delay;n||(n=800),b.delay((function(){t.props.onComplete()}),n)}else!this.props.view&&e.view&&(this.m_play=!1)}},{key:"render",value:function(){return _.createElement(g,{className:this.props.className,data:this.props.data,view:this.props.view,time:0,bPlay:this.m_play})}}]),n}(_.Component);h([v.observable],x.prototype,"m_play",void 0),x=h([y.observer],x),t.SVGAni=x},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},f=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var p=n(0),d=n(2),h=n(1),_=n(5),m=n(7),y=n(35),v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(u,e);var t,n,a,c=i(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=c.call(this,e)).m_on=!1,t.m_clipView=!1,t.m_imgDiv=null,t._refImg=function(e){e&&void 0!==t.props.video_url&&""!==t.props.video_url&&(t.m_imgDiv=e,t.m_clipView||_.delay((function(){t.m_imgDiv&&(t.m_clipView=!0)}),1250))},t._onClick=function(){t.props.isTeacher&&t._off()},t._off=function(){return f(s(t),void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.view||!this.m_on){e.next=6;break}return this.m_on=!1,this.props.onEndStart&&this.props.onEndStart(),e.next=5,m.wait(500);case 5:this.props.view&&!this.m_on&&this.props.onEnd&&this.props.onEnd();case 6:case"end":return e.stop()}}),e,this)})))},t.m_on=e.view&&e.on,t}return t=u,(n=[{key:"_on",value:function(){return f(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.m_on=!0;case 1:case"end":return e.stop()}}),e,this)})))}},{key:"componentDidUpdate",value:function(e){this.props.view?e.view?this.props.on&&!e.on?this._on():!this.props.on&&e.on&&this._off():this.props.on?this._on():this.m_on=!1:this.m_on=!1}},{key:"render",value:function(){var e=[];return e.push(this.props.className),this.props.view?this.m_on&&e.push("on"):e.push("hide"),p.createElement("div",{className:e.join(" "),onClick:this._onClick},this.props.children,p.createElement("img",{className:"movieclip",src:this.props.video_url,ref:this._refImg,style:this.m_clipView?void 0:y.HIDE}),p.createElement("div",{className:"direction"}))}}])&&r(t.prototype,n),a&&r(t,a),u}(p.Component);l([d.observable],v.prototype,"m_on",void 0),l([d.observable],v.prototype,"m_clipView",void 0),l([d.action],v.prototype,"_off",void 0),v=l([h.observer],v),t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HIDE_ANI=t.NONE=t.HIDE=void 0;t.HIDE={opacity:0,pointerEvents:"none"};t.HIDE_ANI={opacity:0,pointerEvents:"none",transitionProperty:"opacity",transitionDuration:"0.6s"};t.NONE={display:"none"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e,t,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0}),t.SPROG=t.QPROG=t.useStudent=t.StudentContext=t.StudentConsumer=t.StudentProvider=t.sContext=void 0;var h,_,m=n(0),y=n(2),v=n(37),b=n(38);!function(e){e[e.UNINIT=0]="UNINIT",e[e.READYA=1]="READYA",e[e.ON=2]="ON",e[e.SENDING=3]="SENDING",e[e.SENDED=4]="SENDED",e[e.COMPLETE=5]="COMPLETE"}(h||(h={})),t.QPROG=h,function(e){e[e.UNMOUNT=0]="UNMOUNT",e[e.MOUNTED=1]="MOUNTED",e[e.YESORNO=2]="YESORNO",e[e.SELECTING=3]="SELECTING",e[e.SENDING=4]="SENDING",e[e.SENDED=5]="SENDED"}(_||(_={})),t.SPROG=_;var g=function(e){s(n,e);var t=u(n);function n(){var e;return r(this,n),(e=t.call(this)).uploaded=function(e){},e.notify=function(e){},e.notifyRecorded=function(e){},e.state.confirmView=!1,e.state.additionalView=!1,e.state.dictationView=!1,e.state.confirmBasicProg=0,e.state.confirmSupProg=0,e.state.confirmHardProg=0,e.state.additionalBasicProg=0,e.state.additionalSupProg=0,e.state.additionalHardProg=0,e.state.dictationProg=[0,0,0],e.state.idx=-1,e.state.scriptProg=0,e.state.qsMode="",e.state.hint=!1,e.state.roll="",e.state.viewClue=!1,e.state.focusIdx=-1,e.state.isPlay=!1,e.state.shadowing=!1,e.actions.getData=function(){return e._data},e}return i(n,[{key:"_setViewDiv",value:function(e){this.state.viewDiv!==e&&(this.state.confirmView=!1,this.state.additionalView=!1,this.state.dictationView=!1,this.state.confirmSupProg<5&&(this.state.confirmSupProg=0),this.state.scriptProg=0,this.state.qsMode="",this.state.roll="",this.state.viewClue=!1,this.state.shadowing=!1,this.state.isPlay=!1,this.state.focusIdx=-1),a(f(n.prototype),"_setViewDiv",this).call(this,e)}},{key:"receive",value:function(e){if(a(f(n.prototype),"receive",this).call(this,e),10===e.type&&e.data){var t=e.data;if("confirm_send"===t.msgtype){if(0===t.idx){if(this.state.confirmSupProg>0)return;this.state.confirmSupProg=2,this.state.idx=0}else if(1===t.idx){if(this.state.confirmBasicProg>0)return;this.state.confirmBasicProg=2,this.state.idx=1}else{var r=t;if(this.state.confirmHardProg>0)return;this.state.confirmHardProg=2,this.state.idx=2,this.state.hint=r.hint,console.log("hardreturn"+this.state.hint)}this.state.scriptProg=0,this.state.confirmView=!0,this.state.viewDiv="content",this.state.qsMode="question",this.state.roll="",this.state.shadowing=!1}else if("confirm_end"===t.msgtype)if(0===t.idx){console.log("confirmend sup");var o=this.state.confirmSupProg;if("content"!==this.state.viewDiv)return;if(2!==o&&3!==o&&4!==o)return;this.state.confirmSupProg=5}else if(1===t.idx){var i=this.state.confirmBasicProg;if("content"!==this.state.viewDiv)return;if(2!==i&&3!==i&&4!==i)return;this.state.confirmBasicProg=5}else{var s=this.state.confirmHardProg;if("content"!==this.state.viewDiv)return;if(2!==s&&3!==s&&4!==s)return;this.state.confirmHardProg=5}else if("additional_send"===t.msgtype){if(0===t.idx){if(this.state.additionalSupProg>0)return;this.state.additionalSupProg=2,this.state.idx=0}else if(1===t.idx){if(this.state.additionalBasicProg>0)return;this.state.additionalBasicProg=2,this.state.idx=1}else{if(this.state.additionalHardProg>0)return;this.state.additionalHardProg=2,this.state.idx=2}this.state.scriptProg=0,this.state.additionalView=!0,this.state.viewDiv="content",this.state.qsMode="question",this.state.roll="",this.state.shadowing=!1}else if("additional_end"===t.msgtype)if(0===t.idx){var c=this.state.additionalSupProg;if("content"!==this.state.viewDiv)return;if(2!==c&&3!==c&&4!==c)return;this.state.additionalSupProg=5}else if(1===t.idx){var u=this.state.additionalBasicProg;if("content"!==this.state.viewDiv)return;if(2!==u&&3!==u&&4!==u)return;this.state.additionalBasicProg=5}else{var l=this.state.additionalHardProg;if("content"!==this.state.viewDiv)return;if(2!==l&&3!==l&&4!==l)return;this.state.additionalHardProg=5}else if("dictation_send"===t.msgtype){if(console.log("dictation_send",t.idx),this.state.dictationProg[t.idx]>0)return;this.state.dictationProg[t.idx]=2,this.state.idx=t.idx,this.state.scriptProg=0,this.state.dictationView=!0,this.state.viewDiv="content",this.state.qsMode="question",this.state.roll="",this.state.shadowing=!1}else if("dictation_end"===t.msgtype){var p=this.state.dictationProg[t.idx];if("content"!==this.state.viewDiv)return;if(2!==p&&3!==p&&4!==p)return;this.state.dictationProg[t.idx]=5}else if("script_send"===t.msgtype){if(0!==this.state.scriptProg)return;this.state.confirmSupProg<5&&(this.state.confirmSupProg=1),this.state.scriptProg=1,this.state.viewDiv="content",this.state.qsMode="script",this.state.roll="",this.state.shadowing=!1}else if("qna_send"===t.msgtype){if("content"!==this.state.viewDiv)return;if(1!==this.state.scriptProg)return;this.state.focusIdx=-1,this.state.scriptProg=2}else if("qna_end"===t.msgtype){if("content"!==this.state.viewDiv)return;if(this.state.scriptProg<1)return;this.state.scriptProg=1}else if("shadowing_send"===t.msgtype){if("content"!==this.state.viewDiv)return;if("script"!==this.state.qsMode)return;this.state.roll="",this.state.shadowing=!0,this.state.focusIdx=-1}else if("playing"===t.msgtype||"paused"===t.msgtype){if("content"!==this.state.viewDiv)return;this.state.isPlay="playing"===t.msgtype}else if("focusidx"===t.msgtype){if("content"!==this.state.viewDiv)return;var d=t;this.state.focusIdx=d.fidx}}}},{key:"setData",value:function(e){this._data=v.initData(e);var t=this._data.script,n=this._data.role_play.speakerA.name,r=this._data.role_play.speakerB.name,o=this._data.role_play.speakerC.name;this._data.role_play.speakerD||(this._data.role_play.speakerD={name:"",image_s:"",image_l:""}),this._data.role_play.speakerE||(this._data.role_play.speakerE={name:"",image_s:"",image_l:""});for(var i=this._data.role_play.speakerD.name,a=(this._data.role_play.speakerE.name,0);a<t.length;a++){var s=t[a];s.speaker===n?s.roll="A":s.speaker===r?s.roll="B":s.speaker===o?s.roll="C":s.speaker===i?s.roll="D":s.roll="E"}}}]),n}(b.StudentContextBase);d([y.observable],g.prototype,"state",void 0),d([y.action],g.prototype,"_setViewDiv",null),d([y.action],g.prototype,"receive",null),d([y.action],g.prototype,"notify",void 0),d([y.action],g.prototype,"notifyRecorded",void 0),t.StudentContext=g;var w=new g;t.sContext=w;var x=m.createContext(w),E=x.Provider,O=x.Consumer;t.StudentConsumer=O;var S=function(e){s(n,e);var t=u(n);function n(){return r(this,n),t.apply(this,arguments)}return i(n,[{key:"render",value:function(){return m.createElement(E,{value:w},this.props.children)}}]),n}(m.Component);t.StudentProvider=S,t.useStudent=function(e){return function(t){return m.createElement(O,null,(function(t){return m.createElement(e,Object.assign({},t))}))}}},function(e,t,n){"use strict";function r(e,t,n,r,o){if(!(!e||e<=0||e>4)){var i={answer:e,correct:"",choices:[],inputed:""};return 1===e?i.correct=t:2===e?i.correct=n:3===e?i.correct=r:4===e&&(i.correct=o),i.correct&&""!==i.correct?t&&""!==t?(i.choices[0]=t,n&&""!==n?(i.choices[1]=n,r&&""!==r?(i.choices[2]=r,o&&""!==o&&(i.choices[3]=o),i):i):null):null:null}}Object.defineProperty(t,"__esModule",{value:!0}),t.drawBalloon=t.initData=void 0,t.initData=function(e){var t=-1,n=[];e.scripts=[];for(var o=0;o<e.script.length;o++){var i=e.script[o];i.script_group!==t&&(-1!==t&&e.scripts.push(n),t=i.script_group,n=[]),n.push(i)}e.scripts.push(n);for(var a=0;a<e.additional_sup.length;a++){var s=e.additional_sup[a];s.app_drops=[];var c=r(s.sentence1.answer,s.sentence1.choice1,s.sentence1.choice2,s.sentence1.choice3,s.sentence1.choice4);c&&(s.app_drops[0]=c,(c=r(s.sentence2.answer,s.sentence2.choice1,s.sentence2.choice2,s.sentence2.choice3,s.sentence2.choice4))&&(s.app_drops[1]=c,(c=r(s.sentence3.answer,s.sentence3.choice1,s.sentence3.choice2,s.sentence3.choice3,s.sentence3.choice4))&&(s.app_drops[2]=c,(c=r(s.sentence4.answer,s.sentence4.choice1,s.sentence4.choice2,s.sentence4.choice3,s.sentence4.choice4))&&(s.app_drops[3]=c))))}return e};i(206,116,225,1);var o=i(34,205,172,1);i(255,186,0,1),i(116,113,236,1);function i(e,t,n,r){return{r:e,g:t,b:n,a:r}}function a(e){var t=e.r,n=e.g,r=e.b,o=e.a;return"rgba(".concat(t,", ").concat(n,", ").concat(r,", ").concat(o,")")}t.drawBalloon=function(e,t,n,r,s,c,u,l,f,p,d,h){var _;_=c<t?1.5*(t-c):1.5*(c-(t+r)),f||(f=0),p||(p=5),d||(d=2),h||(h=i(0,0,0,.2));var m,y=(f>0||f<0||p>0||p<0||d>0)&&h.a>0;(m=o).a=1,e.lineCap="butt",e.lineJoin="miter",e.strokeStyle="transparent",e.fillStyle=a(m);var v=e.createLinearGradient(0,0,0,s);v.addColorStop(0,"rgba(255, 255, 255, 1)"),v.addColorStop(1,"rgba(255, 255, 255, 0)");var b=e.createLinearGradient(0,0,0,s);m.a=.4,b.addColorStop(0,a(m)),m.a=1,b.addColorStop(1,a(m)),e.beginPath(),e.moveTo(t+r,n+s-l),l>0&&e.arc(t+r-l,n+s-l,l,0,Math.PI/2),e.lineTo(t+l,n+s),l>0&&e.arc(t+l,n+s-l,l,Math.PI/2,Math.PI),c<t&&(e.lineTo(t,u+_/2),e.lineTo(c,u),e.lineTo(t,u-_/2)),e.lineTo(t,n+l),l>0&&e.arc(t+l,n+l,l,Math.PI,3*Math.PI/2),e.lineTo(t+r-l,n),l>0&&e.arc(t+r-l,n+l,l,3*Math.PI/2,2*Math.PI),c>t&&(e.lineTo(t+r,u-_/2),e.lineTo(c,u),e.lineTo(t+r,u+_/2),e.closePath()),e.closePath(),y?(e.shadowColor=a(h),e.shadowBlur=d,e.shadowOffsetX=f,e.shadowOffsetY=p,e.fill(),e.globalCompositeOperation="destination-out",e.shadowColor="rgba(0, 0, 0, 0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0,e.fill(),e.globalCompositeOperation="source-over",e.fillStyle=v,e.fill(),e.fillStyle=b,e.fill()):(e.globalCompositeOperation="source-over",e.fillStyle=v,e.fill(),e.fillStyle=b,e.fill()),e.globalCompositeOperation="source-over"}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=this&&this.__decorate||function(e,t,n,r){var i,a=arguments.length,s=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(a<3?i(s):a>3?i(t,n,s):i(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.StudentContextBase=void 0;var a=n(2),s=n(4),c=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state={viewDiv:"direction",directionON:!1,loading:!1,goodjob:!1,likeSet:{on:!1,id:""},likeSoundOff:!1,svg_bg:{view:!0,bPlay:!1,viewCharactor:!0}},this.actions={startGoodJob:function(){t.state.goodjob=!0},goodjobComplete:function(){t.state.goodjob=!1},setLoading:function(e){t.state.loading=e}},this.uploaded=function(e){},this.notify=function(e){},this.notifyRecorded=function(e){},this.notifyVideoRecord=function(e){}}var t,n,o;return t=e,(n=[{key:"_setViewDiv",value:function(e){this.state.viewDiv!==e&&(s.App.pub_stop(),"direction"===e?(this.state.directionON=!0,this.state.svg_bg.bPlay=!0,this.state.svg_bg.viewCharactor=!0):(this.state.directionON=!1,this.state.svg_bg.bPlay=!1,this.state.svg_bg.viewCharactor=!1),this.state.loading=!1,this.state.goodjob=!1,this.state.likeSet.on=!1,this.state.likeSet.id="",this.state.viewDiv=e)}},{key:"start",value:function(){}},{key:"receive",value:function(e){switch(e.type){case 1:"direction"===this.state.viewDiv?(this.state.directionON=!0,this.state.svg_bg.bPlay=!0,this.state.svg_bg.viewCharactor=!0):this._setViewDiv("direction");break;case 3:this.state.directionON=!1;break;case 0:this._setViewDiv("eyeon");break;case 12:var t=e.data;"content"===this.state.viewDiv&&(this.state.likeSet.on=t.on,this.state.likeSet.id=t.id),this.state.likeSoundOff=!1;break;case 17:this.state.likeSoundOff=!0;break;case 16:this.state.likeSoundOff=!1}}}])&&r(t.prototype,n),o&&r(t,o),e}();i([a.observable],c.prototype,"state",void 0),i([a.action],c.prototype,"_setViewDiv",null),i([a.action],c.prototype,"receive",null),t.StudentContextBase=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Loading=void 0;var r=n(0);t.Loading=function(e){var t=e.view,n={position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%",backgroundPosition:"50% 50%",backgroundRepeat:"no-repeat"};return n.backgroundImage='url("'.concat("/content/digenglish_lib/",'images/loading.svg")'),n.backgroundColor="rgba(0, 0, 0, 0.1)",n.zIndex=101,t||(n.visibility="hidden",n.zIndex=-1,n.pointerEvents="none"),r.createElement("div",{style:n})}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},p=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var d=n(0),h=n(1),_=n(2),m=n(5),y=n(4),v=n(6),b=n(7),g=n(41),w=n(49),x=n(52),E=n(58),O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,n,s,u=a(l);function l(){var e;return r(this,l),(e=u.apply(this,arguments))._img_pop_on=!1,e._stime=0,e._clickYes=function(){0===e._stime&&(e._stime=Date.now());var t=e.props.state;2===t.scriptProg&&(y.App.pub_playBtnTab(),t.qsMode="script",t.scriptProg=3,e._img_pop_on=!0,m.delay((function(){e._img_pop_on=!1}),2e3))},e._clickNo=function(){return p(c(e),void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.state,0===this._stime&&(this._stime=Date.now()),2===t.scriptProg){e.next=4;break}return e.abrupt("return");case 4:if(y.App.pub_playBtnTab(),t.scriptProg=5,y.App.student){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,b.wait(300);case 10:y.App.pub_playGoodjob(),this.props.actions.startGoodJob();case 12:case"end":return e.stop()}}),e,this)})))},e}return t=l,(n=[{key:"componentWillUpdate",value:function(e){}},{key:"render",value:function(){var e=this.props,t=e.view,n=e.state,r=e.actions,o=e.scriptProg,i=e.qsMode,a=n.confirmView,s=n.additionalView,c=n.dictationView,u={};return t||(u=Object.assign(Object.assign({},u),{opacity:0,zIndex:-1,pointerEvents:"none"})),d.createElement("div",{className:"s_content",style:u},d.createElement(w.default,{view:t&&o>0,scriptProg:o,qsMode:i,state:n,actions:r}),d.createElement(g.default,{view:t&&a,questionView:a,scriptProg:o,qsMode:i,state:n,actions:r}),d.createElement(x.default,{view:t&&s,questionView:s,scriptProg:o,qsMode:i,state:n,actions:r}),d.createElement(E.default,{view:t&&c,questionView:c,scriptProg:o,qsMode:i,state:n,actions:r}),d.createElement("div",{className:"img_pop"+(this._img_pop_on?" on":"")}),d.createElement("div",{className:"btn_box"+(2===o?" on":"")},d.createElement(v.ToggleBtn,{className:"btn_yes",onClick:this._clickYes,on:3===o}),d.createElement(v.ToggleBtn,{className:"btn_no",onClick:this._clickNo,on:5===o})))}}])&&o(t.prototype,n),s&&o(t,s),l}(d.Component);f([_.observable],O.prototype,"_img_pop_on",void 0),O=f([h.observer],O),t.default=O},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},h=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var _=n(0),m=n(1),y=n(2),v=n(4),b=n(12),g=n(6),w=n(7),x=n(14),E=n(42),O=n(45),S=n(46),P=(n(9).default,_.Component,function(e){a(n,e);var t=c(n);function n(e){var o;return r(this,n),(o=t.call(this,e))._curIdx=0,o._curIdx_tgt=0,o._choices={answer1:0,answer2:0,answer3:0},o._writings={answer1:"",answer2:"",answer3:""},o._felView=!1,o._style={},o._swiper=null,o._refSwiper=function(e){if(!o._swiper&&e){var t=e.swiper;t.on("transitionStart",(function(){o._curIdx=-1})),t.on("transitionEnd",(function(){o.props.view&&(o._curIdx=t.activeIndex,o._curIdx_tgt=o._curIdx)})),o._swiper=t}},o._onSend=function(){return h(l(o),void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r,o,i,a,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.state,r=t.actions,2===n.confirmSupProg||0!==n.idx){e.next=3;break}return e.abrupt("return");case 3:if(2===n.confirmBasicProg||1!==n.idx){e.next=5;break}return e.abrupt("return");case 5:if(2===n.confirmHardProg||2!==n.idx){e.next=7;break}return e.abrupt("return");case 7:if(v.App.pub_playToPad(),o=this._choices,i=this._writings,this._writings={answer1:"",answer2:"",answer3:""},this._choices={answer1:0,answer2:0,answer3:0},0!==n.idx){e.next=22;break}if(n.confirmSupProg=3,!v.App.student){e.next=20;break}return a={msgtype:"confirm_return",idx:0,id:v.App.student.id,returns:o},b.sendTeacher(11,a),e.next=19,w.wait(600);case 19:3===n.confirmSupProg&&(n.confirmSupProg=4,v.App.pub_playGoodjob(),r.startGoodJob());case 20:e.next=40;break;case 22:if(1!==n.idx){e.next=32;break}if(n.confirmBasicProg=3,!v.App.student){e.next=30;break}return s={msgtype:"confirm_return",idx:1,id:v.App.student.id,returns:o},b.sendTeacher(11,s),e.next=29,w.wait(600);case 29:3===n.confirmBasicProg&&(n.confirmBasicProg=4,v.App.pub_playGoodjob(),r.startGoodJob());case 30:e.next=40;break;case 32:if(2!==n.idx){e.next=40;break}if(n.confirmHardProg=3,!v.App.student){e.next=40;break}return c={msgtype:"confirm_return",idx:2,id:v.App.student.id,returns:i},b.sendTeacher(11,c),e.next=39,w.wait(600);case 39:3===n.confirmHardProg&&(n.confirmHardProg=4,v.App.pub_playGoodjob(),r.startGoodJob());case 40:return e.abrupt("return");case 41:case"end":return e.stop()}}),e,this)})))},o._onChoice=function(e,t){var n=o.props,r=n.state;n.actions;if((2===r.confirmSupProg||0!==r.idx)&&!(2!==r.confirmBasicProg&&1===r.idx||2!==r.confirmHardProg&&2===r.idx)){if(v.App.pub_playBtnTab(),0===r.idx)switch(e){case 0:o._choices.answer1=t;break;case 1:o._choices.answer2=t;break;case 2:o._choices.answer3=t;break;default:return}else if(1===r.idx)switch(e){case 0:o._choices.answer1=t;break;case 1:o._choices.answer2=t;break;case 2:o._choices.answer3=t;break;default:return}else if(2===r.idx)switch(e){case 0:o._writings.answer1=t;break;case 1:o._writings.answer2=t;break;case 2:o._writings.answer3=t;break;default:return}var i=0===o._choices.answer1||0===o._choices.answer2||0===o._choices.answer3,a=""===o._writings.answer1||""===o._writings.answer2||""===o._writings.answer3;i&&a?(o._felView=!1,console.log("choices"+o._choices.answer1+o._choices.answer2+o._choices.answer3),console.log("chocie false")):(o._felView=!0,console.log("chocie true"))}},o._gotoScript=function(){var e=o.props.state;"script"!==e.qsMode&&(v.App.pub_playBtnTab(),e.qsMode="script")},o}return i(n,[{key:"_setStyle",value:function(e){this._style.transition=e.questionView&&e.scriptProg>0?"left 0.3s":"",this._style.left=e.questionView&&"question"===e.qsMode?"0px":"1280px"}},{key:"componentWillMount",value:function(){this._setStyle(this.props)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.state,r=t.qsMode,o=t.scriptProg;e.state.confirmSupProg===n.confirmSupProg&&e.state.confirmBasicProg===n.confirmBasicProg&&e.state.confirmHardProg===n.confirmHardProg&&e.scriptProg===o&&e.qsMode===r||this._setStyle(e)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.state,r=t.view,o=t.qsMode;r&&!e.view?(this._curIdx=0,this._curIdx_tgt=0,this._felView=!1,this._swiper&&(this._swiper.slideTo(0,0),this._swiper.update()),(n.confirmSupProg<5&&0===n.idx||n.confirmBasicProg<5&&1===n.idx||n.confirmHardProg<5&&2===n.idx)&&(this._choices.answer1=0,this._choices.answer2=0,this._choices.answer3=0)):!r&&e.view&&(n.confirmSupProg<5&&0===n.idx||n.confirmBasicProg<5&&1===n.idx||n.confirmHardProg<5&&2===n.idx)&&(this._choices.answer1=0,this._choices.answer2=0,this._choices.answer3=0),"script"===o&&"question"===e.qsMode&&this._swiper&&this._swiper.slideTo(0)}},{key:"render",value:function(){var e=this.props,t=e.view,n=e.state,r=e.actions,o=r.getData(),i=o.confirm_nomal,a=2===n.confirmSupProg;return _.createElement("div",{className:"s_question",style:Object.assign({},this._style)},_.createElement(g.ToggleBtn,{className:"btn_SCRIPT",onClick:this._gotoScript,view:n.scriptProg>0}),_.createElement("div",{className:"question"},_.createElement("div",{className:"q-item"+(a?" swiper-no-swiping":"")},_.createElement(O.default,{view:t&&0===n.idx,idx:0,data:o.confirm_sup[0],confirmProg:n.confirmSupProg,onChoice:this._onChoice}),_.createElement(E.default,{view:t&&1===n.idx,idx:1,choice:0,data:i[0],confirmProg:n.confirmBasicProg,onChoice:this._onChoice}),_.createElement(S.default,{view:t&&2===n.idx,state:n,actions:r,idx:2,choice:0,data:o.confirm_hard[0],confirmProg:n.confirmHardProg,onChoice:this._onChoice}))),_.createElement(x.default,{view:t&&this._felView,type:"pad",sended:!1,originY:0,onSend:this._onSend}))}}]),n}(_.Component));d([y.observable],P.prototype,"_curIdx",void 0),d([y.observable],P.prototype,"_curIdx_tgt",void 0),d([y.observable],P.prototype,"_choices",void 0),d([y.observable],P.prototype,"_writings",void 0),d([y.observable],P.prototype,"_felView",void 0),P=d([m.observer],P),t.default=P},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),f=n(21),p=n(2),d=n(1),h=n(8),_=n(4),m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(c,e);var t,n,a,s=i(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e))._choices=[0,0,0],t._clicked_number=0,t.state={activeDrags:0,firstPosition:{x:500,y:400},secondPosition:{x:600,y:400},thirdPosition:{x:700,y:400}},t.onStart=function(){t.setState({activeDrags:++t.state.activeDrags})},t.onStop=function(){t.setState({activeDrags:--t.state.activeDrags})},t._ExclusiveGroup=function(e){for(var n=0;n<t._choices.length;n++)t._choices[n]===e&&(t._choices[n]=0)},t.handleStop=function(){var e=document.querySelector(".draggable_place");if(null!==e){var n=e.getBoundingClientRect(),r=n.x,o=n.y,i=document.querySelector("#skiing");if(null!==i){var a=i.getBoundingClientRect(),s=a.left-r,c=a.right-r,u=a.top-o,l=a.bottom-o,f=document.querySelector("#riding");if(null!==f){var p=f.getBoundingClientRect(),d=p.left-r,h=p.right-r,_=p.top-o,m=p.bottom-o,y=document.querySelector("#waterPark");if(null!==y){var v=y.getBoundingClientRect(),b=v.left-r,g=v.right-r,w=v.top-o,x=v.bottom-o,E=[t.state.firstPosition,t.state.secondPosition,t.state.thirdPosition];console.log(s+"< x <"+c+" "+u+"< y <"+l);for(var O=0;O<E.length;O++)E[O].x>=s&&E[O].x<=c&&E[O].y>=u&&E[O].y<=l&&(t._ExclusiveGroup(t._clicked_number),t._choices[0]=t._clicked_number,t.props.onChoice(0,t._clicked_number)),E[O].x>=d&&E[O].x<=h&&E[O].y>=_&&E[O].y<=m&&(t._ExclusiveGroup(t._clicked_number),t._choices[1]=t._clicked_number,t.props.onChoice(1,t._clicked_number)),E[O].x>=b&&E[O].x<=g&&E[O].y>=w&&E[O].y<=x&&(t._ExclusiveGroup(t._clicked_number),t._choices[2]=t._clicked_number,t.props.onChoice(2,t._clicked_number)),E[O].y=400;t.state.firstPosition.x=500,t.state.secondPosition.x=600,t.state.thirdPosition.x=700}}}}},t.handleDrag=function(e,n){if(console.log(e),1===t._clicked_number){var r=t.state.firstPosition,o=r.x,i=r.y;t.setState({firstPosition:{x:o+n.deltaX,y:i+n.deltaY}})}else if(2===t._clicked_number){var a=t.state.secondPosition,s=a.x,c=a.y;t.setState({secondPosition:{x:s+n.deltaX,y:c+n.deltaY}})}else if(3===t._clicked_number){var u=t.state.thirdPosition,l=u.x,f=u.y;t.setState({thirdPosition:{x:l+n.deltaX,y:f+n.deltaY}})}},t.selectNumber=function(e){console.log("select "+e),t._clicked_number=e},t._putNumber=function(e){return console.log(t._choices[e]),1===t._choices[e]?"1":2===t._choices[e]?"2":3===t._choices[e]?"3":""},t._clicked_number=0,t._sended=!1,t._view_answer=!1,t}return t=c,(n=[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.view,r=t.confirmProg;n&&!e.view?this._clicked_number=0:!this.props.view&&e.view&&(this._clicked_number=0,_.App.pub_stop()),4===r?this._sended=!0:5===r&&(this._sended=!0,this._view_answer=!0)}},{key:"render",value:function(){var e=this,t=this.props,n=t.view,r=t.data,o=t.confirmProg,i={onStart:this.onStart,onStop:this.onStop},a=["","",""],s=[r.item1.answer,r.item2.answer,r.item3.answer];return 5===o&&a.map((function(t,n){s[n]===e._choices[n]?a[n]="O":a[n]="X"})),l.createElement(l.Fragment,null,l.createElement("div",{className:"quiz_box",style:{display:n?"":"none"}},l.createElement("div",{className:"basic_place"},l.createElement("div",{className:"quiz"},l.createElement(h.default,{view:n},r.directive.kor)),l.createElement("div",{className:"draggable_place"},l.createElement("div",{className:"img_bundle"},l.createElement("div",null,l.createElement("img",{id:"skiing",className:"image",src:_.App.data_url+r.item1.img}),l.createElement("div",{className:"number_box "+a[0]},this._putNumber(0)),l.createElement("div",{className:"answer"+(this._view_answer?"":" hide")},r.item1.answer)),l.createElement("div",null,l.createElement("img",{id:"riding",className:"image",src:_.App.data_url+r.item2.img}),l.createElement("div",{className:"number_box "+a[1]},this._putNumber(1)),l.createElement("div",{className:"answer"+(this._view_answer?"":" hide")},r.item2.answer)),l.createElement("div",null,l.createElement("img",{id:"waterPark",className:"image",src:_.App.data_url+r.item3.img}),l.createElement("div",{className:"number_box "+a[2]},this._putNumber(2)),l.createElement("div",{className:"answer"+(this._view_answer?"":" hide")},r.item3.answer))),l.createElement(f.default,Object.assign({bounds:"parent"},i,{positionOffset:{x:0,y:0},position:{x:500,y:400},onStop:this.handleStop,onDrag:this.handleDrag,onMouseDown:function(){return e.selectNumber(1)}}),l.createElement("div",{className:"box"+(this._sended?" hide":"")},"1")),l.createElement(f.default,Object.assign({bounds:"parent"},i,{positionOffset:{x:0,y:0},position:{x:600,y:400},onStop:this.handleStop,onDrag:this.handleDrag,onMouseDown:function(){return e.selectNumber(2)}}),l.createElement("div",{className:"box"+(this._sended?" hide":"")},"2")),l.createElement(f.default,Object.assign({bounds:"parent"},i,{positionOffset:{x:0,y:0},position:{x:700,y:400},onStop:this.handleStop,onDrag:this.handleDrag,onMouseDown:function(){return e.selectNumber(3)}}),l.createElement("div",{className:"box"+(this._sended?" hide":"")},"3"))))))}}])&&r(t.prototype,n),a&&r(t,a),c}(l.Component);u([p.observable],m.prototype,"_choices",void 0),u([p.observable],m.prototype,"_clicked_number",void 0),u([p.observable],m.prototype,"_sended",void 0),u([p.observable],m.prototype,"_view_answer",void 0),m=u([d.observer],m),t.default=m},function(e,t,n){"use strict";var r=n(44);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),f=n(8),p=n(1),d=n(2),h=n(10),_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(c,e);var t,n,a,s=i(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e))._toggle=[0,0,0],t._onClickTrue=function(e){t._disable_toggle||(t._toggle[e]=1,t.props.onChoice(e,1))},t._onClickFalse=function(e){t._disable_toggle||(t._toggle[e]=2,t.props.onChoice(e,2))},t._getToggleState=function(e,n){if(5===t.props.confirmProg)switch(e){case 0:return 1===t._jsx_question1_answer?"O"===n?"on_true_t":"X"===n?"on_false_f":"on_true_t":"O"===n?"on_false_t":"X"===n?"on_true_f":"on_false_t";case 1:return 1===t._jsx_question2_answer?"O"===n?"on_true_t":"X"===n?"on_false_f":"on_true_t":"O"===n?"on_false_t":"X"===n?"on_true_f":"on_false_t";case 2:return 1===t._jsx_question3_answer?"O"===n?"on_true_t":"X"===n?"on_false_f":"on_true_t":"O"===n?"on_false_t":"X"===n?"on_true_f":"on_false_t"}return 0===t._toggle[e]?"":1===t._toggle[e]?"on_true":"on_false"},t.state={activeDrags:0,deltaPosition:{x:0,y:0},controlledPosition:{x:-400,y:200}},t.onStart=function(){t.setState({activeDrags:++t.state.activeDrags})},t.onStop=function(){t.setState({activeDrags:--t.state.activeDrags})},t._jsx_sentence=h._getJSX(e.data.directive.kor),t._jsx_eng_sentence=h._getJSX(e.data.directive.eng),t._jsx_question1=e.data.problem1,t._jsx_question2=e.data.problem2,t._jsx_question3=e.data.problem3,t._jsx_question1_answer=e.data.problem1.answer,t._jsx_question2_answer=e.data.problem2.answer,t._jsx_question3_answer=e.data.problem3.answer,t._answer_dic={1:!0,2:!1},t._disable_toggle=!1,t}return t=c,(n=[{key:"componentDidUpdate",value:function(){4===this.props.confirmProg&&(this._disable_toggle=!0)}},{key:"render",value:function(){var e=this,t=this.props,n=t.view,r=t.confirmProg,o=t.data,i=(this.onStart,this.onStop,["","",""]),a=[o.problem1.answer,o.problem2.answer,o.problem3.answer];return 5===r&&(console.log("complete"),i.map((function(t,n){a[n]===e._toggle[n]?i[n]="O":i[n]="X"})),this._disable_toggle=!0),l.createElement(l.Fragment,null,l.createElement("div",{className:"quiz_box",style:{display:n?"":"none"}},l.createElement("div",{className:"sup_question"},l.createElement("div",{className:"quiz"},l.createElement(f.default,{view:n},this._jsx_sentence)),l.createElement("div",null,l.createElement("div",{className:"white_box"},l.createElement("p",null,"1. ",this._jsx_question1.question),l.createElement("span",{className:i[0]}),l.createElement("div",{className:"toggle_bundle "+this._getToggleState(0,i[0])},l.createElement("div",{className:"true",onClick:function(){return e._onClickTrue(0)}}),l.createElement("div",{className:"false",onClick:function(){return e._onClickFalse(0)}}))),l.createElement("div",{className:"white_box"},l.createElement("p",null,"2. ",this._jsx_question2.question),l.createElement("span",{className:i[1]}),l.createElement("div",{className:"toggle_bundle "+this._getToggleState(1,i[1])},l.createElement("div",{className:"true",onClick:function(){return e._onClickTrue(1)}}),l.createElement("div",{className:"false",onClick:function(){return e._onClickFalse(1)}}))),l.createElement("div",{className:"white_box"},l.createElement("p",null,"3. ",this._jsx_question3.question),l.createElement("span",{className:i[2]}),l.createElement("div",{className:"toggle_bundle "+this._getToggleState(2,i[2])},l.createElement("div",{className:"true",onClick:function(){return e._onClickTrue(2)}}),l.createElement("div",{className:"false",onClick:function(){return e._onClickFalse(2)}})))))))}}])&&r(t.prototype,n),a&&r(t,a),c}(l.Component);u([d.observable],_.prototype,"_toggle",void 0),_=u([p.observer],_),t.default=_},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),f=n(8),p=n(11),d=n(15),h=n(16),_=n(1),m=n(2),y=n(10),v=n(9).default,b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(c,e);var t,n,a,s=i(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e))._tlen=0,t._curIdx=0,t._swiper=null,t._sended=!1,t._bndW=0,t._bndH=0,t._bndW_p=0,t._bndH_p=0,t._tarea=[null,null,null],t._stime=0,t._onChange=function(e){0===t._stime&&(t._stime=Date.now()),t.props.view&&(t.props.onChoice(t._curIdx,e),t._tlen=e.trim().length)},t._onDone=function(e){0===t._stime&&(t._stime=Date.now()),t.props.view&&(t._tlen=e.trim().length,p.state.state="on")},t._refCanvas=function(e){!t._canvas&&e&&(t._canvas=e,t._ctx=t._canvas.getContext("2d"))},t._refArea=[function(e){!t._tarea[0]&&e&&(t._tarea[0]=e)},function(e){!t._tarea[1]&&e&&(t._tarea[1]=e)},function(e){!t._tarea[2]&&e&&(t._tarea[2]=e)}],t._onResize=function(e,n){t._bndW=e,t._bndH=n},t._refSwiper=function(e){if(!t._swiper&&e){var n=e.swiper;n.on("transitionStart",(function(){t._curIdx=-1})),n.on("transitionEnd",(function(){t.props.view&&(t._curIdx=n.activeIndex)})),t._swiper=n}},t._jsx_sentence=y._getJSX(e.data.directive.kor),t._jsx_eng_sentence=y._getJSX(e.data.directive.eng),p.state.state="hide",t}return t=c,(n=[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.view,r=t.confirmProg;n&&!e.view?(this._bndH_p=0,this._bndW_p=0,this._tlen=0,p.state.state="on",this._stime=0,this._swiper&&(this._swiper.slideTo(0,0),this._swiper.update())):!n&&e.view&&(this._bndH_p=0,this._bndW_p=0,this._tlen=0,p.state.state="hide"),5===r&&e.confirmProg<5&&this._swiper&&this._swiper.slideTo(0),r>=4&&(this._sended=!0,p.state.state="hide")}},{key:"render",value:function(){var e=this,t=this.props,n=t.view,r=t.data,o=t.state,i="on"===p.state.state?" key-on":"",a=[r.problem1,r.problem2,r.problem3];return l.createElement(l.Fragment,null,l.createElement("div",{className:"quiz_box",style:{display:n?"":"none"}},l.createElement("div",{className:"hard_question"},l.createElement(v,{ref:this._refSwiper},a.map((function(t,r){return l.createElement("div",{key:r,className:"q-item"+i},l.createElement("div",{className:"quiz"},l.createElement(f.default,{view:n},e._jsx_sentence)),l.createElement("div",{className:"sentence_box"},l.createElement("canvas",null),l.createElement("div",{className:"question_box"},l.createElement("p",null,r+1,".",a[r].question),l.createElement("p",{className:o.hint?"":"no_hint"},o.hint?y._getBlockJSX(t.hint):""))),l.createElement("div",{className:"s_typing"},l.createElement("div",{className:"area-bnd"},l.createElement("canvas",{ref:e._refCanvas}),l.createElement(d.KTextArea,{ref:e._refArea[r],view:n,on:n&&e._curIdx===r&&!e._sended,autoResize:!0,skipEnter:!1,onChange:e._onChange,onDone:e._onDone,maxLength:60,maxLineNum:3,rows:1}),l.createElement(h.default,{handleWidth:!1,handleHeight:!0,onResize:e._onResize}))))}))),l.createElement(p.Keyboard,null))))}}])&&r(t.prototype,n),a&&r(t,a),c}(l.Component);u([m.observable],b.prototype,"_tlen",void 0),u([m.observable],b.prototype,"_curIdx",void 0),u([m.observable],b.prototype,"_swiper",void 0),u([m.observable],b.prototype,"_sended",void 0),b=u([_.observer],b),t.default=b},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},p=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var d=n(0),h=n(1),_=n(2),m=n(7),y=n(14),v=n(50),b=n(4),g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,n,s,u=a(l);function l(){var e;return r(this,l),(e=u.apply(this,arguments))._selected=[],e._stime=0,e._onTextClick=function(t,n){if(0===e._stime&&(e._stime=Date.now()),3===e.props.scriptProg){var r=e._selected.indexOf(t);r<0?e._selected.push(t):e._selected.splice(r,1)}},e._onSend=function(){return p(c(e),void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.actions,r=t.state,b.App.student&&3===r.scriptProg){e.next=3;break}return e.abrupt("return");case 3:return b.App.pub_playToPad(),r.scriptProg=4,e.next=7,m.wait(600);case 7:4===r.scriptProg&&(r.scriptProg=5,b.App.pub_playGoodjob(),n.startGoodJob());case 8:case"end":return e.stop()}}),e,this)})))},e}return t=l,(n=[{key:"componentWillReceiveProps",value:function(e){if(e.scriptProg!==this.props.scriptProg&&e.scriptProg<3){for(;this._selected.length>0;)this._selected.pop();this._stime=0}}},{key:"render",value:function(){var e=this.props,t=e.view,n=e.scriptProg,r=e.actions,o=e.state;return d.createElement("div",{className:"s_script "},d.createElement("div",{className:"script_container"},d.createElement(v.default,{view:"content"===o.viewDiv,role:r.getData().role_play,script:r.getData().scripts[0],idx:o.idx,focusIdx:o.focusIdx,selected:this._selected,qnaReturns:[],roll:o.roll,shadowing:o.shadowing,noSwiping:o.isPlay,viewClue:o.viewClue,viewScript:!0,viewTrans:!1,clickThumb:this._onTextClick,clickText:this._onTextClick})),d.createElement(y.default,{view:t&&(3===n||4===n)&&this._selected.length>0,type:"pad",sended:!1,originY:0,onSend:this._onSend}))}}])&&o(t.prototype,n),s&&o(t,s),l}(d.Component);f([_.observable],g.prototype,"_selected",void 0),g=f([h.observer],g),t.default=g},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var f=n(0),p=n(1),d=n(51),h=(n(9).default,function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(u,e);var t,n,s,c=a(u);function u(){var e;return r(this,u),(e=c.apply(this,arguments)).m_soption={direction:"vertical",observer:!0,slidesPerView:"auto",freeMode:!0,mousewheel:!0,noSwiping:!1,followFinger:!0,noSwipingClass:"swiper-no-swiping",scrollbar:{el:".swiper-scrollbar",draggable:!0,hide:!1}},e._refSwiper=function(t){!e.m_swiper&&t&&(e.m_swiper=t.swiper)},e}return t=u,(n=[{key:"scrollTo",value:function(e,t){this.m_swiper.slideTo(e-1<0?0:e-1,t)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.view,r=t.shadowing,o=t.noSwiping,i=t.focusIdx,a=t.viewTrans,s=t.roll;if(this.m_swiper){var c=!1;if(e.focusIdx!==i&&i>=0){var u=i-1;u<0&&(u=0),this.m_swiper.slideTo(u)}n!==e.view&&(c=!0,this.m_swiper.slideTo(0,0)),s!==e.roll&&""!==s&&(c=!0,this.m_swiper.slideTo(0)),r&&!e.shadowing&&(c=!0,this.m_swiper.slideTo(0)),o!==e.noSwiping&&(c=!0,this.m_soption.noSwiping=o,this.m_swiper.params.noSwiping=o,this.m_soption.followFinger=!o,this.m_swiper.params.followFinger=!o,this.m_soption.scrollbar&&(this.m_soption.scrollbar.draggable=!o),this.m_swiper.params.scrollbar&&(this.m_swiper.params.scrollbar.draggable=!o),o?(this.m_soption.noSwipingClass="swiper-wrapper",this.m_swiper.params.noSwipingClass="swiper-wrapper"):(this.m_soption.noSwipingClass="swiper-no-swiping",this.m_swiper.params.noSwipingClass="swiper-no-swiping"));var l=-1;a!==e.viewTrans&&(o||(l=this.m_swiper.activeIndex),c=!0),c&&this.props.view&&(this.m_swiper.update(),this.m_swiper.scrollbar&&this.m_swiper.scrollbar.updateSize(),l>=0&&this.m_swiper.slideTo(l,0))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.view,r=t.script,o=t.role,i=t.selected,a=t.roll,s=t.numRender,c=t.shadowing,u=t.viewClue,l=t.viewScript,p=t.viewTrans,h=t.qnaReturns,_=t.focusIdx,m=o.speakerA.image_s,y=o.speakerB.image_s,v=o.speakerC.image_s,b=o.speakerD.image_s,g=o.speakerE.image_s,w=["script_box"].join(" ");return f.createElement(f.Fragment,null,f.createElement("div",{className:"swiper-container"},r.map((function(t,r){var o;o="E"===t.roll?g:"D"===t.roll?b:"C"===t.roll?v:"B"===t.roll?y:m;var s=i.indexOf(r),x=r<h.length?h[r].num:0;return f.createElement("div",{className:w,key:"script_"+r},f.createElement(d.default,{view:n,script:t,image_s:o,idx:r,focus:r===_,selected:s>=0,numOfReturn:x,roll:t.roll,sroll:a,shadowing:c,clickThumb:e.props.clickThumb,clickText:e.props.clickText,qnaReturnsClick:e.props.qnaReturnsClick,compDiv:"DIALOGUE",viewClue:u,viewScript:l,viewTrans:p}))}))),f.createElement("div",{style:{display:"none"}},s))}}])&&o(t.prototype,n),s&&o(t,s),u}(f.Component));h=l([p.observer],h),t.default=h},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),f=n(2),p=n(1),d=n(16),h=n(4),_=n(6);function m(e,t,n,r){return{r:e,g:t,b:n,a:r}}function y(e){var t=e.r,n=e.g,r=e.b,o=e.a;return"rgba(".concat(t,", ").concat(n,", ").concat(r,", ").concat(o,")")}var v=m(255,250,23,1),b=m(0,0,0,.2),g=m(150,40,202,1),w=m(0,42,227,1),x=m(193,55,169,1),E=m(255,114,0,1),O=m(0,146,238,1),S=m(150,40,202,1),P=m(0,42,227,1),k=m(193,55,169,1),R=m(255,114,0,1),j=m(0,146,238,1),C={brdThick:4,bgColor:g,brdColor:v,shadowX:0,shadowY:0,shadowBlur:0,shadowColor:v},D={brdThick:4,bgColor:w,brdColor:v,shadowX:0,shadowY:0,shadowBlur:0,shadowColor:v},T={brdThick:4,bgColor:x,brdColor:v,shadowX:0,shadowY:0,shadowBlur:0,shadowColor:v},N={brdThick:4,bgColor:E,brdColor:v,shadowX:0,shadowY:0,shadowBlur:0,shadowColor:v},I={brdThick:4,bgColor:O,brdColor:v,shadowX:0,shadowY:0,shadowBlur:0,shadowColor:v},M=(m(255,255,255,1),m(0,0,0,.2),{brdThick:2,bgColor:b,brdColor:S,shadowX:2,shadowY:6,shadowBlur:10,shadowColor:m(0,0,0,.2)}),A={brdThick:2,bgColor:b,brdColor:P,shadowX:2,shadowY:6,shadowBlur:10,shadowColor:m(0,0,0,.2)},B={brdThick:2,bgColor:b,brdColor:k,shadowX:2,shadowY:6,shadowBlur:10,shadowColor:m(0,0,0,.2)},H={brdThick:2,bgColor:b,brdColor:R,shadowX:2,shadowY:6,shadowBlur:10,shadowColor:m(0,0,0,.2)},q={brdThick:2,bgColor:b,brdColor:j,shadowX:2,shadowY:6,shadowBlur:10,shadowColor:m(0,0,0,.2)},L=-1,z=Number.MIN_VALUE,V=Number.MIN_VALUE,F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(c,e);var t,n,a,s=i(c);function c(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e)).m_width=0,t.m_height=0,t.m_viewScript=!1,t._refCanvas=function(e){!t.m_ctx&&e&&(t.m_canvas=e,t.m_ctx=e.getContext("2d"),t._draw())},t._onResize=function(e,n){t.m_width===e&&t.m_height===n||t.m_ctx&&(t.m_width=e,t.m_height=n,t._draw())},t._onClickThumb=function(e){t.props.clickThumb(t.props.idx,t.props.script)},t._onTextDown=function(e){var n=e.target;n&&n.classList.contains("btn_student"),L=t.props.idx,z=e.clientX,V=e.clientY},t._onTextUp=function(e){var n=L===t.props.idx&&Math.abs(z-e.clientX)<30&&Math.abs(V-e.clientY)<30;L=-1,z=Number.MIN_VALUE,V=Number.MIN_VALUE,n&&t.props.clickText&&t.props.clickText(t.props.idx,t.props.script)},t._onTextCancel=function(e){L=-1,z=Number.MIN_VALUE,V=Number.MIN_VALUE};var n=e.script.dms_eng,r=(n=n.replace(/<\s*br\s*\/*\s*>/gi,"<br>")).split("<br>");return t.m_jsx=l.createElement(l.Fragment,null,r.map((function(e,t){var n=e.split(" ").map((function(e,n){return 0===n?l.createElement("span",{key:t+"_"+n,className:"block"},e):l.createElement(l.Fragment,{key:t+"_"+n},l.createElement("span",{className:"space"}," "),l.createElement("span",{className:"block"},e))}));return 0===t?n:l.createElement(l.Fragment,{key:t},l.createElement("br",null),n)}))),r=(n=(n=e.script.dms_kor).replace(/<\s*br\s*\/*\s*>/gi,"<br>")).split("<br>"),t.m_trans=l.createElement(l.Fragment,null,r.map((function(e,t){var n=e.split(" ").map((function(e,n){return 0===n?l.createElement("span",{key:t+"_"+n,className:"block"},e):l.createElement(l.Fragment,{key:t+"_"+n},l.createElement("span",{className:"space"}," "),l.createElement("span",{className:"block"},e))}));return 0===t?n:l.createElement(l.Fragment,{key:t},l.createElement("br",null),n)}))),t.m_clue=l.createElement(l.Fragment,null),t.m_prog=l.createElement(l.Fragment,null),t}return t=c,(n=[{key:"_draw",value:function(){var e=this.props,t=e.view,n=e.focus,r=e.selected,o=e.roll;if(e.compDiv,this.m_canvas&&0!==this.m_width&&0!==this.m_height&&(this.m_ctx.clearRect(0,0,this.m_canvas.width,this.m_canvas.height),this.m_canvas.width=this.m_width+15,this.m_canvas.height=this.m_height+20,t)){var i;n||r?"A"===o?(i=C).brdColor=S:"B"===o?(i=D).brdColor=P:"C"===o?(i=T).brdColor=k:"D"===o?(i=N).brdColor=R:(i=I).brdColor=j:i="A"===o?M:"B"===o?A:"C"===o?B:"D"===o?H:q;var a=10,s=12,c=38;s=16,a=20,c=58,function(e,t,n,r,o,i,a,s,c){var u=c.brdThick,l=c.brdColor,f=c.bgColor,p=c.shadowX,d=c.shadowY,h=c.shadowBlur,_=c.shadowColor,m=1.8*(t-i),v=(0!==p||0!==d||h>0)&&_.a>0,b=f.a;v&&b<1&&(f.a=1),e.lineWidth=u,e.lineCap="butt",e.lineJoin="miter",e.strokeStyle=y(l),e.fillStyle=y(f),e.beginPath(),e.moveTo(t+r,n+o-s),s>0&&e.arc(t+r-s,n+o-s,s,0,Math.PI/2),e.lineTo(t+s,n+o),s>0&&e.arc(t+s,n+o-s,s,Math.PI/2,Math.PI),e.lineTo(t,a+m/2),e.lineTo(i,a),e.lineTo(t,a-m/2),e.lineTo(t,n+s),s>0&&e.arc(t+s,n+s,s,Math.PI,3*Math.PI/2),e.lineTo(t+r-s,n),s>0&&e.arc(t+r-s,n+s,s,3*Math.PI/2,2*Math.PI),e.closePath(),v?(e.shadowColor=y(_),e.shadowBlur=h,e.shadowOffsetX=p,e.shadowOffsetY=d,e.fill(),b<1?(e.globalCompositeOperation="destination-out",e.shadowColor="rgba(0, 0, 0, 0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0,e.fill(),u>0&&e.stroke(),e.globalCompositeOperation="source-over",f.a=b,e.fillStyle=y(f),e.fill(),u>0&&e.stroke()):u>0&&(e.shadowColor="rgba(0, 0, 0, 0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0,e.stroke())):(e.fill(),u>0&&e.stroke()),e.globalCompositeOperation="source-over"}(this.m_ctx,s,10,this.m_width-s-1,this.m_height,2,c,a,i)}}},{key:"componentDidUpdate",value:function(e){this.props.focus===e.focus&&this.props.selected===e.selected&&this.props.view===e.view&&this.props.compDiv===e.compDiv&&this.props.viewTrans===e.viewTrans&&this.props.sroll===e.sroll&&this.props.shadowing===e.shadowing||(L=-1,z=Number.MIN_VALUE,V=Number.MIN_VALUE,this._draw()),this.m_viewScript=!0}},{key:"render",value:function(){var e=this.props,t=(e.script,e.roll),n=e.sroll,r=e.focus,o=(e.viewClue,e.viewTrans),i=e.shadowing,a=e.numOfReturn,s=["roll"+t];s.push("student"),this.props.selected&&s.push("focus"),this.m_viewScript||s.push("hide-script"),""!==n&&n===t&&(s.push("in-roll"),r&&s.push("on-roll")),r&&i&&s.push("shadowing");var c=o?this.m_trans:this.m_jsx,u=s.join(" ");return l.createElement(l.Fragment,null,l.createElement("div",{className:"thumb "+u,onClick:this._onClickThumb},l.createElement("div",{className:"progress"},this.m_prog),l.createElement("img",{className:"img_cls",src:h.App.data_url+this.props.image_s,draggable:!1}),l.createElement("div",{className:"img_cls"}),l.createElement("span",null)),l.createElement("div",{className:"ballon "+u,onPointerDown:this._onTextDown,onPointerUp:this._onTextUp,onPointerCancel:this._onTextCancel,onPointerLeave:this._onTextCancel},l.createElement("canvas",{ref:this._refCanvas}),l.createElement("span",{className:o?"view-trans":""},l.createElement("span",null,c),l.createElement("div",{className:"student-clue"},l.createElement(_.ToggleBtn,{className:"btn_student single",view:a>0},a),this.m_clue)),l.createElement(d.default,{handleHeight:!0,handleWidth:!0,onResize:this._onResize})))}}])&&r(t.prototype,n),a&&r(t,a),c}(l.Component);u([f.observable],F.prototype,"m_viewScript",void 0),F=u([p.observer],F),t.default=F},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},h=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var _=n(0),m=n(1),y=n(2),v=n(4),b=n(12),g=n(6),w=n(7),x=n(14),E=n(53),O=n(54),S=n(57),P=(_.Component,function(e){a(n,e);var t=c(n);function n(e){var o;r(this,n),(o=t.call(this,e))._curIdx=0,o._curIdx_tgt=0,o._choices=[],o._felView=!1,o._style={},o._swiper=null,o._refSwiper=function(e){if(!o._swiper&&e){var t=e.swiper;t.on("transitionStart",(function(){o._curIdx=-1})),t.on("transitionEnd",(function(){o.props.view&&(o._curIdx=t.activeIndex,o._curIdx_tgt=o._curIdx)})),o._swiper=t}},o._onSend=function(){return h(l(o),void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r,o,i,a,s,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.state,r=t.actions,2===n.additionalSupProg||0!==n.idx){e.next=3;break}return e.abrupt("return");case 3:if(2===n.additionalBasicProg||1!==n.idx){e.next=5;break}return e.abrupt("return");case 5:if(2===n.additionalHardProg||2!==n.idx){e.next=7;break}return e.abrupt("return");case 7:if(v.App.pub_playToPad(),o=this._choices,i=r.getData().additional_sup,0!==n.idx){e.next=20;break}if(n.additionalSupProg=3,!v.App.student){e.next=18;break}return a={msgtype:"additional_return",idx:0,id:v.App.student.id,returns:o},b.sendTeacher(11,a),e.next=17,w.wait(600);case 17:3===n.additionalSupProg&&(n.additionalSupProg=4,v.App.pub_playGoodjob(),r.startGoodJob());case 18:e.next=41;break;case 20:if(1!==n.idx){e.next=30;break}if(n.additionalBasicProg=3,!v.App.student){e.next=28;break}return s={msgtype:"additional_return",idx:1,id:v.App.student.id,returns:o},b.sendTeacher(11,s),e.next=27,w.wait(600);case 27:3===n.additionalBasicProg&&(n.additionalBasicProg=4,v.App.pub_playGoodjob(),r.startGoodJob());case 28:e.next=41;break;case 30:if(2!==n.idx){e.next=40;break}if(n.additionalHardProg=3,!v.App.student){e.next=38;break}return c={msgtype:"additional_return",idx:2,id:v.App.student.id,returns:o},b.sendTeacher(11,c),e.next=37,w.wait(600);case 37:3===n.additionalHardProg&&(n.additionalHardProg=4,v.App.pub_playGoodjob(),r.startGoodJob());case 38:e.next=41;break;case 40:return e.abrupt("return");case 41:for(u=0;u<i.length;u++)this._choices[u]={answer1:"",answer2:"",answer3:""};case 42:case"end":return e.stop()}}),e,this)})))},o._onChoice=function(e,t,n){var r=o.props,i=r.state,a=r.actions;if((2===i.additionalSupProg||0!==i.idx)&&!(2!==i.additionalBasicProg&&1===i.idx||2!==i.additionalHardProg&&2===i.idx)){switch(v.App.pub_playBtnTab(),n){case 0:o._choices[e].answer1=t;break;case 1:o._choices[e].answer2=t;break;case 2:o._choices[e].answer3=t;break;default:return}var s=a.getData(),c=!1;switch(i.idx){case 0:for(var u=0;u<o._choices.length;u++)if(""===o._choices[u].answer1||""===o._choices[u].answer2||""===o._choices[u].answer3){c=!0;break}break;case 1:for(var l=0;l<o._choices.length;l++)if(""===o._choices[l].answer1&&""!==s.additional_basic[l].sentence_answer1||""===o._choices[l].answer2&&""!==s.additional_basic[l].sentence_answer2||""===o._choices[l].answer3&&""!==s.additional_basic[l].sentence_answer3){c=!0;break}break;case 2:for(var f=0;f<o._choices.length;f++)if(""===o._choices[f].answer1||""===o._choices[f].answer2){c=!0;break}break;default:return}c?o._felView=!1:(o._felView=!0,console.log("chocie true"))}},o._gotoScript=function(){"script"!==o.props.state.qsMode&&(v.App.pub_playBtnTab(),o.props.state.qsMode="script")};for(var i=e.actions.getData().additional_sup,a=0;a<i.length;a++)o._choices[a]={answer1:"",answer2:"",answer3:""};return o}return i(n,[{key:"_setStyle",value:function(e){var t=e.questionView,n=e.scriptProg,r=e.qsMode;this._style.transition=t&&n>0?"left 0.3s":"",this._style.left=t&&"question"===r?"0px":"1280px"}},{key:"componentWillMount",value:function(){this._setStyle(this.props)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.state,r=t.scriptProg,o=t.qsMode;e.state.confirmSupProg===n.confirmSupProg&&e.state.confirmBasicProg===n.confirmBasicProg&&e.state.confirmHardProg===n.confirmHardProg&&e.scriptProg===r&&e.qsMode===o||this._setStyle(e)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.state,r=t.view,o=t.qsMode;if(r&&!e.view){if(this._curIdx=0,this._curIdx_tgt=0,this._felView=!1,this._swiper&&(this._swiper.slideTo(0,0),this._swiper.update()),n.confirmSupProg<5&&0===n.idx||n.confirmBasicProg<5&&1===n.idx||n.confirmHardProg<5&&2===n.idx)for(var i=0;i<this._choices.length;i++)this._choices[i].answer1="",this._choices[i].answer2="",this._choices[i].answer3=""}else if(!r&&e.view&&(n.confirmSupProg<5&&0===n.idx||n.confirmBasicProg<5&&1===n.idx||n.confirmHardProg<5&&2===n.idx))for(var a=0;a<this._choices.length;a++)this._choices[a].answer1="",this._choices[a].answer2="",this._choices[a].answer3="";"script"===o&&"question"===e.qsMode&&this._swiper&&this._swiper.slideTo(0)}},{key:"render",value:function(){var e=this.props,t=e.view,n=e.state,r=e.actions,o=r.getData(),i=2===n.confirmSupProg;return _.createElement("div",{className:"s_additional",style:Object.assign({},this._style)},_.createElement(g.ToggleBtn,{className:"btn_SCRIPT",onClick:this._gotoScript,view:n.scriptProg>0}),_.createElement("div",{className:"question"},_.createElement("div",{className:"q-item"+(i?" swiper-no-swiping":"")},_.createElement(O.default,{view:t&&0===n.idx,state:n,actions:r,idx:0,choice:0,data:o.additional_sup,prog:n.additionalSupProg,onChoice:this._onChoice}),_.createElement(E.default,{view:t&&1===n.idx,state:n,actions:r,idx:1,choice:0,data:o.additional_basic,prog:n.additionalBasicProg,onChoice:this._onChoice}),_.createElement(S.default,{view:t&&2===n.idx,state:n,actions:r,idx:1,choice:0,data:o.additional_hard,prog:n.additionalHardProg,onChoice:this._onChoice}))),_.createElement(x.default,{view:t&&this._felView,type:"pad",sended:!1,originY:0,onSend:this._onSend}))}}]),n}(_.Component));d([y.observable],P.prototype,"_curIdx",void 0),d([y.observable],P.prototype,"_curIdx_tgt",void 0),d([y.observable],P.prototype,"_choices",void 0),d([y.observable],P.prototype,"_felView",void 0),P=d([m.observer],P),t.default=P},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),f=n(8),p=n(11),d=n(15),h=n(1),_=n(2),m=n(10),y=n(9).default,v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(c,e);var t,n,a,s=i(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e))._tlen=0,t._curIdx=0,t._swiper=null,t._sended=!1,t._select_area=0,t._tarea=[[null,null,null],[null,null,null],[null,null,null]],t._refArea=[[]],t._onChange=function(e,n){t.props.view&&(t.props.onChoice(t._curIdx,e,n),t._tlen=e.trim().length)},t._onDone=function(e){t.props.view&&(t._tlen=e.trim().length,p.state.state="on")},t._selectArea=function(e){null!==e&&(t._select_area=e)},t._refSwiper=function(e){if(!t._swiper&&e){var n=e.swiper;n.on("transitionStart",(function(){t._curIdx=-1})),n.on("transitionEnd",(function(){t.props.view&&(t._curIdx=n.activeIndex)})),t._swiper=n}},t._jsx_sentence=m._getJSX(e.data[0].directive.kor),t._jsx_eng_sentence=m._getJSX(e.data[0].directive.eng),p.state.state="hide",e.data.map((function(e,n){t._refArea[n]=[];for(var r=function(e){t._refArea[n][e]=function(r){!t._tarea[n][e]&&r&&(t._tarea[n][e]=r)}},o=0;o<4;o++)r(o)})),t}return t=c,(n=[{key:"componentDidUpdate",value:function(e){this.props.view&&!e.view?(this._tlen=0,p.state.state="on",this._swiper&&(this._swiper.slideTo(0,0),console.log("swiper.update"),this._swiper.update())):!this.props.view&&e.view&&(this._tlen=0,p.state.state="hide"),5===this.props.prog&&e.prog<5&&this._swiper&&this._swiper.slideTo(0),this.props.prog>=4&&(this._sended=!0,p.state.state="hide")}},{key:"render",value:function(){var e=this,t=this.props,n=t.view,r=t.data,o=(t.state,t.prog,"on"===p.state.state?" key-on":""),i=["a","b","c"],a=["","",""],s=[["","",""],["","",""],["","",""]],c=0;return 5===this.props.prog&&this.props.data.map((function(t,n){var r=[t.sentence_answer1,t.sentence_answer2,t.sentence_answer3];c=0,r.map((function(t,o){var i;""===t&&(c-=1),t===(null===(i=e._tarea[n][o])||void 0===i?void 0:i.value)?(s[n][o]="O",c+=1):s[n][o]="X",a[n]=c===r.length?"O":"X"}))})),l.createElement(l.Fragment,null,l.createElement("div",{className:"quiz_box",style:{display:n?"":"none"}},l.createElement("div",{className:"basic_question"},l.createElement(y,{ref:this._refSwiper},r.map((function(t,r){var c=[t.sentence_answer1,t.sentence_answer2,t.sentence_answer3];return l.createElement("div",{key:r,className:"q-item"+o},l.createElement("div",{className:"quiz"},l.createElement(f.default,{view:n},e._jsx_sentence)),l.createElement("div",{className:"sentence_box"},l.createElement("div",{className:"OX_box "+a[r]}),l.createElement("canvas",null),l.createElement("div",{className:"question_box"},l.createElement("p",null,r+1,"."),l.createElement("p",null,m._getJSX(t.sentence))),l.createElement("div",null,l.createElement("div",{className:"blank_box",style:{borderBottom:""!==t.sentence_answer1?"":"none"}}),l.createElement("div",{className:"blank_box",style:{borderBottom:""!==t.sentence_answer2?"":"none"}}),l.createElement("div",{className:"blank_box",style:{borderBottom:""!==t.sentence_answer3?"":"none"}}))),l.createElement("div",{className:"s_typing"},c.map((function(t,o){if(""!==t)return l.createElement("div",{className:"area-bnd",key:o,onClick:function(){return e._selectArea(o)}},l.createElement("div",{className:"answer_box "+s[r][o]},t),l.createElement("span",{className:"index"},i[o],"."),l.createElement(d.KTextArea,{ref:e._refArea[r][o],view:n,on:n&&e._curIdx===r&&e._select_area===o&&!e._sended,autoResize:!0,skipEnter:!1,onChange:function(t){return e._onChange(t,o)},onDone:e._onDone,maxLength:60,maxLineNum:3,rows:1}))}))))}))),l.createElement(p.Keyboard,null))))}}])&&r(t.prototype,n),a&&r(t,a),c}(l.Component);u([_.observable],v.prototype,"_tlen",void 0),u([_.observable],v.prototype,"_curIdx",void 0),u([_.observable],v.prototype,"_swiper",void 0),u([_.observable],v.prototype,"_sended",void 0),u([_.observable],v.prototype,"_select_area",void 0),v=u([h.observer],v),t.default=v},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),f=n(8),p=n(11),d=n(55),h=n(1),_=n(2),m=n(10),y=n(9).default,v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(c,e);var t,n,a,s=i(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e))._tlen=0,t._curIdx=0,t._renderCnt=0,t._swiper=null,t._sended=!1,t._bndW=0,t._bndH=0,t._bndW_p=0,t._bndH_p=0,t._tarea=[null,null,null],t._stime=0,t._onDone=function(e){0===t._stime&&(t._stime=Date.now()),t.props.view&&(t._tlen=e.trim().length,p.state.state="on")},t._refCanvas=function(e){!t._canvas&&e&&(t._canvas=e,t._ctx=t._canvas.getContext("2d"))},t._refArea=[function(e){!t._tarea[0]&&e&&(t._tarea[0]=e)},function(e){!t._tarea[1]&&e&&(t._tarea[1]=e)},function(e){!t._tarea[2]&&e&&(t._tarea[2]=e)}],t._onResize=function(e,n){t._bndW=e,t._bndH=n},t._refSwiper=function(e){if(!t._swiper&&e){var n=e.swiper;n.on("transitionStart",(function(){t._curIdx=-1})),n.on("transitionEnd",(function(){t.props.view&&(t._curIdx=n.activeIndex)})),t._swiper=n}},t._jsx_sentence=m._getJSX(e.data[0].directive.kor),t._jsx_eng_sentence=m._getJSX(e.data[0].directive.eng),p.state.state="hide",t}return t=c,(n=[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.view,r=t.prog;n&&!e.view?(this._bndH_p=0,this._bndW_p=0,this._tlen=0,p.state.state="on",this._stime=0,this._swiper&&(this._swiper.slideTo(0,0),this._swiper.update())):!n&&e.view&&(this._bndH_p=0,this._bndW_p=0,this._tlen=0,p.state.state="hide"),5===r&&e.prog<5&&this._swiper&&this._swiper.slideTo(0),r>=4&&(this._sended=!0,p.state.state="hide")}},{key:"render",value:function(){var e=this,t=this.props,n=t.view,r=t.data,o=t.prog,i=t.onChoice,a=["","",""];return 5===o&&r.map((function(e,t){var n=0,r=[e.app_drops[0],e.app_drops[1],e.app_drops[2]];r.map((function(e,t){e.correct===e.inputed&&(n+=1)})),a[t]=n===r.length?"O":"X"})),l.createElement(l.Fragment,null,l.createElement("div",{className:"quiz_box",style:{display:n?"":"none"}},l.createElement("div",{className:"sup_question"},l.createElement(y,{ref:this._refSwiper},r.map((function(t,r){return l.createElement("div",{key:r,className:"table_box"},l.createElement("div",{className:"quiz"},l.createElement(f.default,{view:n},e._jsx_sentence)),l.createElement("div",{className:"OX_box "+a[r]}),l.createElement(d.default,{className:"type_3",viewCorrect:!1,disableSelect:5===o,viewResult:5===o,inview:n,graphic:t,maxWidth:1e3,renderCnt:e._renderCnt,optionBoxPosition:"bottom",viewBtn:!1,idx:r,onChoice:i}))}))))))}}])&&r(t.prototype,n),a&&r(t,a),c}(l.Component);u([_.observable],v.prototype,"_tlen",void 0),u([_.observable],v.prototype,"_curIdx",void 0),u([_.observable],v.prototype,"_renderCnt",void 0),u([_.observable],v.prototype,"_swiper",void 0),u([_.observable],v.prototype,"_sended",void 0),v=u([h.observer],v),t.default=v},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),f=n(2),p=n(1),d=n(5),h=n(6),_=n(56),m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(u,e);var t,n,s,c=i(u);function u(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=c.call(this,e)).m_view=!1,t._drop=!1,t.SELECT_KEY=0,t._sbox=[],t._totalNumOfSentnc=0,t._opt=!0,t._refSelect=function(e,n){t._sbox[n]||!e||n<0||(t._sbox[n]=e,t._initSBox())},t._onSelect=function(e,n){var r=t.props.graphic.app_drops;n<r.length&&r[n]&&(r[n].inputed=e),t.props.onChoice&&t.props.onChoice(t.props.idx,e,n),t.props.onChange&&t.props.onChange(e,n)},t._parseBlock=function(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"bottom",i=e.sentence,a=i.split("<br>"),s=0,c=l.createElement(l.Fragment,null,a.map((function(i,a){for(var c,u=new RegExp(/\{(.*?)\}/g),f=u.exec(i),p=0,d="",h=[];f;)f.index>p&&(d=i.substring(p,f.index),c=l.createElement("span",{key:t.SELECT_KEY++,dangerouslySetInnerHTML:{__html:d}}),h.push(c)),d=f[1],s<e.app_drops.length?(h.push(function(i){return l.createElement(_.default,{key:t.SELECT_KEY++,ref:function(e){return n(e,i)},text:d,correct:e.app_drops[i].correct,options:e.app_drops[i].choices,boxPositon:o,onChange:function(e){return r(e,i)},idx:t.props.idx,className:t.props.className,totalStncNum:t._totalNumOfSentnc,sentncNum:i,isStudent:!1})}(s)),s++):h.push(d),p=u.lastIndex,f=u.exec(i);var m="";return p<i.length&&((d=i.substring(p)).indexOf("_add_")>=0?(m="add",c=l.createElement("span",{key:t.SELECT_KEY++,dangerouslySetInnerHTML:{__html:d.split("_add_")[1]}})):c=l.createElement("span",{key:t.SELECT_KEY++,dangerouslySetInnerHTML:{__html:d}}),h.push(c)),l.createElement("li",{key:a,className:m},l.createElement("div",null,h))})));return c},t._refSwiper=function(e){!t.m_swiper&&e&&(t.m_swiper=e.swiper)};for(var n=e.graphic,r=n.sentence1,o=n.sentence2,i=n.sentence3,s=n.sentence4,f=[r.answer,o.answer,i.answer,s.answer],p=0;p<f.length;p++){if(void 0===f[p]||0===f[p])return a(t);t._totalNumOfSentnc++}return t}return t=u,(n=[{key:"componentDidMount",value:function(){for(;this._sbox.length>0;)this._sbox.pop();console.log("DidMount"),this._jsx=this._parseBlock(this.props.graphic,this._refSelect,this._onSelect,this.props.optionBoxPosition)}},{key:"componentWillReceiveProps",value:function(e){if(e.graphic!==this.props.graphic){for(;this._sbox.length>0;)this._sbox.pop();this._jsx=this._parseBlock(e.graphic,this._refSelect,this._onSelect,this.props.optionBoxPosition)}}},{key:"_initSBox",value:function(){var e=this.props,t=e.graphic,n=e.disableSelect,r=e.viewResult,o=e.viewCorrect;this._sbox.forEach((function(e,i){e&&(e.clear(),i<t.app_drops.length&&t.app_drops[i]&&e.setValue(t.app_drops[i].inputed),e.setDisableSelect(!0===n),e.setViewResult(!0===r),e.setViewCorrect(!0===o))}))}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props,r=n.inview,o=n.renderCnt,i=n.disableSelect,a=n.viewResult,s=n.viewCorrect;r&&!e.inview&&this.m_swiper&&(this.m_swiper.slideTo(0,0),d.delay((function(){t.m_swiper&&(t.m_swiper.update(),t.m_swiper.scrollbar&&t.m_swiper.scrollbar.updateSize(),t.m_swiper.wrapperEl.children[0].clientHeight<=t.m_swiper.height?t._opt=!0:t._opt=!1)}),100)),r&&!e.inview&&this._initSBox(),o!==e.renderCnt&&this._initSBox(),i!==e.disableSelect&&this._sbox.forEach((function(e,t){e&&e.setDisableSelect(!0===i)})),a!==e.viewResult&&this._sbox.forEach((function(e,t){e&&e.setViewResult(!0===a)})),s!==e.viewCorrect&&this._sbox.forEach((function(e,t){e&&e.setViewCorrect(!0===s)}))}},{key:"render",value:function(){return this._cont=l.createElement("div",{className:"content-box"},l.createElement("p",null,this.props.idx+1),l.createElement("div",null,l.createElement("ul",{className:"content"},this._jsx))),l.createElement("div",{className:"table-item "+this.props.className,style:{maxWidth:this.props.maxWidth+"px",zIndex:100-this.props.idx}},this._cont,l.createElement(h.ToggleBtn,{className:"table-item-btn",view:!0===this.props.viewBtn,onClick:this.props.onClickBtn}))}}])&&r(t.prototype,n),s&&r(t,s),u}(l.Component);u([f.observable],m.prototype,"m_view",void 0),u([f.observable],m.prototype,"_opt",void 0),m=u([p.inject(),p.observer],m),t.default=m},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":f(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var d=n(0),h=n(5),_=n(2),m=n(1),y=n(6),v=n(4),b=function(e){a(n,e);var t=c(n);function n(){var e;return r(this,n),(e=t.apply(this,arguments))._onClick=function(){e.props.onClick(e.props.text),v.App.pub_playBtnTab()},e}return i(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.text;e.onClick;return d.createElement("div",{className:t,onClick:this._onClick},n)}}]),n}(d.Component),g=2,w=_.observable([0]),x=function(e){a(n,e);var t=c(n);function n(e){var o;return r(this,n),(o=t.call(this,e))._value="",o._on=!1,o._disableSelect=!1,o._viewResult=!1,o._viewCorrect=!1,o._zidx=2,o._onSelect=function(e){o._on&&(o._on=!1,o._disableSelect||(o._value=e,o.props.onChange(e)))},o._toggle=function(){if(v.App.pub_playBtnTab(),o._box){var e=o._box.querySelector(".options-box"),t=o._box.querySelector(".options-box.on");if(e){for(var n=o._box.getBoundingClientRect(),r=o._box.parentElement,i=o.props.className.startsWith("type_6")?"swiper-container":"table-item";r&&!r.className.startsWith(i);)r=r.parentElement;n.bottom,r.getBoundingClientRect().bottom,e.offsetHeight;o._boxPositon="bottom"}else o._boxPositon=o.props.boxPositon;if(o._on&&t)o._zidx=2,o._on=!1;else{var a=document.querySelectorAll(".select-box");if(a)for(var s=0;s<a.length;s++){var c=a[s].querySelector(".btn-drop"),u=a[s].querySelector(".options-box");c&&c.classList.remove("on"),u&&u.classList.remove("on")}o._on?(o._on=!1,h.delay((function(){o._zidx=g++,o._on=!0}),10)):(o._zidx=g++,o._on=!0)}o.props.idx&&o.props.idx>=0&&(w[0]=o.props.idx)}},o._refBox=function(e){!o._box&&e&&(o._box=e)},o._boxDown=function(e){e&&o._mouseDown(e.nativeEvent)},o._mouseDown=function(e){e&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),o._toggle())},o._boxPositon=e.boxPositon,o}return i(n,[{key:"off",value:function(){v.App.pub_playBtnTab(),this._on=!1}},{key:"clear",value:function(){this._zidx=2,this._value="",this._disableSelect=!1,this._viewResult=!1,this._viewCorrect=!1,this._on=!1}},{key:"setValue",value:function(e){for(var t="",n=0;n<this.props.options.length;n++)if(this.props.options[n]===e){t=e;break}this._value=t}},{key:"setDisableSelect",value:function(e){this._disableSelect=e}},{key:"setViewResult",value:function(e){this._viewResult=e,e&&(this._on=!1)}},{key:"setViewCorrect",value:function(e){e&&(this._value=this.props.correct),this._viewCorrect=e,this._on=!1}},{key:"render",value:function(){var e=this,t=this.props,n=(t.text,t.correct),r=t.options,o=(t.boxPositon,this._value),i="";this._viewCorrect?o=n:this._viewResult&&(i=this._value===n?"correct":"wrong");var a=!1;return a="wrong"===i,d.createElement(d.Fragment,null,d.createElement("span",{className:"answer",style:{display:a?"":"none"}},n),d.createElement("div",{className:"select-box",ref:this._refBox},d.createElement("div",{className:"text-box "+i,onPointerDown:this._boxDown},d.createElement("div",{className:"size-box"},r.map((function(e,t){return d.createElement("div",{key:t},e)}))),o),d.createElement(y.ToggleBtn,{className:"btn-drop",on:this._on,onMouseDown:this._mouseDown}),d.createElement("div",{className:"options-box "+this._boxPositon+(this._on?" on":""),style:{zIndex:this._zidx}},r.map((function(t,r){var o="";return e._viewResult?o=t===n?"correct":t===e._value?"on":"wrong":t===e._value&&(o="on"),d.createElement(b,{key:r,className:o,text:t,onClick:e._onSelect})})))))}}]),n}(d.Component);p([_.observable],x.prototype,"_value",void 0),p([_.observable],x.prototype,"_on",void 0),p([_.observable],x.prototype,"_viewResult",void 0),p([_.observable],x.prototype,"_viewCorrect",void 0),x=p([m.observer],x),t.default=x},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),f=n(8),p=n(11),d=n(15),h=n(1),_=n(2),m=n(10),y=n(9).default,v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(c,e);var t,n,a,s=i(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e))._tlen=0,t._curIdx=0,t._swiper=null,t._sended=!1,t._select_area=0,t._bndW=0,t._bndH=0,t._bndW_p=0,t._bndH_p=0,t._stime=0,t._tarea=[[null,null],[null,null],[null,null]],t._refArea=[],t._onChange=function(e,n){t.props.view&&(t.props.onChoice(t._curIdx,e,n),t._tlen=e.trim().length)},t._onDone=function(e){0===t._stime&&(t._stime=Date.now()),t.props.view&&(t._tlen=e.trim().length,p.state.state="on")},t._selectArea=function(e){null!=e&&(t._select_area=e)},t._refCanvas=function(e){!t._canvas&&e&&(t._canvas=e,t._ctx=t._canvas.getContext("2d"))},t._onResize=function(e,n){t._bndW=e,t._bndH=n},t._refSwiper=function(e){if(!t._swiper&&e){var n=e.swiper;n.on("transitionStart",(function(){t._curIdx=-1})),n.on("transitionEnd",(function(){t.props.view&&(t._curIdx=n.activeIndex)})),t._swiper=n}},t._jsx_sentence=m._getJSX(e.data[0].directive.kor),t._jsx_eng_sentence=m._getJSX(e.data[0].directive.eng),p.state.state="hide",t._tarea.map((function(e,n){t._refArea[n]=[];for(var r=function(r){t._refArea[n][r]=function(t){!e[r]&&t&&(e[r]=t)}},o=0;o<2;o++)r(o)})),t}return t=c,(n=[{key:"componentDidUpdate",value:function(e){this.props.view&&!e.view?(this._bndH_p=0,this._bndW_p=0,this._tlen=0,p.state.state="on",this._stime=0,this._swiper&&(this._swiper.slideTo(0,0),this._swiper.update())):!this.props.view&&e.view&&(this._bndH_p=0,this._bndW_p=0,this._tlen=0,p.state.state="hide"),5===this.props.prog&&e.prog<5&&this._swiper&&this._swiper.slideTo(0),this.props.prog>=4&&(this._sended=!0,p.state.state="hide")}},{key:"render",value:function(){var e=this,t=this.props,n=t.view,r=t.data,o=t.prog,i="on"===p.state.state?" key-on":"",a=["","",""],s=[["",""],["",""],["",""]];return 5===o&&r.map((function(t,n){var r,o,i=[t.sentence1.answer1,t.sentence1.answer2];s[n][0]=i[0]===(null===(r=e._tarea[n][0])||void 0===r?void 0:r.value)?"O":"X",s[n][1]=i[1]===(null===(o=e._tarea[n][1])||void 0===o?void 0:o.value)?"O":"X",a[n]="O"===s[n][0]&&"O"===s[n][1]?"O":"X"})),l.createElement(l.Fragment,null,l.createElement("div",{className:"quiz_box",style:{display:n?"":"none"}},l.createElement("div",{className:"hard_question"},l.createElement(y,{ref:this._refSwiper},r.map((function(t,r){return l.createElement("div",{key:r,className:"q-item"+i},l.createElement("div",{className:"quiz"},l.createElement(f.default,{view:n},e._jsx_sentence)),l.createElement("div",{className:"sentence_box"},l.createElement("div",{className:"OX_box "+a[r]}),l.createElement("canvas",null),l.createElement("div",{className:"question_box"},l.createElement("p",null,r+1,"."),l.createElement("p",null,m._getJSX(t.sentence)))),l.createElement("div",{className:"s_typing"},l.createElement("div",{className:"area-bnd",onClick:function(){return e._selectArea(0)}},l.createElement("div",{className:"answer_box "+s[r][0]},t.sentence1.answer1),l.createElement(d.KTextArea,{ref:e._refArea[r][0],view:n,on:n&&e._curIdx===r&&0===e._select_area&&!e._sended,autoResize:!0,skipEnter:!1,onChange:function(t){return e._onChange(t,0)},onDone:e._onDone,maxLength:60,maxLineNum:3,rows:1}))," → ",l.createElement("div",{className:"area-bnd",onClick:function(){return e._selectArea(1)}},l.createElement("div",{className:"answer_box "+s[r][1]},t.sentence1.answer2),l.createElement(d.KTextArea,{ref:e._refArea[r][1],view:n,on:n&&e._curIdx===r&&1===e._select_area&&!e._sended,autoResize:!0,skipEnter:!1,onChange:function(t){return e._onChange(t,1)},onDone:e._onDone,maxLength:60,maxLineNum:3,rows:1}))))}))),l.createElement(p.Keyboard,null))))}}])&&r(t.prototype,n),a&&r(t,a),c}(l.Component);u([_.observable],v.prototype,"_tlen",void 0),u([_.observable],v.prototype,"_curIdx",void 0),u([_.observable],v.prototype,"_swiper",void 0),u([_.observable],v.prototype,"_sended",void 0),u([_.observable],v.prototype,"_select_area",void 0),v=u([h.observer],v),t.default=v},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},h=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var _=n(0),m=n(1),y=n(2),v=n(4),b=n(12),g=n(6),w=n(7),x=n(14),E=n(59),O=(_.Component,function(e){a(n,e);var t=c(n);function n(e){var o;r(this,n),(o=t.call(this,e))._curIdx=0,o._curIdx_tgt=0,o._choices=[],o._felView=!1,o._style={},o._swiper=null,o._refSwiper=function(e){if(!o._swiper&&e){var t=e.swiper;t.on("transitionStart",(function(){o._curIdx=-1})),t.on("transitionEnd",(function(){o.props.view&&(o._curIdx=t.activeIndex,o._curIdx_tgt=o._curIdx)})),o._swiper=t}},o._onSend=function(){return h(l(o),void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r,o,i,a,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.state,r=t.actions,2===n.dictationProg[n.idx]||0!==n.idx){e.next=3;break}return e.abrupt("return");case 3:if(v.App.pub_playToPad(),o=this._choices,i=r.getData(),a=[i.dictation_sup,i.dictation_basic,i.dictation_hard],n.dictationProg[n.idx]=3,!v.App.student){e.next=14;break}return s={msgtype:"dictation_return",idx:n.idx,id:v.App.student.id,returns:o},b.sendTeacher(11,s),e.next=13,w.wait(600);case 13:3===n.dictationProg[n.idx]&&(n.dictationProg[n.idx]=4,v.App.pub_playGoodjob(),r.startGoodJob());case 14:for(c=0;c<a[n.idx].length;c++)this._choices[c]={answer1:"",answer2:"",answer3:""};case 15:case"end":return e.stop()}}),e,this)})))},o._onChoice=function(e,t,n){var r=o.props,i=r.state,a=r.actions;if(2===i.dictationProg[o.props.state.idx]||0!==i.idx){switch(v.App.pub_playBtnTab(),n){case 0:o._choices[e].answer1=t;break;case 1:o._choices[e].answer2=t;break;case 2:o._choices[e].answer3=t;break;default:return}for(var s=a.getData(),c=[s.dictation_sup,s.dictation_basic,s.dictation_hard],u=!1,l=0;l<o._choices.length;l++)if(""===o._choices[l].answer1&&""!==c[i.idx][l].sentence1.answer1||""===o._choices[l].answer2&&""!==c[i.idx][l].sentence2.answer1||""===o._choices[l].answer3&&""!==c[i.idx][l].sentence3.answer1){u=!0;break}u?(o._felView=!1,console.log("chocie false")):(o._felView=!0,console.log("chocie true"))}},o._gotoScript=function(){var e=o.props.state;"script"!==e.qsMode&&(v.App.pub_playBtnTab(),e.qsMode="script")};for(var i=0;i<3;i++)o._choices[i]={answer1:"",answer2:"",answer3:""};return o}return i(n,[{key:"_setStyle",value:function(e){var t=e.questionView,n=e.scriptProg,r=e.qsMode;this._style.transition=t&&n>0?"left 0.3s":"",this._style.left=t&&"question"===r?"0px":"1280px"}},{key:"componentWillMount",value:function(){this._setStyle(this.props)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.state,r=t.scriptProg,o=t.qsMode;e.state.dictationProg[n.idx]===n.dictationProg[n.idx]&&e.scriptProg===r&&e.qsMode===o||this._setStyle(e)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.view,r=t.state,o=t.qsMode;if(n&&!e.view){if(this._curIdx=0,this._curIdx_tgt=0,this._felView=!1,this._swiper&&(this._swiper.slideTo(0,0),this._swiper.update()),r.dictationProg[r.idx]<5)for(var i=0;i<this._choices.length;i++)this._choices[i].answer1="",this._choices[i].answer2="",this._choices[i].answer3=""}else if(!n&&e.view&&r.dictationProg[r.idx]<5)for(var a=0;a<this._choices.length;a++)this._choices[a].answer1="",this._choices[a].answer2="",this._choices[a].answer3="";"script"===o&&"question"===e.qsMode&&this._swiper&&this._swiper.slideTo(0)}},{key:"render",value:function(){var e=this,t=this.props,n=t.view,r=t.state,o=t.actions,i=o.getData(),a=[i.dictation_sup,i.dictation_basic,i.dictation_hard],s=2===r.confirmSupProg;return _.createElement("div",{className:"s_dictation",style:Object.assign({},this._style)},_.createElement(g.ToggleBtn,{className:"btn_SCRIPT",onClick:this._gotoScript,view:r.scriptProg>0}),_.createElement("div",{className:"question"},_.createElement("div",{className:"q-item"+(s?" swiper-no-swiping":"")},a.map((function(t,i){return _.createElement(E.default,{key:i,view:n&&r.idx===i,state:r,actions:o,idx:i,choice:0,data:t,dictationProg:r.dictationProg[i],onChoice:e._onChoice})})))),_.createElement(x.default,{view:n&&this._felView,type:"pad",sended:!1,originY:0,onSend:this._onSend}))}}]),n}(_.Component));d([y.observable],O.prototype,"_curIdx",void 0),d([y.observable],O.prototype,"_curIdx_tgt",void 0),d([y.observable],O.prototype,"_choices",void 0),d([y.observable],O.prototype,"_felView",void 0),O=d([m.observer],O),t.default=O},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),f=n(8),p=n(11),d=n(15),h=n(1),_=n(2),m=n(10),y=n(9).default,v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(c,e);var t,n,a,s=i(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this,e))._tlen=0,t._curIdx=0,t._swiper=null,t._sended=!1,t._select_area=0,t._tarea=[[null,null,null],[null,null,null],[null,null,null]],t._refArea=[],t._onChange=function(e,n){t.props.view&&(t.props.onChoice(t._curIdx,e,n),t._tlen=e.trim().length)},t._onDone=function(e){t.props.view&&(t._tlen=e.trim().length,p.state.state="on")},t._refSwiper=function(e){if(!t._swiper&&e){var n=e.swiper;n.on("transitionStart",(function(){t._curIdx=-1})),n.on("transitionEnd",(function(){t.props.view&&(t._curIdx=n.activeIndex)})),t._swiper=n}},t._selectArea=function(e){null!==e&&(t._select_area=e)},t._jsx_sentence=m._getJSX(e.data[0].directive.kor),t._jsx_eng_sentence=m._getJSX(e.data[0].directive.eng),p.state.state="hide",e.data.map((function(e,n){t._refArea[n]=[];for(var r=function(e){t._refArea[n][e]=function(r){!t._tarea[n][e]&&r&&(t._tarea[n][e]=r)}},o=0;o<4;o++)r(o)})),t}return t=c,(n=[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.view,r=t.dictationProg;n&&!e.view?(this._tlen=0,p.state.state="on",this._swiper&&(this._swiper.slideTo(0,0),this._swiper.update(),console.log("swiper.update"))):!n&&e.view&&(this._tlen=0,p.state.state="hide"),5===r&&e.dictationProg<5&&this._swiper&&this._swiper.slideTo(0),this.props.dictationProg>=4&&(this._sended=!0,p.state.state="hide")}},{key:"render",value:function(){var e=this,t=this.props,n=t.view,r=t.data,o=t.dictationProg,i="on"===p.state.state?" key-on":"",a=["a","b","c"],s=["","",""],c=[["","",""],["","",""],["","",""]],u=0;return 5===o&&r.map((function(t,n){var r=[t.sentence1.answer1,t.sentence2.answer1,t.sentence3.answer1];r.map((function(t,o){var i;""===t&&(u-=1),t===(null===(i=e._tarea[n][o])||void 0===i?void 0:i.value)?(c[n][o]="O",u+=1):c[n][o]="X",s[n]=u===r.length?"O":"X"}))})),l.createElement(l.Fragment,null,l.createElement("div",{className:"quiz_box",style:{display:n?"":"none"}},l.createElement("div",{className:"dict_question"},l.createElement(y,{ref:this._refSwiper},r.map((function(t,r){var o=[t.sentence1,t.sentence2,t.sentence3];return l.createElement("div",{key:r,className:"q-item"+i},l.createElement("div",{className:"quiz"},l.createElement(f.default,{view:n},e._jsx_sentence)),l.createElement("div",{className:"sentence_box"},l.createElement("div",{className:"OX_box "+s[r]}),l.createElement("canvas",null),l.createElement("div",{className:"question_box"},l.createElement("p",null,m._getJSX(t.sentence)))),l.createElement("div",{className:"s_typing"},o.map((function(t,o){if(""!==t.answer1)return l.createElement("div",{className:"area-bnd",key:o,onClick:function(){return e._selectArea(o)}},l.createElement("div",{className:"answer_box "+c[r][o]},t.answer1),l.createElement("span",{className:"index"},a[o],"."),l.createElement(d.KTextArea,{ref:e._refArea[r][o],view:n,on:n&&e._curIdx===r&&e._select_area===o&&!e._sended,autoResize:!0,skipEnter:!1,onChange:function(t){return e._onChange(t,o)},onDone:e._onDone,maxLength:60,maxLineNum:3,rows:1}))}))))}))),l.createElement(p.Keyboard,null))))}}])&&r(t.prototype,n),a&&r(t,a),c}(l.Component);u([_.observable],v.prototype,"_tlen",void 0),u([_.observable],v.prototype,"_curIdx",void 0),u([_.observable],v.prototype,"_swiper",void 0),u([_.observable],v.prototype,"_sended",void 0),u([_.observable],v.prototype,"_select_area",void 0),v=u([h.observer],v),t.default=v},function(e,t,n){},function(e,t,n){},function(e,t,n){}]);