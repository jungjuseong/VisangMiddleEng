!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=13)}([function(t,e){t.exports=React},function(t,e){t.exports=mobx},function(t,e){t.exports=mobxReact},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(e,"__esModule",{value:!0}),e.App=void 0;var o=n(8),r=n(6);function a(t){if(!t)return t;t.displayMode=""+t.displayMode=="2"?"2":"1";var e=t.thumb?t.thumb:"";return(e.startsWith("static/")||""===e)&&(e=e.endsWith("w.jpg")?"".concat("/content/digenglish_lib/","/images/default_member_w.jpg"):"".concat("/content/digenglish_lib/","/images/default_member_m.jpg")),t.thumb=e,t}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,s;return e=t,s=[{key:"pub_init",value:function(){var e=navigator.userAgent;t._isMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e)||/android/i.test(e),t._tempBnd=document.createElement("div"),t._tempBnd.style.display="none",t._tempEl=document.createElement("div"),t._tempBnd.appendChild(t._tempEl),null===document.body?document.addEventListener("DOMContentLoaded",(function(e){document.body.appendChild(t._tempBnd)})):document.body.appendChild(t._tempBnd)}},{key:"pub_load",value:function(e,n,i,o,r,s){t._lesson=o,t._book=i,t._nextBook=r,t._prevBook=s,t._students=[],e&&e.forEach((function(e,n){t._students[n]=a(e)})),t._student=a(n)}},{key:"pub_reloadStudents",value:function(e){r.getStudents((function(n,i){for(;t._students.length>0;)t._students.pop();for(;t._students_inited.length>0;)t._students_inited.pop();for(var o=0,r=n.length;o<r;o++)t.isDvlp?t._students[o]=a(n[o]):t._students[o]=a({id:n[o].id,name:n[o].name,thumb:n[o].defaultThumbnail,avatar:n[o].profileThumbnail,nickname:n[o].nickName,displayMode:n[o].displayMode,inited:!0}),t._students_inited.push(n[o].id);e()}))}},{key:"pub_parseStyle",value:function(e){return t._tempEl.style.cssText=e,t._tempEl.style}},{key:"pub_initAudio",value:function(){t._common_audio=document.getElementById("common_audio"),t._ding_audio=document.getElementById("ding_audio"),t._dingend_audio=document.getElementById("dingend_audio"),t._btn_audio=document.getElementById("btn_audio"),t._correct_audio=document.getElementById("correct_audio"),t._wrong_audio=document.getElementById("wrong_audio"),t._topad_audio=document.getElementById("topad_audio"),t._goodjob_audio=document.getElementById("goodjob_audio"),t._btn_back_audio=document.getElementById("btn_back_audio"),t._btn_page_audio=document.getElementById("btn_page_audio"),t._card_audio=document.getElementById("card_audio"),t._popup_audio=document.getElementById("popup_audio"),t._flips_audio=document.getElementById("card_flips"),t._clock_audio=document.getElementById("clock_audio"),t._write_audio=document.getElementById("write_audio"),t._like_bubble_audio=document.getElementById("like_bubble"),t._all_btn_click_audio=document.getElementById("all_btn_click")}},{key:"pub_playAllBtnClick",value:function(){t._all_btn_click_audio&&(t._all_btn_click_audio.currentTime=0,t._all_btn_click_audio.play())}},{key:"pub_playLikeBubble",value:function(){t._like_bubble_audio&&(t._like_bubble_audio.currentTime=0,t._like_bubble_audio.play())}},{key:"pub_playWrite",value:function(){t._write_audio&&(t._write_audio.currentTime=0,t._write_audio.play())}},{key:"pub_playClock",value:function(){t._clock_audio&&(t._clock_audio.currentTime=4.5,t._clock_audio.play())}},{key:"pub_playFlips",value:function(){t._flips_audio&&(t._flips_audio.currentTime=0,t._flips_audio.play())}},{key:"pub_playPopup",value:function(){t._popup_audio&&(t._popup_audio.currentTime=0,t._popup_audio.play())}},{key:"pub_playCard",value:function(){t._card_audio&&(t._card_audio.currentTime=0,t._card_audio.play())}},{key:"pub_playBtnPage",value:function(){t._btn_page_audio&&(t._btn_page_audio.currentTime=0,t._btn_page_audio.play())}},{key:"pub_playBtnBack",value:function(){t._btn_back_audio&&(t._btn_back_audio.currentTime=0,t._btn_back_audio.play())}},{key:"pub_playGoodjob",value:function(){t._goodjob_audio&&(t._goodjob_audio.currentTime=0,t._goodjob_audio.play())}},{key:"pub_playDing",value:function(){t._ding_audio&&(t._ding_audio.currentTime=0,t._ding_audio.play())}},{key:"pub_playDingend",value:function(){t._dingend_audio&&(t._dingend_audio.currentTime=0,t._dingend_audio.play())}},{key:"pub_playToPad",value:function(){t._topad_audio&&(t._topad_audio.currentTime=0,t._topad_audio.play())}},{key:"pub_playBtnTab",value:function(){t._btn_audio&&(t._btn_audio.currentTime=0,t._btn_audio.play())}},{key:"pub_playCorrect",value:function(){t._correct_audio&&(t._correct_audio.currentTime=0,t._correct_audio.play())}},{key:"pub_playWrong",value:function(){t._wrong_audio&&(t._wrong_audio.currentTime=0,t._wrong_audio.play())}},{key:"pub_playStudentBubble",value:function(){var t=document.getElementById("student_bubble");t&&(t.currentTime=0,t.paused&&t.play())}},{key:"pub_stop",value:function(){null!=t._common_audio.onended&&t._common_audio.onended.call(t._common_audio,new Event("ended")),t._common_audio.oncanplaythrough=null,isNaN(t._common_audio.duration)||t._common_audio.paused||t._common_audio.pause()}},{key:"pub_play",value:function(e,n){t.pub_stop(),e=o.nteString(e,"");var i=o.nteString(t._common_audio.getAttribute("src"),"");if(""!==e||""!==i){""!==e&&i!==e&&(t._common_audio.src=e);var r=function e(i){t._common_audio.onended=null,null!==n&&n(!0),t._common_audio.removeEventListener("error",e)};t._common_audio.onended=function(e){t._common_audio.onended=null,null!==n&&n(!!e),t._common_audio.removeEventListener("error",r)},t._common_audio.addEventListener("error",r),isNaN(t._common_audio.duration)?(t._common_audio.oncanplaythrough=function(e){0!==t._common_audio.currentTime&&(t._common_audio.currentTime=0),t._common_audio.play(),t._common_audio.oncanplaythrough=null},t._common_audio.load()):(0!==t._common_audio.currentTime&&(t._common_audio.currentTime=0),t._common_audio.oncanplaythrough=null,t._common_audio.play())}else null!=n&&n(!0)}},{key:"pub_set",value:function(e,n,i){t._isDvlp=n,t._lang=i,r.set(n)}},{key:"pub_addInitedStudent",value:function(e){for(var n=!0,i=0,o=t._students_inited.length;i<o;i++)t._students_inited[i]===e.id&&(n=!1);n&&t._students_inited.push(e.id);var r=t._start_idx>0&&t._students.length>0&&t._students_inited.length>=t._students.length;return r&&(window.clearTimeout(t._start_idx),t._start_idx=-1),r}},{key:"pub_start",value:function(e){0===t._students.length||t._students_inited.length>=t._students.length?e():t._start_idx=window.setTimeout(e,2e3)}},{key:"pub_clear",value:function(){for(;t._students.length>0;)t._students.pop();for(;t._students_inited.length>0;)t._students_inited.pop()}},{key:"isMobile",get:function(){return t._isMobile}},{key:"tempEl",get:function(){return t._tempEl}},{key:"students",get:function(){return t._students}},{key:"student",get:function(){return t._student}},{key:"lang",get:function(){return t._lang}},{key:"isDvlp",get:function(){return t._isDvlp}},{key:"data_url",get:function(){return t._data_url}},{key:"lesson",get:function(){return t._lesson}},{key:"book",get:function(){return t._book}},{key:"nextBook",get:function(){return t._nextBook}},{key:"prevBook",get:function(){return t._prevBook}}],(n=null)&&i(e.prototype,n),s&&i(e,s),t}();e.App=s,s._isMobile=!1,s._students=[],s._students_inited=[],s._student=null,s._lang="ko",s._isDvlp=!1,s._data_url="../data/",s._lesson="",s._book="",s._nextBook=!1,s._prevBook=!1,s._start_idx=-1,s.isStarted=!1},function(t,e){t.exports=_},function(t,e,n){"use strict";function i(t,e,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=_(t);if(e){var o=_(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return l(this,n)}}function l(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var m=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===("undefined"==typeof Reflect?"undefined":f(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.ImgBtn=e.AudioBtn=e.ToggleBtn=void 0;var d=n(0),h=n(1),y=n(2),v=function(t){s(n,t);var e=c(n);function n(t){var i;return o(this,n),(i=e.call(this,t)).m_pID=-1,i._inited=i._inited.bind(p(i)),i._onClick=i._onClick.bind(p(i)),i}return a(n,[{key:"_inited",value:function(t){var e=this;!this.m_el&&t&&(this.m_el=t,this.props.onRef&&this.props.onRef(t),t.setAttribute("touch-action","none"),t.addEventListener("pointerdown",(function(n){if(!(e.m_pID>=0)){if(e.m_pID=n.pointerId,!e.props.disableCapture)try{t.setPointerCapture(e.m_pID)}catch(t){}e.props.onMouseDown&&e.props.onMouseDown(n)}})),t.addEventListener("pointerup",(function(n){if(e.m_pID===n.pointerId){try{t.releasePointerCapture(e.m_pID)}catch(t){}e.m_pID=-1,e.props.onMouseUp&&e.props.onMouseUp(n)}})),t.addEventListener("pointerleave",(function(n){if(e.props.disableCapture){if(e.m_pID!==n.pointerId)return;try{t.releasePointerCapture(e.m_pID)}catch(t){}e.m_pID=-1}e.props.onMouseLeave&&e.props.onMouseLeave(n)})),t.addEventListener("pointercancel",(function(n){if(e.m_pID===n.pointerId){try{t.releasePointerCapture(e.m_pID)}catch(t){}e.m_pID=-1,e.props.onMouseLeave&&e.props.onMouseLeave(n)}})))}},{key:"_onClick",value:function(t){this.props.onClick&&this.props.onClick(t),this.props.preventEvent&&(t.preventDefault(),t.stopPropagation())}},{key:"componentDidUpdate",value:function(t){if((this.props.disabled&&!t.disabled||!this.props.view&&t.view)&&this.m_pID>=0){try{this.m_el&&this.m_el.releasePointerCapture(this.m_pID)}catch(t){}this.m_pID=-1}}}]),n}(d.Component);m([h.observable],v.prototype,"m_pID",void 0);var b=function(t){s(n,t);var e=c(n);function n(t){var i;return o(this,n),(i=e.call(this,t)).m_on=!1,i.m_on=!0===t.on,i}return a(n,[{key:"componentWillReceiveProps",value:function(t){this.props.on!==t.on&&(this.m_on=!0===t.on)}},{key:"render",value:function(){var t=[];this.props.className&&t.push(this.props.className),this.m_on&&t.push("on"),this.m_pID>0&&t.push("down");var e=t.join(" "),n=this.props.style;return!1===this.props.view&&(n||(n={}),n.display="none"),d.createElement("button",{id:this.props.id,className:e,onClick:this._onClick,ref:this._inited,disabled:!0===this.props.disabled,draggable:!1,onTransitionEnd:this.props.onTransitionEnd,style:n},this.props.children)}}]),n}(v);m([h.observable],b.prototype,"m_on",void 0),b=m([y.observer],b),e.ToggleBtn=b;var g=function(t){s(n,t);var e=c(n);function n(t){return o(this,n),e.call(this,t)}return a(n,[{key:"play",value:function(){var t=this;this.m_on||(this.m_on=!0,this.props.playFnc(this.props.src,(function(e){t.m_on&&(t.m_on=!1,t.props.onPause&&t.props.onPause(e))})))}},{key:"_onClick",value:function(t){this.m_on?(this.props.pauseFnc(),this.m_on=!1):this.play(),i(_(n.prototype),"_onClick",this).call(this,t)}}]),n}(b);m([h.action],g.prototype,"play",null),m([h.action],g.prototype,"_onClick",null),g=m([y.observer],g),e.AudioBtn=g;var w=function(t){s(n,t);var e=c(n);function n(t){var i;return o(this,n),(i=e.call(this,t)).m_on=!1,i.m_on=!0===t.on,i}return a(n,[{key:"componentWillReceiveProps",value:function(t){this.props.on!==t.on&&(this.m_on=!0===t.on)}},{key:"render",value:function(){var t=[];this.props.className&&t.push(this.props.className),this.m_on&&t.push("on"),this.m_pID>0&&t.push("down"),!0===this.props.disabled&&t.push("disable");var e=t.join(" "),n=this.props.style;return!1===this.props.view&&(n||(n={}),n.display="none"),d.createElement("img",{id:this.props.id,className:e,onClick:this._onClick,ref:this._inited,draggable:!1,onTransitionEnd:this.props.onTransitionEnd,style:n,src:this.props.src,useMap:this.props.useMap})}}]),n}(v);m([h.observable],w.prototype,"m_on",void 0),w=m([y.observer],w),e.ImgBtn=w},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{u(i.next(t))}catch(t){r(t)}}function s(t){try{u(i.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.getPreviewResultMember=e.getPreviewResultClass=e.getPreviewDmsResult=e.getPreviewResult=e.uploadInclassReport=e.stopVideoRecord=e.startVideoRecord=e.switchCamera=e.stopCamera=e.startCustomCamera=e.startCamera=e.getStudents=e.uploadImageToServer=e.uploadFileToServer=e.stopVoiceRecord=e.startVoiceRecord=e.sendTeacher=e.disableSoftwareKeyboard=e.sendPAD=e.sendPADToID=e.sendLauncher=e.uploadStudentReport=e.addStudentForStudentReportType6=e.hideStudentReportListPage=e.showStudentReportListPage=e.showStudentReportUI=e.hideStudentReportUI=e.startStudentReportProcess=e.finishContentPage=e.set=void 0;var o=n(4),r=!1;e.set=function(t){r=t},e.finishContentPage=function(){if(!r)try{window.tsoc_o.finishContentPage()}catch(t){}},e.startStudentReportProcess=function(t,e,n){if(!r)try{window.tsoc_o.startStudentReportProcess(t,e,n)}catch(t){}},e.hideStudentReportUI=function(){if(!r)try{window.tsoc_o.hideStudentReportUI()}catch(t){}},e.showStudentReportUI=function(){if(!r)try{window.tsoc_o.showStudentReportUI()}catch(t){}},e.showStudentReportListPage=function(){if(!r)try{window.tsoc_o.showStudentReportListPage()}catch(t){}},e.hideStudentReportListPage=function(){if(!r)try{window.tsoc_o.hideStudentReportListPage()}catch(t){}},e.addStudentForStudentReportType6=function(t){if(!r)try{window.tsoc_o.addStudentForStudentReportType6(t)}catch(t){}},e.uploadStudentReport=function(t,e,n){if(!r)try{window.psoc_o.uploadStudentReport(t,e,n)}catch(t){}},e.sendLauncher=function(t,e){if(5!==t||r)if(6!==t||r)if(7!==t||r){if(8===t)if(r)try{window.top.tsoc_o.gotoPrevBook()}catch(t){}else try{window.tsoc_o.gotoPrevBook()}catch(t){}else if(9===t)if(r)try{window.top.tsoc_o.gotoNextBook()}catch(t){}else try{window.tsoc_o.gotoNextBook()}catch(t){}}else try{window.tsoc_o.setTitleBar(e)}catch(t){}else try{window.tsoc_o.showTitleBar()}catch(t){}else try{window.tsoc_o.hideTitleBar()}catch(t){}},e.sendPADToID=function(t,e,n){var i={type:e,data:n};if(r)try{window.top.tsoc_o.sendPADToID(t,i)}catch(t){}else try{window.tsoc_o.sendPADToID(t,i)}catch(t){}},e.sendPAD=function(t,e){var n={type:t,data:e};if(r)try{window.top.tsoc_o.sendAll(n)}catch(t){}else try{window.tsoc_o.sendAll(n)}catch(t){}},e.disableSoftwareKeyboard=function(){try{window.psoc_o.disableSoftwareKeyboard()}catch(t){}},e.sendTeacher=function(t,e){var n={type:t,data:e};if(r)try{window.opener.tsoc_o.sendTeacher(n)}catch(t){}else try{window.psoc_o.sendTeacher(n)}catch(t){}},e.startVoiceRecord=function(){try{window.psoc_o.startVoiceRecord()}catch(t){}},e.stopVoiceRecord=function(){try{window.psoc_o.stopVoiceRecord()}catch(t){}},e.uploadFileToServer=function(t){try{window.psoc_o.uploadFileToServer(t)}catch(t){}},e.uploadImageToServer=function(t){try{window.psoc_o.uploadImageToServer(t)}catch(t){}},e.getStudents=function(t){if(r)if(window.top.tsoc_o)try{window.top.tsoc_o.getStudents(t)}catch(t){}else t([],!1);else try{window.tsoc_o.getStudents(t)}catch(t){}},e.startCamera=function(){if(!r)try{window.psoc_o.startCamera()}catch(t){}},e.startCustomCamera=function(t){if(!r)try{window.psoc_o.startCustomCamera(t)}catch(t){}},e.stopCamera=function(){if(!r)try{window.psoc_o.stopCamera()}catch(t){}},e.switchCamera=function(){if(!r)try{window.psoc_o.switchCamera()}catch(t){}},e.startVideoRecord=function(){if(!r)try{window.psoc_o.startVideoRecord()}catch(t){}},e.stopVideoRecord=function(){if(!r)try{window.psoc_o.stopVideoRecord()}catch(t){}},e.uploadInclassReport=function(t){if(!r)try{window.tsoc_o.uploadInclassReport(t)}catch(t){}},e.getPreviewResult=function(t){return i(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){if(r)e([]);else{var n=!1;window.tsoc_o.getPreviewResult((function(t){n||(n=!0,e(t))}),t),o.delay((function(){n||(n=!0,e([]))}),5e3)}})));case 1:case"end":return e.stop()}}),e)})))},e.getPreviewDmsResult=function(t){return i(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){if(r)e([]);else{var n=!1;window.tsoc_o.getPreviewDmsResult((function(t){n||(n=!0,e(t))}),t),o.delay((function(){n||(n=!0,e([]))}),5e3)}})));case 1:case"end":return e.stop()}}),e)})))},e.getPreviewResultClass=function(t){return i(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){if(r)e([]);else{var n=!1;window.tsoc_o.getPreviewResultClass((function(t){n||(n=!0,e(t))}),t),o.delay((function(){n||(n=!0,e([]))}),5e3)}})));case 1:case"end":return e.stop()}}),e)})))},e.getPreviewResultMember=function(t){return i(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){if(r)e([]);else{var n=!1;window.tsoc_o.getPreviewResultMember((function(t){n||(n=!0,e(t))}),t),o.delay((function(){n||(n=!0,e([]))}),5e3)}})));case 1:case"end":return e.stop()}}),e)})))}},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{u(i.next(t))}catch(t){r(t)}}function s(t){try{u(i.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.getBounds=e.getTimeStr=e.wait=void 0;var o=n(4);e.wait=function(t){return i(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){o.delay(e,t)})));case 1:case"end":return e.stop()}}),e)})))},e.getTimeStr=function(t,e){var n=Math.round(e/1e3),i=Math.round(t/1e3),o=Math.floor(i/60),r=Math.floor(o/60),a="";return o%=60,r>0||n>=3600?(a=r+":",a+=o>=10?o+":":"0"+o+":"):n>=600?a+=o>=10?o+":":"0"+o+":":a=o+":",a+=(i%=60)>=10?i:"0"+i},e.getBounds=function(t){var e={left:0,top:0,width:0,height:0};if(!t)return e;try{var n=t.getBoundingClientRect();e.left=n.left,e.top=n.top,e.width=n.width,e.height=n.height}catch(t){}var i=t.ownerDocument,o=i.body,r=i.documentElement;e.left=e.left-(r.clientLeft||o.clientLeft||0),e.top=e.top-(r.clientTop||o.clientTop||0);var a=i.defaultView;return e.left+=a.pageXOffset||r.scrollLeft||o.scrollLeft,e.top+=a.pageYOffset||r.scrollTop||o.scrollTop,e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._toStringTimestamp=e.getDateStr=e.nteArray=e.intToHTMLcolor=e.nteBool=e.nteString=e.nteFloat=e.nteInt=e.nteUInt=e.getUnicUrl=e.getUnicNum=e.getUnic=void 0;var i=n(19);Date.now||(Date.now=function(){return(new Date).getTime()});var o=0;function r(){return a().toString(36)}function a(){var t=Date.now();return t>o?o=t:o+=1,o}e.getUnic=r,e.getUnicNum=a,e.getUnicUrl=function(t){if(!t)return"";var e=t=t.trim();return 0!==e.indexOf("http://")&&0!==e.indexOf("https://")||(e=e.indexOf("?")>0?e+"&t="+r():e+"?t="+r()),e},e.nteUInt=function(t,e){if(i.isNullOrUndefined(t))return e;if(i.isNumber(t))return isNaN(t)||t<0?e:Math.round(t);var n=parseInt(String(t),10);return isNaN(n)||n<0?e:n},e.nteInt=function(t,e){if(i.isNullOrUndefined(t))return e;if(i.isNumber(t))return Math.round(t);var n=parseInt(String(t),10);return isNaN(n)?e:n},e.nteFloat=function(t,e){if(i.isNullOrUndefined(t))return e;if(i.isNumber(t))return t;var n=parseFloat(String(t));return isNaN(n)?e:n},e.nteString=function(t,e){return i.isNullOrUndefined(t)?e:String(t)},e.nteBool=function(t,e){if(i.isNullOrUndefined(t))return e;if(i.isBoolean(t))return t;var n=String(t);return"true"===n||"false"!==n&&e},e.intToHTMLcolor=function(t){var e=t-0,n=(e=(255&e)<<16|65280&e|(16711680&e)>>>16).toString(16);return n="#000000".substring(0,7-n.length)+n},e.nteArray=function(t){if(t){if(Array.isArray(t))return t;if("string"==typeof t){var e=t;if(e.indexOf("[")>=0&&e.indexOf("]")>0)try{return JSON.parse(e)}catch(t){}}var n=[];return n.push(t),n}return[]},e.getDateStr=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".",e=new Date,n=e.getFullYear(),i=e.getMonth()+1,o=e.getDate(),r=i<10?"0"+i:""+i,a=o<10?"0"+o:""+o;return n+t+r+t+a},e._toStringTimestamp=function(t){var e=t.getFullYear(),n=t.getMonth()+1+"";parseInt(n,10)<10&&(n="0"+n);var i=t.getDate()+"";return parseInt(i,10)<10&&(i="0"+i),e+"-"+n+"-"+i+" "+t.toTimeString().substr(0,8)}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=c(t);if(e){var o=c(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?u(t):e}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var p=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},_=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{u(i.next(t))}catch(t){r(t)}}function s(t){try{u(i.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.CoverPopup=void 0;var f=n(0),m=n(1),d=n(2),h=n(7),y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}(l,t);var e,n,s,c=a(l);function l(){var t;return i(this,l),(t=c.apply(this,arguments)).m_state="closed",t._open=function(){return _(u(t),void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("closed"!==this.m_state){t.next=5;break}return this.m_state="opening",t.next=4,h.wait(100);case 4:this.m_state="open";case 5:case"end":return t.stop()}}),t,this)})))},t._close=function(){return _(u(t),void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("open"!==this.m_state){t.next=6;break}return this.m_state="closing",t.next=4,h.wait(400);case 4:this.props.onClosed(),this.m_state="closed";case 6:case"end":return t.stop()}}),t,this)})))},t}return e=l,(n=[{key:"componentDidUpdate",value:function(t){this.props.view!==t.view&&(this.props.view?this._open():this._close())}},{key:"render",value:function(){return f.createElement("div",{className:this.props.className+" "+this.m_state},this.props.children)}}])&&o(e.prototype,n),s&&o(e,s),l}(f.Component);p([m.observable],y.prototype,"m_state",void 0),y=p([d.observer],y),e.CoverPopup=y},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return l(this,n)}}function l(t,e){return!e||"object"!==_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var f=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===("undefined"==typeof Reflect?"undefined":_(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},m=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{u(i.next(t))}catch(t){r(t)}}function s(t){try{u(i.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.SENDPROG=e.useTeacher=e.tContext=e.TeacherConsumer=e.TeacherProvider=e.TeacherContext=void 0;var d,h=n(0),y=n(4),v=n(1),b=n(3),g=n(6),w=n(29),T=n(8);!function(t){t[t.READY=0]="READY",t[t.SENDING=1]="SENDING",t[t.SENDED=2]="SENDED",t[t.COMPLETE=3]="COMPLETE"}(d||(d={})),e.SENDPROG=d;var O=function(t){s(n,t);var e=c(n);function n(){var t;return i(this,n),(t=e.call(this))._result=[],t._returnUsers=[],t._returnUsersForQuiz=[],t._qnaReturns=[],t._uploadInclassReport=function(e){var n=t._data.quizs,i=[];n.forEach((function(t,n){var o=e.returns[n],r=T._toStringTimestamp(new Date(o.stime)),a=T._toStringTimestamp(new Date(o.etime));o&&t.tmq_seq&&i.push({std_cont_seq:t.tmq_seq,studentId:e.id,ans_tf:o.answer===t.answer?"1":"0",ans_submit:""+o.answer,ans_starttime:r,ans_endtime:a,sc_div1:t.SC_DIV1?t.SC_DIV1:"",sc_div2:t.SC_DIV2?t.SC_DIV2:"",sc_div3:t.SC_DIV3?t.SC_DIV3:"",sc_div4:t.SC_DIV4?t.SC_DIV4:"",files:null,ans_correct:""+t.answer,tab_index:""})})),i.length>0&&(console.log("inclassReport(LogFromContentTeacher): ",i),g.uploadInclassReport(i))},t.state.hasPreview=!1,t.state.questionProg=0,t.state.scriptProg=0,t.state.qnaProg=0,t.state.dialogueProg=0,t.actions.getData=function(){return t._data},t.actions.getResult=function(){return t._result},t.actions.gotoDirection=function(){return t._setViewDiv("direction")},t.actions.gotoNextBook=function(){g.sendLauncher(9,null)},t.actions.getReturnUsers=function(){return t._returnUsers},t.actions.clearReturnUsers=function(){t._returnUsers=[]},t.actions.getReturnUsersForQuiz=function(){return t._returnUsersForQuiz},t.actions.clearReturnUsersForQuiz=function(){t._returnUsersForQuiz=[]},t.actions.getQnaReturns=function(){return t._qnaReturns},t.actions.quizComplete=function(){t.state.questionProg=3},t.actions.clearQnaReturns=function(){t._returnUsers=[];for(var e=0;e<t._data.scripts.length;e++)t._qnaReturns[e]={num:0,users:[]};t.actions.setRetCnt(0)},t.actions.init=function(){if(t.state.scriptProg=0,t.state.qnaProg=0,t.state.dialogueProg=0,t._returnUsers=[],t.state.questionProg<3){t.state.questionProg=0,t._returnUsersForQuiz=[];for(var e=0;e<t._data.quizs.length;e++)t._result[e]={numOfCorrect:0,c1:0,u1:[],c2:0,u2:[],c3:0,u3:[]}}for(var n=0;n<t._data.scripts.length;n++)t._qnaReturns[n]={num:0,users:[]}},t}return r(n,[{key:"_setViewDiv",value:function(t){this.state.viewDiv!==t&&"content"!==t&&y.delay(this.actions.init,300),a(p(n.prototype),"_setViewDiv",this).call(this,t)}},{key:"receive",value:function(t){if(a(p(n.prototype),"receive",this).call(this,t),11===t.type&&t.data){var e=t.data;if("quiz_return"===e.msgtype){if(2===this.state.questionProg){for(var i=e,o=-1,r=0;r<b.App.students.length;r++)if(b.App.students[r].id===i.id){o=r;break}var s=this._returnUsersForQuiz.indexOf(i.id);if(o>=0&&s<0){this._returnUsersForQuiz.push(i.id),g.addStudentForStudentReportType6(i.id),this.actions.setRetCnt(this._returnUsersForQuiz.length);for(var u=0;u<i.returns.length;u++)if(u<this._result.length){var c=this._data.quizs[u],l=i.returns[u],_=this._result[u];l.answer===c.answer&&_.numOfCorrect++,1===l.answer?(_.c1++,_.u1.push(i.id)):2===l.answer?(_.c2++,_.u2.push(i.id)):3===l.answer&&(_.c3++,_.u3.push(i.id))}this._uploadInclassReport(i)}}}else if("qna_return"===e.msgtype&&2===this.state.qnaProg){for(var f=e,m=-1,d=0;d<b.App.students.length;d++)if(b.App.students[d].id===f.id){m=d;break}var h=this._returnUsers.indexOf(f.id);if(m>=0&&h<0){for(var y=0;y<f.returns.length;y++){var v=f.returns[y];if(v<this._qnaReturns.length){var w=this._qnaReturns[v].users;w.indexOf(f.id)<0&&w.push(f.id),this._qnaReturns[v].num=w.length}}this._returnUsers.push(f.id),g.addStudentForStudentReportType6(f.id),this.actions.setRetCnt(this._returnUsers.length)}var O=[],P=T._toStringTimestamp(new Date(f.stime)),E=T._toStringTimestamp(new Date(f.etime)),S="qna;",R=this._data.scripts;f.returns.length>0&&f.returns.forEach((function(t,e){var n=R[t];n&&(S+="qna;"===S?n.seq+"|"+n.dms_eng:"§"+n.seq+"|"+n.dms_eng)})),O.push({std_cont_seq:0,studentId:f.id,ans_tf:0===f.returns.length?"0":"1",ans_submit:S,ans_starttime:P||"",ans_endtime:E||"",sc_div1:"",sc_div2:"",sc_div3:"",sc_div4:"",files:null,ans_correct:"",tab_index:"5"}),O.length>0&&(console.log("inclassReport(LogFromContentTeacher): ",O),g.uploadInclassReport(O))}}}},{key:"setData",value:function(t){return m(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,i,o,r,a,s,u,c,l,p,_,f,m,d,y,v,w,T,O;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=function(t,e,n){for(var i=0;i<n.length;i++)t.includes(n[i].textValue)||(t.push(n[i].textValue),e.push({sum:0,cnt:0,avg:0,txt:""}));for(var o=function(i){var o=n[i].textValue,r=n[i].avgPercent,a=t.findIndex((function(t){return t===o}));e[a].sum+=r,e[a].cnt+=1,e[a].avg=Math.round(e[a].sum/e[a].cnt),e[a].txt=o},r=0;r<n.length;r++)o(r)},this._data=t,this.state.hasPreview=!0,i=[70,60,80],o=this._data.scripts,r=this._data.speakerA.name,a=this._data.speakerB.name,s=this._data.speakerC.name,this._data.speakerD||(this._data.speakerD={name:"",image_s:"",image_l:""}),this._data.speakerE||(this._data.speakerE={name:"",image_s:"",image_l:""}),u=this._data.speakerD.name,this._data.speakerE.name,c=0;c<this._data.quizs.length;c++)l=this._data.quizs[c],p=l.question.replace(/\<br\>/g," "),l.app_question=h.createElement(h.Fragment,null,p),l.app_preview=c<i.length?i[c]:-1,this._result[c]={numOfCorrect:0,c1:0,u1:[],c2:0,u2:[],c3:0,u3:[]};for(_=[],f=0;f<o.length;f++)(m=o[f]).sc_COD&&!b.App.isDvlp&&void 0!==m.sc_COD[0]&&_.push({evalCode:"2",vsFromData:"script",vsFromSeq:Number(m.sc_COD[0].codSeq)}),m.dms_speaker===r?m.roll="A":m.dms_speaker===a?m.roll="B":m.dms_speaker===s?m.roll="C":m.dms_speaker===u?m.roll="D":m.roll="E",this._qnaReturns[f]={num:0,users:[]};if(console.log("previewMsg~~~",_.length,_),0,v=[],w=[],b.App.isDvlp||"ko"!==b.App.lang){e.next=27;break}return e.next=22,g.getPreviewResultClass(_);case 22:if(d=e.sent,d.length>0)!function(){y=d.filter((function(t,e){return 6===t.mttSeq})),n(v,w,y),console.log("text_arr",v,"val_arr",w);for(var t=[],e=0;e<o.length;e++){var i=o[e];i.sc_COD&&t.push(i)}for(var r=0;r<t.length;r++)t[r].app_preview=w[r].avg;for(var a=function(e){var n=o.findIndex((function(n,i){return n.dms_seq===t[e].dms_seq}));o[n].app_preview=t[e].app_preview},s=0;s<t.length;s++)a(s)}();else for(T=0;T<o.length;T++)o[T].app_preview=-1;e.next=28;break;case 27:for(O=0;O<o.length;O++)o[O].app_preview=0===O?80:2*O;case 28:case"end":return e.stop()}}),e,this)})))}}]),n}(w.TeacherContextBase);f([v.observable],O.prototype,"state",void 0),f([v.action],O.prototype,"_setViewDiv",null),e.TeacherContext=O;var P=new O;e.tContext=P;var E=h.createContext(P),S=E.Provider,R=E.Consumer;e.TeacherConsumer=R;var k=function(t){s(n,t);var e=c(n);function n(){return i(this,n),e.apply(this,arguments)}return r(n,[{key:"render",value:function(){return h.createElement(S,{value:P},this.props.children)}}]),n}(h.Component);e.TeacherProvider=k,e.useTeacher=function(t){return function(e){return h.createElement(R,null,(function(e){return h.createElement(t,Object.assign({},e))}))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._getBlockJSX=e._getJSX=e._splitSpace=e._sentence2jsx=void 0;var i=n(0);function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block",n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,s=new RegExp(/\{(.*?)\}/g),u={key:0},c=[],l=t.replace(/\s\s+/gi," ").replace(/<\s*br\s*\/*\s*>/gi,"<br>").split("<br>");return l.forEach((function(t,l){if(e){for(var p=s.exec(t),_=0,f="",m=[];p;){p.index>_&&(f=t.substring(_,p.index),m.push(r(f,u,a))),f=p[1];var d=n;d||(d=f),o?r(d,u,a):d,m.push(i.createElement("span",{key:u.key++,className:e,"data-correct":f},"aaaaaaaaaa")),_=s.lastIndex,p=s.exec(t)}_<t.length&&(f=t.substring(_),m.push(r(f,u,a))),c[l]=i.createElement(i.Fragment,{key:u.key++},m)}else c[l]=i.createElement(i.Fragment,{key:u.key++},r(t,u,a))})),c}function r(t,e,n){for(var o=t.split(/\s/g),r=new RegExp(/[\.\!\?\s]/g),a=[],s=0;s<o.length;s++){var u=o[s];if(""!==u){for(var c=[],l=r.exec(u),p=0,_="";l;)l.index>p&&(_=u.substring(p,l.index),c.push(i.createElement("span",{key:e.key++},_))),_=l[0],c.push(_),p=r.lastIndex,l=r.exec(u);p<u.length&&(_=u.substring(p),c.push(i.createElement("span",{key:e.key++},_))),a.push(i.createElement("span",{key:e.key++,className:n},c.map((function(t){return t}))))}}return a}e._sentence2jsx=o,e._splitSpace=r,e._getJSX=function(t){var e=o(t,"block",void 0,!0,"word");return i.createElement(i.Fragment,null,e.map((function(t,n){return n===e.length-1?t:i.createElement(i.Fragment,{key:n},t,i.createElement("br",null))})))},e._getBlockJSX=function(t){var e=o(t,"block",void 0,!0,"word");return i.createElement(i.Fragment,null,e.map((function(t,n){return n===e.length-1?t:i.createElement(i.Fragment,{key:n},t,i.createElement("br",null))})))}},function(t,e){t.exports=ReactIdSwiper},function(t,e,n){t.exports=n(14)},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var i=n(16),o=n(0),r=n(18),a=n(3),s=n(6),u=n(23);i.setConfig({ErrorOverlay:function(t){return o.createElement("div",null)}});var c,l={clear:a.App.pub_clear,importLink:u.importLink,importHTML:u.importHTML};c=n(24);var p=!1,_=c,f=_.default,m=_.AppProvider,d=_.appContext;l.set=function(t,e,n){a.App.pub_set(t,e,n),d.setData(t)},l.render=function(){a.App.pub_initAudio(),r.render(o.createElement(m,null,o.createElement(f,null)),document.getElementById("wrap"))},l.init=function(t,e,n,i,o){a.App.pub_load(t,null,e,n,i,o)},l.start=function(){p=!0,setTimeout((function(){return d.start()}),500)},l.receive=function(t){if(4===t.type){var e=t.data;p?e&&e.id&&""!==e.id&&s.sendPADToID(e.id,a.App.isStarted?0:1,null):a.App.pub_addInitedStudent(e)&&(p||(p=!0,d.start()))}else d.receive(t)},l.teachingTool=function(t){},n(42),t.app_o=l}).call(this,n(15))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";t.exports=n(17)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=n(0))&&"object"==typeof i&&"default"in i?i.default:i;function r(t){return r.warnAboutHMRDisabled&&(r.warnAboutHMRDisabled=!0,console.error("React-Hot-Loader: misconfiguration detected, using production version in non-production environment."),console.error("React-Hot-Loader: Hot Module Replacement is not enabled.")),o.Children.only(t.children)}r.warnAboutHMRDisabled=!1;var a=function t(){return t.shouldWrapWithAppContainer?function(t){return function(e){return o.createElement(r,null,o.createElement(t,e))}}:function(t){return t}};a.shouldWrapWithAppContainer=!1;e.AppContainer=r,e.hot=a,e.areComponentsEqual=function(t,e){return t===e},e.setConfig=function(){},e.cold=function(t){return t},e.configureComponent=function(){}},function(t,e){t.exports=ReactDOM},function(t,e,n){(function(t){var i=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},i=0;i<e.length;i++)n[e[i]]=Object.getOwnPropertyDescriptor(t,e[i]);return n},o=/%[sdj%]/g;e.format=function(t){if(!y(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(s(arguments[n]));return e.join(" ")}n=1;for(var i=arguments,r=i.length,a=String(t).replace(o,(function(t){if("%%"===t)return"%";if(n>=r)return t;switch(t){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return t}})),u=i[n];n<r;u=i[++n])d(u)||!g(u)?a+=" "+u:a+=" "+s(u);return a},e.deprecate=function(n,i){if(void 0!==t&&!0===t.noDeprecation)return n;if(void 0===t)return function(){return e.deprecate(n,i).apply(this,arguments)};var o=!1;return function(){if(!o){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),o=!0}return n.apply(this,arguments)}};var r,a={};function s(t,n){var i={seen:[],stylize:c};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),m(n)?i.showHidden=n:n&&e._extend(i,n),v(i.showHidden)&&(i.showHidden=!1),v(i.depth)&&(i.depth=2),v(i.colors)&&(i.colors=!1),v(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=u),l(i,t,i.depth)}function u(t,e){var n=s.styles[e];return n?"["+s.colors[n][0]+"m"+t+"["+s.colors[n][1]+"m":t}function c(t,e){return t}function l(t,n,i){if(t.customInspect&&n&&O(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(i,t);return y(o)||(o=l(t,o,i)),o}var r=function(t,e){if(v(e))return t.stylize("undefined","undefined");if(y(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(h(e))return t.stylize(""+e,"number");if(m(e))return t.stylize(""+e,"boolean");if(d(e))return t.stylize("null","null")}(t,n);if(r)return r;var a=Object.keys(n),s=function(t){var e={};return t.forEach((function(t,n){e[t]=!0})),e}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),T(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return p(n);if(0===a.length){if(O(n)){var u=n.name?": "+n.name:"";return t.stylize("[Function"+u+"]","special")}if(b(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(w(n))return t.stylize(Date.prototype.toString.call(n),"date");if(T(n))return p(n)}var c,g="",P=!1,E=["{","}"];(f(n)&&(P=!0,E=["[","]"]),O(n))&&(g=" [Function"+(n.name?": "+n.name:"")+"]");return b(n)&&(g=" "+RegExp.prototype.toString.call(n)),w(n)&&(g=" "+Date.prototype.toUTCString.call(n)),T(n)&&(g=" "+p(n)),0!==a.length||P&&0!=n.length?i<0?b(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),c=P?function(t,e,n,i,o){for(var r=[],a=0,s=e.length;a<s;++a)k(e,String(a))?r.push(_(t,e,n,i,String(a),!0)):r.push("");return o.forEach((function(o){o.match(/^\d+$/)||r.push(_(t,e,n,i,o,!0))})),r}(t,n,i,s,a):a.map((function(e){return _(t,n,i,s,e,P)})),t.seen.pop(),function(t,e,n){if(t.reduce((function(t,e){return e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(c,g,E)):E[0]+g+E[1]}function p(t){return"["+Error.prototype.toString.call(t)+"]"}function _(t,e,n,i,o,r){var a,s,u;if((u=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]}).get?s=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(s=t.stylize("[Setter]","special")),k(i,o)||(a="["+o+"]"),s||(t.seen.indexOf(u.value)<0?(s=d(n)?l(t,u.value,null):l(t,u.value,n-1)).indexOf("\n")>-1&&(s=r?s.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+s.split("\n").map((function(t){return"   "+t})).join("\n")):s=t.stylize("[Circular]","special")),v(a)){if(r&&o.match(/^\d+$/))return s;(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function f(t){return Array.isArray(t)}function m(t){return"boolean"==typeof t}function d(t){return null===t}function h(t){return"number"==typeof t}function y(t){return"string"==typeof t}function v(t){return void 0===t}function b(t){return g(t)&&"[object RegExp]"===P(t)}function g(t){return"object"==typeof t&&null!==t}function w(t){return g(t)&&"[object Date]"===P(t)}function T(t){return g(t)&&("[object Error]"===P(t)||t instanceof Error)}function O(t){return"function"==typeof t}function P(t){return Object.prototype.toString.call(t)}function E(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(n){if(v(r)&&(r=Object({NODE_ENV:"production"}).NODE_DEBUG||""),n=n.toUpperCase(),!a[n])if(new RegExp("\\b"+n+"\\b","i").test(r)){var i=t.pid;a[n]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",n,i,t)}}else a[n]=function(){};return a[n]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=f,e.isBoolean=m,e.isNull=d,e.isNullOrUndefined=function(t){return null==t},e.isNumber=h,e.isString=y,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=v,e.isRegExp=b,e.isObject=g,e.isDate=w,e.isError=T,e.isFunction=O,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(21);var S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function R(){var t=new Date,e=[E(t.getHours()),E(t.getMinutes()),E(t.getSeconds())].join(":");return[t.getDate(),S[t.getMonth()],e].join(" ")}function k(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",R(),e.format.apply(e,arguments))},e.inherits=n(22),e._extend=function(t,e){if(!e||!g(e))return t;for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]];return t};var N="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function x(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(N&&t[N]){var e;if("function"!=typeof(e=t[N]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,N,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,n,i=new Promise((function(t,i){e=t,n=i})),o=[],r=0;r<arguments.length;r++)o.push(arguments[r]);o.push((function(t,i){t?n(t):e(i)}));try{t.apply(this,o)}catch(t){n(t)}return i}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),N&&Object.defineProperty(e,N,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,i(t))},e.promisify.custom=N,e.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],i=0;i<arguments.length;i++)n.push(arguments[i]);var o=n.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var r=this,a=function(){return o.apply(r,arguments)};e.apply(this,n).then((function(e){t.nextTick(a,null,e)}),(function(e){t.nextTick(x,e,a)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),Object.defineProperties(n,i(e)),n}}).call(this,n(20))},function(t,e){var n,i,o=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:r}catch(t){n=r}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var u,c=[],l=!1,p=-1;function _(){l&&u&&(l=!1,u.length?c=u.concat(c):p=-1,c.length&&f())}function f(){if(!l){var t=s(_);l=!0;for(var e=c.length;e;){for(u=c,c=[];++p<e;)u&&u[p].run();p=-1,e=c.length}u=null,l=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function m(t,e){this.fun=t,this.array=e}function d(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new m(t,e)),1!==c.length||l||s(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=d,o.addListener=d,o.once=d,o.off=d,o.removeListener=d,o.removeAllListeners=d,o.emit=d,o.prependListener=d,o.prependOnceListener=d,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.importLink=e.importHTML=void 0,e.importHTML=function(t){return new Promise((function(e,n){var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="document",i.onload=function(t){if(t){var o=i.response;o&&o.body&&o.body.firstElementChild?e(o.body.firstElementChild):o&&o.documentElement?e(o.documentElement):n("error")}},i.onerror=function(t){n(t)},i.send(null)}))},e.importLink=function(t,e){return new Promise((function(e,n){var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="document",i.onload=function(t){if(t){var n=i.response;e(n)}},i.onerror=function(t){n(t)},i.send(null)}))}},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function r(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=s(t);if(e){var o=s(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return a(this,n)}}function a(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var c=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.appContext=e.AppProvider=void 0;var l=n(0),p=n(2),_=n(25);n(26),n(27);var f=n(28),m=n(10),d=n(10);Object.defineProperty(e,"AppProvider",{enumerable:!0,get:function(){return d.TeacherProvider}}),Object.defineProperty(e,"appContext",{enumerable:!0,get:function(){return d.tContext}});var h=n(30),y=n(3),v=n(32),b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(u,t);var e,n,a,s=r(u);function u(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),s.call(this,t)}return e=u,(n=[{key:"render",value:function(){var t=this.props,e=t.state,n=t.actions,i=e.viewDiv;return l.createElement(l.Fragment,null,l.createElement("div",{id:"preload_hidden",style:{opacity:0}},l.createElement("span",null,"가나다라s"),l.createElement("span",{style:{fontWeight:"bold"}},"가나다라"),l.createElement("span",{className:"set"})," ",l.createElement("span",{className:"unlimit"})," ",l.createElement("span",{className:"start"}),l.createElement("span",{className:"time1"}),l.createElement("span",{className:"time2"})," ",l.createElement("span",{className:"time3"})),l.createElement("div",{className:"content-container"},l.createElement("div",{className:"content-wrapper",style:{left:("direction"===i?0:-1280)+"px"}},l.createElement("div",null,l.createElement(h.default,{className:"video-direction",view:"direction"===i,on:e.directionON,isTeacher:!0,video_url:"",video_frame:125,onEndStart:n.onDirectionEndStart,onEnd:n.onDirectionEnded},l.createElement("div",{className:"lesson"},y.App.lesson))),l.createElement("div",null,l.createElement(v.default,{view:"content"===i,state:e,actions:n})))),l.createElement(f.Navi,Object.assign({},e.navi,{onLeftClick:n.naviLeft,onRightClick:n.naviRight})))}}])&&i(e.prototype,n),a&&i(e,a),u}(l.Component);b=c([p.observer],b);var g=m.useTeacher((function(t){return l.createElement(p.Observer,null,(function(){return l.createElement(b,{state:t.state,actions:t.actions})}))}));e.default=_.hot(g)},function(t,e,n){e.hot=function(t){return t}},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function r(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=s(t);if(e){var o=s(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return a(this,n)}}function a(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var c=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.Navi=void 0;var l=n(0),p=n(1),_=n(2),f=n(5),m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(u,t);var e,n,a,s=r(u);function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=s.call(this,t)).m_on=!1,e.m_isStarted=!1,e._onClick=function(t){e.m_on=!0},e}return e=u,(n=[{key:"componentDidUpdate",value:function(t){this.m_isStarted||!this.props.view||t.view||(this.m_isStarted=!0,this.m_on=!0)}},{key:"render",value:function(){var t=this.m_on?void 0:"off",e={visibility:this.props.view?"visible":"hidden"};return l.createElement(l.Fragment,null,l.createElement("div",{id:"common_navi_left",className:t,style:e},l.createElement("div",null,l.createElement("div",{onClick:this._onClick},l.createElement(f.ToggleBtn,{className:"right",disabled:!this.props.enableRight,onClick:this.props.onRightClick}),l.createElement(f.ToggleBtn,{className:"left",disabled:!this.props.enableLeft,onClick:this.props.onLeftClick})))),l.createElement("div",{id:"common_navi_right",className:t,style:e},l.createElement("div",null,l.createElement("div",{onClick:this._onClick},l.createElement(f.ToggleBtn,{className:"right",disabled:!this.props.enableRight,onClick:this.props.onRightClick}),l.createElement(f.ToggleBtn,{className:"left",disabled:!this.props.enableLeft,onClick:this.props.onLeftClick})))))}}])&&i(e.prototype,n),a&&i(e,a),u}(l.Component);c([p.observable],m.prototype,"m_on",void 0),m=c([_.observer],m),e.Navi=m},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=this&&this.__decorate||function(t,e,n,i){var r,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var u=t.length-1;u>=0;u--)(r=t[u])&&(s=(a<3?r(s):a>3?r(e,n,s):r(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.TeacherContextBase=void 0;var a=n(1),s=n(3),u=n(6),c=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._naviLeftFnc=null,this._naviRightFnc=null,this.state={viewDiv:"direction",directionON:!1,navi:{view:!1,enableLeft:!1,enableRight:!1},svg_bg:{view:!0,bPlay:!1,viewCharactor:!0},retCnt:0,numOfStudent:0},this.actions={onDirectionEndStart:function(){"direction"===e.state.viewDiv&&u.sendPAD(3,null)},onDirectionEnded:function(){"direction"===e.state.viewDiv&&e._setViewDiv("content"),s.App.isStarted=!0},setNaviView:function(t){e.state.navi.view=t},setNavi:function(t,n){e.state.navi.enableLeft=t,e.state.navi.enableRight=n},setNaviFnc:function(t,n){e._naviLeftFnc=t,e._naviRightFnc=n},naviLeft:function(){"direction"===e.state.viewDiv?u.sendLauncher(8,null):(s.App.pub_playBtnPage(),e._naviLeftFnc?e._naviLeftFnc():e._setViewDiv("direction"))},naviRight:function(){"direction"===e.state.viewDiv?(s.App.pub_playBtnPage(),e.state.directionON=!1):(s.App.pub_playBtnPage(),e._naviRightFnc?e._naviRightFnc():u.sendLauncher(9,null))},setRetCnt:function(t){t>e.state.numOfStudent&&(t=e.state.numOfStudent),e.state.retCnt=t},setNumOfStudent:function(t){e.state.numOfStudent=t}}}var e,n,o;return e=t,(n=[{key:"_setViewDiv",value:function(t){this.state.viewDiv!==t&&(s.App.pub_stop(),"direction"===t?(this.state.directionON=!0,this.state.svg_bg.bPlay=!0,this.state.svg_bg.viewCharactor=!0,u.sendLauncher(5,null),u.sendPAD(1,null),this.state.navi.view=!0,this.state.navi.enableLeft=s.App.prevBook,this.state.navi.enableRight=!0,this._naviLeftFnc=null,this._naviRightFnc=null):(this.state.directionON=!1,this.state.svg_bg.bPlay=!1,this.state.svg_bg.viewCharactor=!1,u.sendLauncher(6,null),u.sendPAD(0,null)),this._naviLeftFnc=null,this._naviRightFnc=null,this.state.numOfStudent=0,this.state.retCnt=0,this.state.viewDiv=t)}},{key:"start",value:function(){"direction"===this.state.viewDiv&&(this.state.directionON=!0,this.state.navi.view=!0,this.state.navi.enableLeft=s.App.prevBook,this.state.navi.enableRight=!0,this.state.svg_bg.bPlay=!0,u.sendLauncher(5,null),u.sendPAD(1,null))}},{key:"receive",value:function(t){}},{key:"uploaded",value:function(t){}},{key:"notify",value:function(t){}},{key:"notifyRecorded",value:function(t){}},{key:"notifyVideoRecord",value:function(t){}}])&&i(e.prototype,n),o&&i(e,o),t}();r([a.observable],c.prototype,"state",void 0),r([a.action],c.prototype,"_setViewDiv",null),r([a.action],c.prototype,"start",null),e.TeacherContextBase=c},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function r(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=u(t);if(e){var o=u(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return a(this,n)}}function a(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?s(t):e}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var l=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},p=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{u(i.next(t))}catch(t){r(t)}}function s(t){try{u(i.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});var _=n(0),f=n(1),m=n(2),d=n(4),h=n(7),y=n(31),v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(c,t);var e,n,a,u=r(c);function c(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=u.call(this,t)).m_on=!1,e.m_clipView=!1,e.m_imgDiv=null,e._refImg=function(t){t&&void 0!==e.props.video_url&&""!==e.props.video_url&&(e.m_imgDiv=t,e.m_clipView||d.delay((function(){e.m_imgDiv&&(e.m_clipView=!0)}),1250))},e._onClick=function(){e.props.isTeacher&&e._off()},e._off=function(){return p(s(e),void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.props.view||!this.m_on){t.next=6;break}return this.m_on=!1,this.props.onEndStart&&this.props.onEndStart(),t.next=5,h.wait(500);case 5:this.props.view&&!this.m_on&&this.props.onEnd&&this.props.onEnd();case 6:case"end":return t.stop()}}),t,this)})))},e.m_on=t.view&&t.on,e}return e=c,(n=[{key:"_on",value:function(){return p(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.m_on=!0;case 1:case"end":return t.stop()}}),t,this)})))}},{key:"componentDidUpdate",value:function(t){this.props.view?t.view?this.props.on&&!t.on?this._on():!this.props.on&&t.on&&this._off():this.props.on?this._on():this.m_on=!1:this.m_on=!1}},{key:"render",value:function(){var t=[];return t.push(this.props.className),this.props.view?this.m_on&&t.push("on"):t.push("hide"),_.createElement("div",{className:t.join(" "),onClick:this._onClick},this.props.children,_.createElement("img",{className:"movieclip",src:this.props.video_url,ref:this._refImg,style:this.m_clipView?void 0:y.HIDE}),_.createElement("div",{className:"direction"}))}}])&&i(e.prototype,n),a&&i(e,a),c}(_.Component);l([f.observable],v.prototype,"m_on",void 0),l([f.observable],v.prototype,"m_clipView",void 0),l([f.action],v.prototype,"_off",void 0),v=l([m.observer],v),e.default=v},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HIDE_ANI=e.NONE=e.HIDE=void 0;e.HIDE={opacity:0,pointerEvents:"none"};e.HIDE_ANI={opacity:0,pointerEvents:"none",transitionProperty:"opacity",transitionDuration:"0.6s"};e.NONE={display:"none"}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=l(t);if(e){var o=l(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return c(this,n)}}function c(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var _=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var f=n(0),m=n(4),d=n(2),h=n(1),y=n(33),v=n(5),b=n(3),g=n(6),w=n(34),T=n(35),O=n(38),P=n(39),E=function(t){a(n,t);var e=u(n);function n(){var t;return i(this,n),(t=e.apply(this,arguments))._click=function(){t.props.onClick(t.props.idx)},t}return r(n,[{key:"render",value:function(){var t=this.props,e=t.idx,n=t.on,i=t.tab;if(["INTRODUCTION","SCRIPT"].includes(i))return f.createElement("span",{className:n?"on":"",onClick:this._click},e+1);if(["CONFIRM","ADDITIONAL","DICTATION"].includes(i)){var o="보충";return 1===e?o="기본":2===e&&(o="심화"),f.createElement("span",{className:n?"on":"",onClick:this._click},o)}return f.createElement("span",{className:n?"on":"",onClick:this._click},e+1)}}]),n}(f.Component),S=function(t){a(n,t);var e=u(n);function n(t){var o;i(this,n),(o=e.call(this,t)).m_player=new y.MPlayer(new y.MConfig(!0)),o.m_player_inittime=0,o.m_swiper=null,o.c_popup="off",o._title="COMPREHENSION",o._tab="INTRODUCTION",o._tab_save="INTRODUCTION",o._hint=!1,o._view=!1,o._curQidx=0,o._viewClue=!1,o._viewTrans=!1,o._viewScript=!0,o._letstalk=!1,o._viewQuiz=!0,o._roll="",o._shadowing=!1,o._focusIdx=-1,o._isShadowPlay=!1,o._qselected=[],o._selected=[],o._lastFocusIdx=-1,o._countdown=new w.TimerState(3),o._onPopupSend=function(t){var e=o.props,n=e.state;e.actions;if("Q&A"===o.c_popup){if("COMPREHENSION"!==o._title)return;if(n.qnaProg>0)return;n.qnaProg=1,b.App.pub_playToPad();g.sendPAD(10,{msgtype:"qna_send"}),m.delay((function(){"COMPREHENSION"===o._title&&1===n.qnaProg&&(n.qnaProg=2)}),300)}else if("ROLE PLAY"===o.c_popup){if("DIALOGUE"!==o._title)return;if(2!==n.dialogueProg)return;if(""!==o._roll||""===t)return;(o.m_player.currentTime!==o.m_player_inittime||o.m_player.currentTime<o.m_player_inittime)&&o.m_player.gotoAndPause(1e3*o.m_player_inittime),b.App.pub_playToPad(),o._lastFocusIdx=0,o._focusIdx=-1,o.m_player.setMuted(!1),o.m_player.setMutedTemp(!1);var i={msgtype:"roll_send",roll:t};g.sendPAD(10,i),m.delay((function(){"DIALOGUE"===o._title&&2===n.dialogueProg&&(o._roll=t)}),300)}else if("SHADOWING"===o.c_popup){if("DIALOGUE"!==o._title)return;if(2!==n.dialogueProg)return;if(o._shadowing)return;(o.m_player.currentTime!==o.m_player_inittime||o.m_player.currentTime<o.m_player_inittime)&&o.m_player.gotoAndPause(1e3*o.m_player_inittime),b.App.pub_playToPad(),o._lastFocusIdx=0,o._focusIdx=-1,o.m_player.setMuted(!1),o.m_player.setMutedTemp(!1);g.sendPAD(10,{msgtype:"shadowing_send"}),m.delay((function(){"DIALOGUE"===o._title&&2===n.dialogueProg&&(o._shadowing=!0)}),300)}o.props.actions.setNavi(!1,!1)},o._goToIntro=function(){alert("go to Intro page"),o.props.actions.gotoDirection()},o._clickTranslate=function(){"COMPREHENSION"===o._title&&"SCRIPT"===o._tab&&(b.App.pub_playBtnTab(),o._viewTrans=!o._viewTrans)},o._clickClue=function(){if("COMPREHENSION"===o._title&&"SCRIPT"===o._tab){b.App.pub_playBtnTab();var t={msgtype:o._viewClue?"view_clue":"hide_clue"};g.sendPAD(10,t),o._viewClue=!o._viewClue}},o._onPage=function(t){var e=o.props.actions;b.App.pub_stop(),b.App.pub_playBtnTab(),"COMPREHENSION"===o._title&&(o._curQidx=t,e.setNavi("INTRODUCTION"!==o._tab||0!==o._curQidx,!0),o._hint="SCRIPT"===o._tab)},o._clickCompre=function(t){var e=o.props.actions;"COMPREHENSION"!==o._title&&("A"===o._roll||"B"===o._roll||o._shadowing||(b.App.pub_stop(),b.App.pub_playBtnTab(),o.m_player.bPlay&&o.m_player.pause(),o._clearAll(),o._tab="INTRODUCTION",o._title="COMPREHENSION","INTRODUCTION"===o._tab&&0===o._curQidx&&e.setNavi(!1,!0)))},o._clickIntroduction=function(t){var e=o.props,n=e.actions,i=e.state,r=i.questionProg,a=i.qnaProg;"COMPREHENSION"===o._title&&"INTRODUCTION"!==o._tab&&(2===r||1===r||a>=1||(b.App.pub_playBtnTab(),o._hint=!1,o._tab="INTRODUCTION",i.scriptProg>0&&(i.scriptProg=0,g.sendPAD(0,null),n.clearQnaReturns()),0===o._curQidx&&n.setNavi(!1,!0)))},o._clickConfirm=function(t){var e=o.props.actions,n=o.props.state,i=n.questionProg,r=n.qnaProg;"COMPREHENSION"===o._title&&"CONFIRM"!==o._tab&&(2===i||1===i||r>=1||(b.App.pub_stop(),b.App.pub_playBtnTab(),o._hint=!1,o._tab="CONFIRM",e.setNavi(!0,!0)))},o._clickAdditional=function(t){var e=o.props.actions,n=o.props.state,i=n.questionProg,r=n.qnaProg;"COMPREHENSION"===o._title&&"ADDITIONAL"!==o._tab&&(2===i||1===i||r>=1||(b.App.pub_stop(),b.App.pub_playBtnTab(),o._hint=!1,o._tab="ADDITIONAL",e.setNavi(!0,!0)))},o._clickDictation=function(t){var e=o.props.actions,n=o.props.state,i=n.questionProg,r=n.qnaProg;"COMPREHENSION"===o._title&&"DICTATION"!==o._tab&&(2===i||1===i||r>=1||(b.App.pub_stop(),b.App.pub_playBtnTab(),o._hint=!1,o._tab="DICTATION",e.setNavi(!0,!0)))},o._clickScript=function(t){var e=o.props.actions,n=o.props.state,i=n.questionProg,r=n.qnaProg;"COMPREHENSION"===o._title&&"SCRIPT"!==o._tab&&(2===i||1===i||r>=1||(b.App.pub_stop(),b.App.pub_playBtnTab(),o._hint=!1,o._tab="SCRIPT",e.setNavi(!0,!0)))},o._clickReturn=function(){var t=o.props.actions;b.App.pub_playBtnTab(),"COMPREHENSION"===o._title&&"INTRODUCTION"===o._tab?g.startStudentReportProcess(6,t.getReturnUsersForQuiz()):g.startStudentReportProcess(6,t.getReturnUsers())},o._clickPerson=function(t){b.App.pub_playBtnTab();var e=o.props.actions.getResult()[o._curQidx];e&&(1===t?g.startStudentReportProcess(6,e.u1):2===t?g.startStudentReportProcess(6,e.u2):3===t&&g.startStudentReportProcess(6,e.u3))},o._clickAnswer=function(){var t=o.props,e=t.state,n=t.actions,i=e.questionProg;if("COMPREHENSION"===o._title&&"INTRODUCTION"===o._tab&&2===i){b.App.pub_playBtnTab();g.sendPAD(10,{msgtype:"quiz_end"}),n.quizComplete(),o.props.actions.setNavi(!0,!0)}},o._onPopupClosed=function(){var t=o.props,e=t.state,n=t.actions;"COMPREHENSION"===o._title&&"SCRIPT"===o._tab&&0===e.qnaProg?n.setNavi(!0,!0):"DIALOGUE"!==o._title||""!==o._roll||o._shadowing||n.setNavi(!0,!0),o.c_popup="off"},o._letstalkClosed=function(){o._letstalk=!1,o.props.actions.setNaviView(!0)},o.m_data=t.actions.getData(),o.m_player_inittime=o.m_data.video_start;for(var r=o.m_data.quizs,a=0;a<r.length;a++)o._qselected[a]=-1;return o.m_player.addOnPlayEnd((function(){o._lastFocusIdx=-1,o._focusIdx=-1,o.m_player.setMutedTemp(!1),o._sendDialogueEnd(),"DIALOGUE"===o._title&&(""!==o._roll||o._shadowing?"DIALOGUE"===o._title&&o._shadowing&&(o._isShadowPlay=!1):o.props.actions.setNavi(!0,!0))})),o.m_player.addOnState((function(t,e){var n={msgtype:o._shadowing?o._isShadowPlay?"playing":"paused":6!==t&&o.m_player.bPlay?"playing":"paused"};g.sendPAD(10,n)})),o}return r(n,[{key:"componentDidMount",value:function(){this.m_data=this.props.actions.getData();for(var t=this.m_data.quizs,e=0;e<t.length;e++)this._qselected[e]=-1}},{key:"_clearAll",value:function(){var t=this.props.actions;b.App.pub_stop(),this._title="COMPREHENSION",this._tab="INTRODUCTION";for(var e=this.m_data.quizs,n=0;n<e.length;n++)this._qselected[n]=-1;this._curQidx=0,this._hint=!1,this.c_popup="off",this._viewClue=!1,this._viewTrans=!1,this._viewScript=!0,this._roll="",this._isShadowPlay=!1,this._shadowing=!1,this._lastFocusIdx=-1,this._focusIdx=-1,t.setNavi(!0,!0),this.m_player.setMutedTemp(!1),(this.m_player.currentTime!==this.m_player_inittime||this.m_player.currentTime<this.m_player_inittime)&&this.m_player.gotoAndPause(1e3*this.m_player_inittime),t.init(),g.sendPAD(0,null)}},{key:"_sendFocusIdx",value:function(t){var e={msgtype:"focusidx",idx:t};g.sendPAD(10,e)}},{key:"_sendDialogueEnd",value:function(){g.sendPAD(10,{msgtype:"dialogue_end"})}},{key:"_setNavi",value:function(){var t=this,e=this.props,n=e.state,i=e.actions,o=n.questionProg,r=n.qnaProg;i.setNaviView(!0),0===this._curQidx&&"INTRODUCTION"===this._tab?i.setNavi(!1,!0):2===o?i.setNavi(0!==this._curQidx,this._curQidx!==this.m_data.quizs.length-1):i.setNavi(!0,!0),i.setNaviFnc((function(){if("COMPREHENSION"===t._title)"INTRODUCTION"===t._tab?0===t._curQidx?i.gotoDirection():(t._hint=!1,t._curQidx=t._curQidx-1,t._setNavi()):"CONFIRM"===t._tab?0===t._curQidx?(t._hint=!1,t._tab="INTRODUCTION",t._curQidx=t.m_data.quizs.length-1):(t._hint=!1,t._curQidx=t._curQidx-1,t._setNavi()):"ADDITIONAL"===t._tab?0===t._curQidx?(t._hint=!1,t._tab="CONFIRM",t._curQidx=t.m_data.quizs.length-1):(t._hint=!1,t._curQidx=t._curQidx-1,t._setNavi()):"DICTATION"===t._tab?0===t._curQidx?(t._hint=!1,t._tab="ADDITIONAL",t._curQidx=t.m_data.quizs.length-1):(t._hint=!1,t._curQidx=t._curQidx-1,t._setNavi()):"SCRIPT"===t._tab&&(0===t._curQidx?(t._hint=!1,t._tab="DICTATION",t._curQidx=t.m_data.quizs.length-1):(t._hint=!1,t._curQidx=t._curQidx-1,t._setNavi()));else{if("A"===t._roll||"B"===t._roll||t._shadowing)return;t.m_player.bPlay&&t.m_player.pause(),t._clearAll(),t._title="COMPREHENSION",t._tab="SCRIPT",t._curQidx=0}}),(function(){if("COMPREHENSION"===t._title)if("INTRODUCTION"===t._tab)if(t._curQidx===t.m_data.quizs.length-1){if(2===o||1===o||r>=1)return;t._hint=!1,t._tab="CONFIRM",t._curQidx=0}else t._hint=!1,t._curQidx=t._curQidx+1,t._setNavi();else if("CONFIRM"===t._tab)if(t._curQidx===t.m_data.quizs.length-1){if(2===o||1===o||r>=1)return;t._hint=!1,t._tab="ADDITIONAL",t._curQidx=0}else t._hint=!1,t._curQidx=t._curQidx+1,t._setNavi();else if("ADDITIONAL"===t._tab)if(t._curQidx===t.m_data.quizs.length-1){if(2===o||1===o||r>=1)return;t._hint=!1,t._tab="DICTATION",t._curQidx=0}else t._hint=!1,t._curQidx=t._curQidx+1,t._setNavi();else if("DICTATION"===t._tab)if(t._curQidx===t.m_data.quizs.length-1){if(2===o||1===o||r>=1)return;t._hint=!1,t._tab="SCRIPT",t._curQidx=0}else t._hint=!1,t._curQidx=t._curQidx+1,t._setNavi();else"SCRIPT"===t._tab&&t._curQidx!==t.m_data.quizs.length-1&&(t._hint=!1,t._curQidx=t._curQidx+1,t._setNavi());else i.gotoNextBook()}))}},{key:"componentDidUpdate",value:function(t){var e=this,n=this.props.view;n&&!t.view?(this._clearAll(),this._view=!0,this._setNavi(),this._letstalk=!1):!n&&t.view&&(this.c_popup="off",this._lastFocusIdx=-1,this._focusIdx=-1,this._roll="",this._isShadowPlay=!1,this._shadowing=!1,b.App.pub_stop(),this.m_player.bPlay&&this.m_player.pause(),this.m_player.setMuted(!1),this.m_player.setMutedTemp(!1),m.delay((function(){n||(e.m_player.seek(1e3*e.m_player_inittime),e._view=!1)}),300))}},{key:"render",value:function(){var t=this,e=this.props,n=e.state,i=e.actions,o=this.props.state,r=o.questionProg,a=o.qnaProg,s=o.numOfStudent,u=this.m_data.introduction,c=r>=3,l="COMPREHENSION"===this._title&&(1===r||2===r||a>=1)||"DIALOGUE"===this._title&&("A"===this._roll||"B"===this._roll||this._shadowing),p=i.getResult();c&&(s>0&&Math.round(100*p[this._curQidx].numOfCorrect/s));var _="COMPREHENSION"===this._title&&"INTRODUCTION"===this._tab,m="COMPREHENSION"===this._title&&"SCRIPT"===this._tab,d=_&&r>=2||m,h=_&&r>=2||m&&a>=2;return f.createElement("div",{className:"t_writing "+this._title,style:{}},f.createElement("div",{className:"close_box"},f.createElement(v.ToggleBtn,{className:"btn_intro",onClick:this._goToIntro})),f.createElement("div",{className:"btn_tabs"},f.createElement(v.ToggleBtn,{className:"btn_tab_introduction",onClick:this._clickIntroduction,on:"INTRODUCTION"===this._tab,disabled:"INTRODUCTION"===this._tab||l}),f.createElement(v.ToggleBtn,{className:"btn_tab_confirm",onClick:this._clickConfirm,on:"CONFIRM"===this._tab,disabled:"CONFIRM"===this._tab||l}),f.createElement(v.ToggleBtn,{className:"btn_tab_additional",onClick:this._clickAdditional,on:"ADDITIONAL"===this._tab,disabled:"ADDITIONAL"===this._tab||l}),f.createElement(v.ToggleBtn,{className:"btn_tab_dictation",onClick:this._clickDictation,on:"DICTATION"===this._tab,disabled:"DICTATION"===this._tab||l}),f.createElement(v.ToggleBtn,{className:"btn_tab_script",onClick:this._clickScript,on:"SCRIPT"===this._tab,disabled:"SCRIPT"===this._tab||l})),f.createElement("div",{className:"info_box"+(d?" on":"")},f.createElement("div",{className:"return_cnt_box white",style:{display:h?"":"none"},onClick:this._clickReturn},f.createElement("div",null,n.retCnt,"/",n.numOfStudent))),f.createElement("div",{className:"writing_content_box"},f.createElement("div",{className:"btn_page_box"},u.map((function(e,n){return f.createElement(E,{key:n,tab:t._tab,on:n===t._curQidx,idx:n,onClick:t._onPage})}))),f.createElement("div",{className:"question"+(n.questionProg>=3?" complete":""),style:{display:"INTRODUCTION"===this._tab?"":"none"}},u.map((function(e,n){return f.createElement("div",{key:n,style:{display:n===t._curQidx?"":"none"}},f.createElement(O.default,{view:t.props.view&&n===t._curQidx,data:e,onClosed:t._letstalkClosed}))})))),f.createElement(P.default,{type:this.c_popup,view:"Q&A"===this.c_popup||"ROLE PLAY"===this.c_popup||"SHADOWING"===this.c_popup,imgA:this.m_data.speakerA.image_l,imgB:this.m_data.speakerB.image_l,onSend:this._onPopupSend,onClosed:this._onPopupClosed}),f.createElement(T.default,{view:this._letstalk,data:this.m_data.letstalk,onClosed:this._letstalkClosed}))}}]),n}(f.Component);_([h.observable],S.prototype,"c_popup",void 0),_([h.observable],S.prototype,"_title",void 0),_([h.observable],S.prototype,"_tab",void 0),_([h.observable],S.prototype,"_hint",void 0),_([h.observable],S.prototype,"_view",void 0),_([h.observable],S.prototype,"_curQidx",void 0),_([h.observable],S.prototype,"_viewClue",void 0),_([h.observable],S.prototype,"_viewTrans",void 0),_([h.observable],S.prototype,"_viewScript",void 0),_([h.observable],S.prototype,"_letstalk",void 0),_([h.observable],S.prototype,"_viewQuiz",void 0),_([h.observable],S.prototype,"_roll",void 0),_([h.observable],S.prototype,"_shadowing",void 0),_([h.observable],S.prototype,"_focusIdx",void 0),_([h.observable],S.prototype,"_isShadowPlay",void 0),_([h.observable],S.prototype,"_qselected",void 0),S=_([d.observer],S),e.default=S},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var s=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var u=t.length-1;u>=0;u--)(o=t[u])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0}),e.MPRState=e.MConfig=e.MPlayer=void 0;var u,c,l,p,_,f,m,d=n(1);!function(t){t.STRETCH="stretch",t.LETTERBOX="letterbox"}(u||(u={})),function(t){t.NONE="none",t.METADATA="metadata",t.AUTO="auto"}(c||(c={})),function(t){t.ORGIN="origin",t.TRANS="trans",t.ALL="all",t.NONE="none"}(l||(l={})),function(t){t[t.UNINITIALIZED=0]="UNINITIALIZED",t[t.LOADING=1]="LOADING",t[t.PLAYBACK_ERROR=2]="PLAYBACK_ERROR",t[t.READY=3]="READY",t[t.STANDBY=4]="STANDBY",t[t.BUFFERING=5]="BUFFERING",t[t.PAUSED=6]="PAUSED",t[t.PLAYING=7]="PLAYING"}(p||(p={})),e.MPRState=p,function(t){t[t.UNSET=-1]="UNSET",t[t.CAN_NOT_ALL_DIR=1]="CAN_NOT_ALL_DIR",t[t.CAN_NOT_NEXT_DIR=2]="CAN_NOT_NEXT_DIR",t[t.CAN_ALL_DIR=10]="CAN_ALL_DIR"}(_||(_={})),function(t){t[t.HAVE_NOTHING=0]="HAVE_NOTHING",t[t.HAVE_METADATA=1]="HAVE_METADATA",t[t.HAVE_CURRENT_DATA=2]="HAVE_CURRENT_DATA",t[t.HAVE_FUTURE_DATA=3]="HAVE_FUTURE_DATA",t[t.HAVE_ENOUGH_DATA=4]="HAVE_ENOUGH_DATA"}(f||(f={})),function(t){t[t.NETWORK_EMPTY=0]="NETWORK_EMPTY",t[t.NETWORK_IDLE=1]="NETWORK_IDLE",t[t.NETWORK_LOADING=2]="NETWORK_LOADING",t[t.NETWORK_NO_SOURCE=3]="NETWORK_NO_SOURCE"}(m||(m={}));var h=function(){function t(e){i(this,t),this.defaultVolume=100,this.lenOfFvlToFile=25165824,this.sections=[],this.isVideo=e,this.autoPlay=!1,this.controlBox=!0,this.typeOfPosByMouse=10,this.loop=1,this.preload="auto",this.scaleMode="stretch",this.bgColor=-1,this.initTime=0,this.startTime=0,this.endTime=0,this.chkTime=250,this.playBtn=!0,this.closeBtn=!1,this.popupBtn=!1,this.fullscreenBtn=!0,this.volumeBtn=!0,this.centerPlayBtn=!0,this.centerLoading=!0,this.mousePlayPause=!0,this.bDoFullscreen=!0,this.volumeBox=!0,this.speedBtn=!1,this.scroller=!0,this.togglePlayBtn=!0,this.autoBtn=!1,this.langBtn=!1,this.menuOverlap=!0,this.haveScript=!1,this.viewScriptBox=!1,this.bScriptBtn=!1,this.scriptViewLang="none",this.etcData=""}return r(t,[{key:"isLoadControls",value:function(t){return this.controlBox||t&&(this.centerPlayBtn||this.centerLoading||this.viewScriptBox)}},{key:"pcGetURL",value:function(t){return t}},{key:"clone",value:function(){var e=new t(this.isVideo);return e.copy(this),e}},{key:"copy",value:function(t){this.autoPlay=t.autoPlay,this.controlBox=t.controlBox,this.typeOfPosByMouse=t.typeOfPosByMouse,this.loop=t.loop,this.preload=t.preload,this.scaleMode=t.scaleMode,this.bgColor=t.bgColor,this.initTime=t.initTime,this.startTime=t.startTime,this.endTime=t.endTime,this.chkTime=t.chkTime,this.playBtn=t.playBtn,this.closeBtn=t.closeBtn,this.popupBtn=t.popupBtn,this.fullscreenBtn=t.fullscreenBtn,this.volumeBtn=t.volumeBtn,this.centerPlayBtn=t.centerPlayBtn,this.centerLoading=t.centerLoading,this.mousePlayPause=t.mousePlayPause,this.volumeBox=t.volumeBox,this.speedBtn=t.speedBtn,this.scroller=t.scroller,this.togglePlayBtn=t.togglePlayBtn,this.autoBtn=t.autoBtn,this.langBtn=t.langBtn,this.menuOverlap=t.menuOverlap,this.haveScript=t.haveScript,this.viewScriptBox=t.viewScriptBox,this.bScriptBtn=t.bScriptBtn,this.scriptViewLang=t.scriptViewLang,this.defaultVolume=t.defaultVolume,this.etcData=t.etcData}},{key:"isMobile",get:function(){return!1}},{key:"iskdmPC",get:function(){return!1}}]),t}();e.MConfig=h;var y=function(){function t(e){i(this,t),this.m_media=null,this.m_url=null,this.m_startTime=0,this.m_endTime=0,this.m_maxTime=0,this.m_seekTime=-1,this.m_onTimer=-1,this.m_playEnded=!1,this.m_standBy=!1,this.m_bPlay_temp=!1,this.m_startTime_temp=-1,this.m_endTime_temp=-1,this.m_loop_temp=-1,this.m_loopCnt_temp=-1,this.m_onstates=[],this.m_ontimes=[],this.m_onends=[],this.m_onendtemps=[],this.m_bPlay=!1,this.m_myState=0,this.m_duration=0,this.m_currentTime=0,this.m_viewTime=0,this.fullscreen=!1,this.m_muted=!1,this.m_config=e,this.m_bPlay=e.autoPlay,this.m_startTime=e.startTime,this.m_endTime=e.endTime,this.mediaInited=this.mediaInited.bind(this),this._onTime=this._onTime.bind(this)}return r(t,[{key:"setStartEndTime",value:function(t,e){this.m_startTime=t,this.m_endTime=e}},{key:"setMuted",value:function(t){this.m_muted=t,this.m_media&&(this.m_media.muted=t)}},{key:"setMutedTemp",value:function(t){this.m_media&&(this.m_media.muted=t)}},{key:"_initTemp",value:function(){this.m_standBy=!1,this.m_bPlay_temp=!1,this.m_startTime_temp=-1,this.m_endTime_temp=-1,this.m_loop_temp=-1,this.m_loopCnt_temp=0}},{key:"play",value:function(){this.m_bPlay=!0,this._initTemp(),this.m_playEnded&&this.m_media&&this.m_myState>=3&&(this.m_media.currentTime=this.m_startTime/1e3),this.m_playEnded=!1,this._playOrPause()}},{key:"pause",value:function(){this.m_bPlay=!1,this._initTemp(),this._playOrPause()}},{key:"start",value:function(){this.seek(0),this.play()}},{key:"seek",value:function(t){if(!this.m_media||this.m_myState<3)this.m_seekTime=t;else{if(this._initTemp(),this.m_seekTime=-1,isNaN(t)||t<0)t=0;else if(t>=this.m_duration-100)return t=this.m_duration,void this._playEnded();this.m_playEnded=!1,this.m_media.currentTime=(this.m_startTime+t)/1e3,this._onTimeUpdate(),this.m_viewTime=this.m_currentTime}}},{key:"gotoAndPlay",value:function(t,e,n){if(this.m_standBy=!1,!this.m_media||this.m_duration<=0)return this._load(),this.m_bPlay_temp=!0,this.m_startTime_temp=t,this.m_endTime_temp=e,void(this.m_loop_temp=n);this.m_playEnded=!1,this.m_bPlay_temp=!1,this.m_startTime_temp=t,this.m_endTime_temp=e,t=t>=0?t:this.currentTime,e=e>=0&&e<this.m_duration?e:this.m_duration,this.m_bPlay=!0,t>=e||n<=0?(this.m_startTime_temp=-1,this.m_endTime_temp=-1,this.m_loop_temp=-1,this.m_loopCnt_temp=0):(this.m_endTime_temp>=this.m_duration&&(this.m_endTime_temp=-1),this.m_loop_temp=n,this.m_loopCnt_temp=0,this.m_startTime_temp>=0&&(this.m_media.currentTime=(t+this.m_startTime)/1e3,this._onTimeUpdate(),this.m_viewTime=this.m_currentTime)),this._playOrPause()}},{key:"gotoAndPause",value:function(t){this.m_bPlay=!1,this._initTemp(),this.m_media&&(t=t>=0&&t<this.m_duration?t:this.currentTime,this.m_media.currentTime=(t+this.m_startTime)/1e3,this._onTimeUpdate(),this.m_viewTime=this.m_currentTime,this._playOrPause())}},{key:"connect",value:function(){if(this.m_media){this.m_media;this.m_url&&this.m_myState>=1&&3===this.m_media.networkState&&0===this.m_media.readyState&&(this.m_media.src=this.m_url,this.m_media.load())}}},{key:"unconnect",value:function(){this.m_media&&(this.m_media.paused||this.m_media.pause(),this.m_myState>=1&&(this.m_myState>=3&&(this.m_seekTime=1e3*this.m_media.currentTime-this.m_startTime),this.m_media.src="",this.m_media.load()))}},{key:"_load",value:function(){this.m_media&&this.m_url&&this.m_myState<1&&(this._setState(1),this.m_media.src=this.m_url,this.m_media.load())}},{key:"load",value:function(t){this.m_url=t,this._load()}},{key:"unload",value:function(){this.m_media&&(this.m_media.paused||this.m_media.pause(),this.m_myState>=1&&(this.m_media.src="",this.m_media.load())),this.m_url=null,this.m_bPlay=!1,this.m_bPlay_temp=!1,this.m_startTime=0,this.m_endTime=0,this.m_maxTime=0,this.m_seekTime=-1,this.m_onTimer=-1,this.m_playEnded=!1,this.m_standBy=!1,this.m_bPlay_temp=!1,this.m_startTime_temp=-1,this.m_endTime_temp=-1,this.m_loop_temp=-1,this.m_loopCnt_temp=-1,this.m_duration=0,this.m_currentTime=0,this.m_viewTime=0,this.fullscreen=!1,this.m_muted=!1,this._setState(0)}},{key:"_setState",value:function(t){if(this.m_myState!==t){7===t?this.m_onTimer<0&&(this.m_onTimer=window.requestAnimationFrame(this._onTime)):6===t&&this.m_onTimer>=0&&(window.cancelAnimationFrame(this.m_onTimer),this.m_onTimer=-1);var e=this.m_myState;this.m_myState=t;for(var n=0,i=this.m_onstates.length;n<i;n++)this.m_onstates[n](t,e)}}},{key:"_playOrPause",value:function(){var t=this;if(this.m_media&&!(this.m_myState<3))if(this.m_bPlay){if(this._setState(7),this.m_media.paused){var e=this.m_media.play();e&&e.then((function(e){!t.m_media||t.m_bPlay||t.m_media.paused||t.m_media.pause()})).catch((function(e){!t.m_media||t.m_bPlay||t.m_media.paused||t.m_media.pause()}))}}else this._setState(6),this.m_media.paused||this.m_media.pause()}},{key:"_onTimeUpdate",value:function(){if(this.m_media){var t=1e3*this.m_media.currentTime;if(this.m_loop_temp>0&&this.m_bPlay)if(t<this.m_startTime)t=this.m_startTime;else if(this.m_endTime_temp>0&&t>=this.m_endTime_temp+this.m_startTime){this.m_currentTime=this.m_endTime_temp,this.m_viewTime=this.m_currentTime;for(var e=0,n=this.m_ontimes.length;e<n;e++)this.m_ontimes[e](this.m_currentTime);this._playEnded()}else{this.m_currentTime=t-this.m_startTime;for(var i=0,o=this.m_ontimes.length;i<o;i++)this.m_ontimes[i](this.m_currentTime)}else if(t<this.m_startTime)t=this.m_startTime;else{if(this.m_endTime>0&&t>=this.m_endTime){this.m_currentTime=this.m_endTime-this.m_startTime,this.m_viewTime=this.m_currentTime;for(var r=0,a=this.m_ontimes.length;r<a;r++)this.m_ontimes[r](this.m_currentTime);return void this._playEnded()}this.m_currentTime=t-this.m_startTime;for(var s=0,u=this.m_ontimes.length;s<u;s++)this.m_ontimes[s](this.m_currentTime)}}}},{key:"_playEnded",value:function(){if(this.m_media&&!this.m_playEnded)if(this.m_loop_temp>0&&this.m_bPlay){if(this.m_loopCnt_temp++,this.m_endTime_temp<=0){this.m_bPlay=!1;for(var t=0,e=this.m_onends.length;t<e;t++)this.m_onends[t]()}if(this.m_loopCnt_temp<this.m_loop_temp){var n=this.m_startTime_temp>=0&&this.m_startTime_temp<this.m_duration?this.m_startTime_temp:0;this.m_media.currentTime=(n+this.m_startTime)/1e3,this.m_media.paused&&this.m_media.play()}else{this.m_media.paused||this.m_media.pause(),this.m_bPlay=!1;for(var i=0,o=this.m_onendtemps.length;i<o;i++)this.m_onendtemps[i]()}}else{for(var r=0,a=this.m_onends.length;r<a;r++)this.m_onends[r]();0===this.m_config.loop&&this.m_bPlay?(this.m_media.currentTime=this.m_startTime/1e3,this.m_media.paused&&this.m_media.play()):(this.m_playEnded=!0,this.m_bPlay=!1,this.m_media.paused||this.m_media.pause(),1e3*this.m_media.currentTime<this.m_maxTime-100&&(this.m_media.currentTime=this.m_maxTime/1e3),this.m_currentTime=this.m_maxTime-this.m_startTime,this.m_viewTime=this.m_currentTime,this._setState(6))}}},{key:"reset",value:function(){}},{key:"_onTime",value:function(t){this.m_onTimer>=0&&(this._onTimeUpdate(),this.m_onTimer=window.requestAnimationFrame(this._onTime))}},{key:"mediaInited",value:function(t){var e=this;if(!this.m_media&&t){this.m_media=t;var n=function(n){if(e.m_media){e.m_config;t.duration>0&&(e.m_maxTime<=0?(e.m_maxTime=1e3*t.duration,e.m_endTime>=e.m_maxTime?e.m_endTime=0:e.m_endTime>0&&(e.m_maxTime=e.m_endTime),(e.m_startTime<0||e.m_startTime>=e.m_maxTime)&&(e.m_startTime=0),e.m_duration=e.m_maxTime-e.m_startTime,e.m_bPlay_temp?(e._setState(3),e.gotoAndPlay(e.m_startTime_temp,e.m_endTime_temp,e.m_loop_temp)):e.m_seekTime>0&&e.m_seekTime<e.m_duration?(e._setState(3),e.m_media.currentTime=(e.m_seekTime+e.m_startTime)/1e3):0===e.m_startTime?(e._setState(3),e._playOrPause()):e.m_media.currentTime=e.m_startTime/1e3,e.m_seekTime=-1):e.m_seekTime>=0&&(e.m_seekTime<e.m_duration&&(e.m_media.currentTime=(e.m_seekTime+e.m_startTime)/1e3),e.m_seekTime=-1))}};t.onabort=function(t){console.log("onabort")},t.oncanplay=n,t.oncanplaythrough=n,t.ondurationchange=n,t.onloadeddata=n,t.onloadedmetadata=n,t.onerror=function(t){1===e.m_myState&&e._setState(2)},t.onended=function(t){e.m_media&&(e.m_maxTime<=0||e.m_myState<3||e._playEnded())},t.onpause=function(t){e.m_media&&(e.m_maxTime<=0||e.m_myState<3||e._setState(6))},t.onplaying=function(t){e.m_media&&(e.m_maxTime<=0||e.m_myState<3||!e.m_bPlay?e.m_media.paused||e.m_media.pause():e._setState(7))},t.onseeking=function(t){!e.m_media||e.m_maxTime<=0||e.m_myState>=3&&e._setState(5)},t.onseeked=function(t){if(e.m_media&&!(e.m_maxTime<=0))if(e.m_myState>=3)e._playOrPause();else if(e.m_myState<3&&e.m_startTime>0){Math.abs(e.m_startTime-1e3*e.m_media.currentTime)<100?(e._setState(3),e._playOrPause()):e.m_media.currentTime=e.m_startTime/1e3}},t.ontimeupdate=function(t){e.m_myState<=2||(e._onTimeUpdate(),e.m_viewTime=e.m_currentTime)},this._load()}}},{key:"addOnState",value:function(t){this.m_onstates.indexOf(t)>=0||this.m_onstates.push(t)}},{key:"removeOnState",value:function(t){var e=this.m_onstates.indexOf(t);e<0||this.m_onstates.splice(e,1)}},{key:"addOnTime",value:function(t){this.m_ontimes.indexOf(t)>=0||this.m_ontimes.push(t)}},{key:"removeOnTime",value:function(t){var e=this.m_ontimes.indexOf(t);e<0||this.m_ontimes.splice(e,1)}},{key:"addOnPlayEnd",value:function(t){this.m_onends.indexOf(t)>=0||this.m_onends.push(t)}},{key:"removeOnPlayEnd",value:function(t){var e=this.m_onends.indexOf(t);e<0||this.m_onends.splice(e,1)}},{key:"addOnPlayEndTemp",value:function(t){this.m_onendtemps.indexOf(t)>=0||this.m_onendtemps.push(t)}},{key:"removeOnPlayEndTemp",value:function(t){var e=this.m_onendtemps.indexOf(t);e<0||this.m_onendtemps.splice(e,1)}},{key:"bPlay",get:function(){return this.m_bPlay}},{key:"myState",get:function(){return this.m_myState}},{key:"duration",get:function(){return this.m_duration}},{key:"muted",get:function(){return this.m_muted}},{key:"viewTime",get:function(){return this.m_viewTime}},{key:"media",get:function(){return this.m_media}},{key:"config",get:function(){return this.m_config}},{key:"currentTime",get:function(){return this.m_currentTime}}]),t}();s([d.observable],y.prototype,"m_bPlay",void 0),s([d.observable],y.prototype,"m_myState",void 0),s([d.observable],y.prototype,"m_duration",void 0),s([d.observable],y.prototype,"m_viewTime",void 0),s([d.observable],y.prototype,"fullscreen",void 0),s([d.observable],y.prototype,"m_muted",void 0),s([d.computed],y.prototype,"bPlay",null),s([d.computed],y.prototype,"myState",null),s([d.computed],y.prototype,"duration",null),s([d.computed],y.prototype,"muted",null),s([d.computed],y.prototype,"viewTime",null),e.MPlayer=y},function(t,e,n){"use strict";function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function r(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=s(t);if(e){var o=s(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return a(this,n)}}function a(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function l(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var _=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.CountDown2=e.Timer=e.TimerState=void 0;var f,m=n(0),d=n(1),h=n(2),y=n(4),v=n(3);!function(t){t[t.INIT=0]="INIT",t[t.RUNNING=1]="RUNNING",t[t.PAUSE=2]="PAUSE"}(f||(f={}));var b=function(){function t(e){var n=this;u(this,t),this.m_runState=0,this.m_max=60,this.m_playSound=!0,this.start=function(){n.m_runState=1},this.reset=function(){n.m_runState=0},this.pause=function(){n.m_runState=2},this.m_max=e}return l(t,[{key:"setPlaySound",value:function(t){this.m_playSound=t}},{key:"setMax",value:function(t){this.m_max=t}},{key:"runState",get:function(){return this.m_runState}},{key:"isRunning",get:function(){return 1===this.m_runState}},{key:"max",get:function(){return this.m_max}},{key:"playSound",get:function(){return this.m_playSound}}]),t}();function g(t,e,n,i){var o=(i-90)*Math.PI/180;return{x:t+n*Math.cos(o),y:e+n*Math.sin(o)}}function w(t,e,n,i,o){var r;if(o-i>=360)r=["M",t,e,"m",-n,0,"a",n,n,0,"1",0,2*n,0,"a",n,n,0,"1",0,2*-n,0].join(" ");else{var a=o-i<=180?"0":"1",s=g(t,e,n,o),u=g(t,e,n,i);r=["M",s.x,s.y,"A",n,n,0,a,0,u.x,u.y,"L",t,e,"L",s.x,s.y].join(" ")}return r}_([d.observable],b.prototype,"m_runState",void 0),_([d.computed],b.prototype,"runState",null),_([d.observable],b.prototype,"m_max",void 0),_([d.computed],b.prototype,"max",null),_([d.action],b.prototype,"start",void 0),_([d.action],b.prototype,"reset",void 0),_([d.action],b.prototype,"pause",void 0),e.TimerState=b;var T=function(t){i(n,t);var e=r(n);function n(t){var i;return u(this,n),(i=e.call(this,t)).m_runState=0,i.m_sec=0,i.m_stime=0,i.m_text="",i.m_d="",i._start=function(){i.m_sec=i.props.state.max,i.m_text=i._getTime(i.m_sec),i.m_d="",i.m_stime=Date.now(),i._run(0),i.props.onStart&&i.props.onStart()},i._run=function(t){if(i.props&&1===i.m_runState){var e=i.props.state.max,n=Date.now()-i.m_stime,o=e-Math.floor(n/1e3);i.m_sec!==o&&(i.m_text=i._getTime(o),0===o?i.props.state.playSound&&v.App.pub_playDingend():o<5?i.props.state.playSound&&v.App.pub_playDing():o>=5&&o<=10&&i.props.state.playSound&&v.App.pub_playClock()),i.m_sec=o,o>0?(i._drawArc(n),window.requestAnimationFrame(i._run)):(i._drawArc.cancel(),i.m_d=w(32,32,32,0,360),i.props.onComplete())}},i.m_text=i._getTime(i.props.state.max),i.m_d="",d.autorun((function(){if(i.props){var t=i.props.state,e=t.max;1===t.runState&&1!==i.m_runState?(i.m_runState=1,i._start()):0===t.runState&&(i.m_text=i._getTime(e),i.m_d=""),i.m_runState=t.runState}})),i._drawArc=y.throttle((function(t){if(i.props&&1===i.m_runState){var e=1e3*i.props.state.max,n=0;if(i.m_sec<=5){var o=t%1e3;n=0===t?0:0===o?1:o/1e3}else n=t/e;n*=360,i.m_d=w(32,32,32,0,n)}}),50,{trailing:!0}),i}return l(n,[{key:"_getTime",value:function(t){var e=Math.floor(t/60),n=t%60,i="";return i=e<10?"0"+e:""+e,i=n<10?i+":0"+n:i+":"+n}},{key:"render",value:function(){var t=this.m_sec<=5?"#f00":"#ff0";return m.createElement("div",{className:"q_timer",hidden:!this.props.view},m.createElement("svg",{width:64,height:64,viewBox:"0 0 64 64"},m.createElement("path",{fill:t,d:this.m_d})),m.createElement("div",{className:"m_text"},this.m_text))}}]),n}(m.Component);_([d.observable],T.prototype,"m_text",void 0),_([d.observable],T.prototype,"m_d",void 0),T=_([h.observer],T),e.Timer=T;var O=-.5*Math.PI,P=function(t){i(n,t);var e=r(n);function n(t){var i;return u(this,n),(i=e.call(this,t)).m_runState=0,i.m_sec=0,i.m_stime=0,i.m_r=0,i.m_view=!1,i._start=function(){i.m_sec=i.props.state.max,i.m_stime=Date.now(),i._run(0),i.props.onStart&&i.props.onStart()},i._run=function(t){if(i.props&&1===i.m_runState){var e=Date.now()-i.m_stime,n=i.props.state.max-Math.floor(e/1e3);i.m_sec!==n&&(i.m_sec=n,0===n?(i.props.state.playSound&&v.App.pub_playDingend(),i.props.onComplete()):n<=5&&i.props.state.playSound&&v.App.pub_playDing()),n>0?(i._drawArc(e%1e3),window.requestAnimationFrame(i._run)):i._drawArc(1e3)}},i._refCanvas=function(t){!i.m_canvas&&t&&(i.m_canvas=t,i.m_r=t.width/2,i.m_ctx=t.getContext("2d"))},i._onTransEnd=function(){i.props.view||(i.m_view=!1)},i.m_sec=i.props.state.max,i.m_view=t.view,d.autorun((function(){if(i.props){var t=i.props.state;if(1===t.runState&&1!==i.m_runState)i.m_runState=1,i._start();else if(0===t.runState&&0!==i.m_runState&&(i.m_sec=t.max,i.m_ctx)){var e=i.m_r;i.m_ctx.clearRect(0,0,2*e,2*e)}i.m_runState=t.runState}})),i._drawArc=y.throttle((function(t){if(i.m_canvas&&i.props&&1===i.m_runState){var e=2*Math.PI*t/1e3,n=i.m_r;i.m_ctx.clearRect(0,0,2*n,2*n),i.m_ctx.beginPath(),i.m_ctx.fillStyle="#5538EB",i.m_ctx.moveTo(n,n),i.m_ctx.arc(n,n,n,O,e+O),i.m_ctx.fill()}}),50),i}return l(n,[{key:"componentDidUpdate",value:function(t){t.view!==this.props.view&&this.props.view&&(this.m_view=!0)}},{key:"render",value:function(){return m.createElement("div",{className:"countdown2 "+(this.m_view?"":"hide")},m.createElement("div",{className:"countdown "+(this.props.view?"view":"hide"),onTransitionEnd:this._onTransEnd},m.createElement("canvas",{width:"206px",height:"206px",ref:this._refCanvas}),m.createElement("div",null,m.createElement("div",null,this.m_sec))))}}]),n}(m.Component);_([d.observable],P.prototype,"m_sec",void 0),_([d.observable],P.prototype,"m_view",void 0),P=_([h.observer],P),e.CountDown2=P},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function r(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=s(t);if(e){var o=s(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return a(this,n)}}function a(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var c=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var l=n(0),p=n(4),_=n(2),f=n(1),m=n(5),d=n(3),h=n(9),y=n(36),v=n(37),b=n(11),g=n(12).default,w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(u,t);var e,n,a,s=r(u);function u(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=s.call(this,t))._view=!1,e._hint=!1,e._zoom=!1,e._zoomImgUrl="",e._soption={direction:"vertical",observer:!0,slidesPerView:"auto",freeMode:!0,mousewheel:!0,noSwiping:!1,followFinger:!0,scrollbar:{el:".swiper-scrollbar",draggable:!0,hide:!1}},e._viewHint=function(){d.App.pub_playBtnTab(),e._hint=!e._hint,e._swiper&&(e._swiper.slideTo(0,0),e._swiper.update(),e._swiper.scrollbar&&e._swiper.scrollbar.updateSize()),p.delay((function(){e._swiper&&(e._swiper.slideTo(0,0),e._swiper.update(),e._swiper.scrollbar&&e._swiper.scrollbar.updateSize())}),300)},e._refSwiper=function(t){!e._swiper&&t&&(e._swiper=t.swiper)},e._onClosepop=function(){d.App.pub_playBtnTab(),e._view=!1},e._refAudio=function(t){!e._btnAudio&&t&&(e._btnAudio=t)},e._onClick=function(){e._btnAudio&&e._btnAudio.toggle()},e._clickZoom1=function(){e._view&&(d.App.pub_playBtnTab(),e._zoomImgUrl=d.App.data_url+e.props.data.img1,e._zoom=!0)},e._clickZoom2=function(){e._view&&(d.App.pub_playBtnTab(),e._zoomImgUrl=d.App.data_url+e.props.data.img2,e._zoom=!0)},e._closedZoom=function(){e._zoom=!1,e._zoomImgUrl=""},e._jsx_sentence=b._getJSX(t.data.sentence),e._jsx_sample=b._getBlockJSX(t.data.sample),e._jsx_hint=b._getJSX(t.data.hint);var n=Math.floor(3*Math.random());return e._character=0===n?"/content/digenglish_lib/B/ls_writing/teacher/images/letstalk_bear.png":1===n?"/content/digenglish_lib/B/ls_writing/teacher/images/letstalk_boy.png":"/content/digenglish_lib/B/ls_writing/teacher/images/letstalk_girl.png",e}return e=u,(n=[{key:"componentDidUpdate",value:function(t){var e=this;this.props.view&&!t.view?(this._view=!0,this._hint=!1,this._zoom=!1,this._zoomImgUrl="",this._swiper&&(this._swiper.slideTo(0,0),this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize()),p.delay((function(){e._swiper&&(e._swiper.slideTo(0,0),e._swiper.update(),e._swiper.scrollbar&&e._swiper.scrollbar.updateSize())}),300)):!this.props.view&&t.view&&(this._view=!1,this._zoom=!1,this._zoomImgUrl="",d.App.pub_stop())}},{key:"render",value:function(){var t=this.props,e=(t.view,t.onClosed),n=t.data,i=n.img2&&""!==n.img2?l.createElement("img",{src:d.App.data_url+n.img2,draggable:!1}):void 0;return d.App.data_url,n.img1,l.createElement(l.Fragment,null,l.createElement(h.CoverPopup,{className:"lets_talk",view:this._view,onClosed:e},l.createElement("div",{className:"pop_bg"},l.createElement(m.ToggleBtn,{className:"btn_letstalk_close",onClick:this._onClosepop}),l.createElement(m.ToggleBtn,{className:"btn_hint",on:this._hint,onClick:this._viewHint}),l.createElement("div",{className:"popbox"},l.createElement("div",{className:"image_box"},l.createElement("img",{src:d.App.data_url+n.img1,draggable:!1}),i,l.createElement(m.ToggleBtn,{className:"btn_zoom1"+(void 0!==i?" notonly":""),onClick:this._clickZoom1}),l.createElement(m.ToggleBtn,{className:"btn_zoom2",onClick:this._clickZoom2,view:void 0!==i})),l.createElement("div",{className:"sentence_box"},l.createElement("div",null,l.createElement(y.BtnAudio,{className:"btn_audio",url:d.App.data_url+n.audio,ref:this._refAudio}),l.createElement("div",{className:"question_box",onClick:this._onClick},this._jsx_sentence))),l.createElement("div",{className:"speechbubble_box"},l.createElement("div",null,l.createElement("div",{className:"char_box"},l.createElement("img",{src:this._character,draggable:!1})),l.createElement("div",{className:"balloon"+(this._hint?" view-hint":"")},l.createElement(g,Object.assign({},this._soption,{ref:this._refSwiper}),l.createElement("div",null,l.createElement("div",{className:"sample"+(this._hint?" hide":"")},this._jsx_sample),l.createElement("div",{className:"hint"+(this._hint?"":" hide")},this._jsx_hint))))))))),l.createElement(v.default,{url:this._zoomImgUrl,view:this._zoom,onClosed:this._closedZoom}))}}])&&i(e.prototype,n),a&&i(e,a),u}(l.Component);c([f.observable],w.prototype,"_view",void 0),c([f.observable],w.prototype,"_hint",void 0),c([f.observable],w.prototype,"_zoom",void 0),c([f.observable],w.prototype,"_zoomImgUrl",void 0),w=c([_.observer],w),e.default=w},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=c(t);if(e){var o=c(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?u(t):e}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var p=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},_=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{u(i.next(t))}catch(t){r(t)}}function s(t){try{u(i.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.BtnAudio=void 0;var f=n(0),m=n(5),d=n(7),h=n(1),y=n(2),v=n(3),b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}(l,t);var e,n,s,c=a(l);function l(){var t;return i(this,l),(t=c.apply(this,arguments))._playing=!1,t._nPlay=0,t.toggle=function(){t._onDown()},t._onPlay=function(){t._playing=!0,t.props.onPlay&&t.props.onPlay(),v.App.pub_play(t.props.url,t._onPlayEnd)},t._onPlayEnd=function(e){return _(u(t),void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this._nPlay>0)){t.next=8;break}if(this._nPlay=this._nPlay-1,!(this._nPlay>0)){t.next=8;break}return this._playing=!1,t.next=6,d.wait(500);case 6:return this._nPlay>0&&this._onPlay(),t.abrupt("return");case 8:this._playing&&(this._playing=!1,this.props.onStop&&this.props.onStop());case 9:case"end":return t.stop()}}),t,this)})))},t._onDown=function(){t.props.disabled||(t._playing?(t._playing=!1,v.App.pub_stop(),t.props.onStop&&t.props.onStop()):(t._playing=!0,t.props.onPlay&&t.props.onPlay(),v.App.pub_play(t.props.url,t._onPlayEnd)))},t}return e=l,(n=[{key:"componentWillUnmount",value:function(){this._nPlay=0,this._playing&&(this._playing=!1,v.App.pub_stop())}},{key:"componentDidUpdate",value:function(t){this.props.nPlay!==t.nPlay&&(this._nPlay=this.props.nPlay?this.props.nPlay:0,this._nPlay>0&&!this._playing&&this._onPlay())}},{key:"render",value:function(){return f.createElement(m.ToggleBtn,{className:this.props.className,view:this.props.view,on:this._playing,disabled:this.props.disabled,onMouseDown:this._onDown})}}])&&o(e.prototype,n),s&&o(e,s),l}(f.Component);p([h.observable],b.prototype,"_playing",void 0),b=p([y.observer],b),e.BtnAudio=b},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=u(t);if(e){var o=u(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var l=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var p=n(0),_=n(2),f=n(1),m=n(5),d=n(3),h=n(9),y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}(c,t);var e,n,s,u=a(c);function c(){var t;return i(this,c),(t=u.apply(this,arguments)).m_view=!1,t._onClose=function(){d.App.pub_playBtnTab(),t.m_view=!1},t}return e=c,(n=[{key:"componentDidUpdate",value:function(t){this.props.view&&!t.view?this.m_view=!0:!this.props.view&&t.view&&(this.m_view=!1)}},{key:"render",value:function(){return p.createElement(h.CoverPopup,{className:"img_popup",view:this.m_view,onClosed:this.props.onClosed},p.createElement("div",null,p.createElement("img",{src:this.props.url}),p.createElement(m.ToggleBtn,{className:"btn_zoom",onClick:this._onClose})))}}])&&o(e.prototype,n),s&&o(e,s),c}(p.Component);l([f.observable],y.prototype,"m_view",void 0),y=l([_.observer],y),e.default=y},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function r(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=s(t);if(e){var o=s(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return a(this,n)}}function a(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var c=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var l=n(0),p=n(4),_=n(2),f=n(1),m=n(5),d=n(3),h=n(11),y=n(12).default,v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(u,t);var e,n,a,s=r(u);function u(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=s.call(this,t))._view=!1,e._hint=!1,e._zoom=!1,e._zoomImgUrl="",e._soption={direction:"vertical",observer:!0,slidesPerView:"auto",freeMode:!0,mousewheel:!0,noSwiping:!1,followFinger:!0,scrollbar:{el:".swiper-scrollbar",draggable:!0,hide:!1}},e._viewHint=function(){d.App.pub_playBtnTab(),e._hint=!e._hint,e._swiper&&(e._swiper.slideTo(0,0),e._swiper.update(),e._swiper.scrollbar&&e._swiper.scrollbar.updateSize()),p.delay((function(){e._swiper&&(e._swiper.slideTo(0,0),e._swiper.update(),e._swiper.scrollbar&&e._swiper.scrollbar.updateSize())}),300)},e._refSwiper=function(t){!e._swiper&&t&&(e._swiper=t.swiper)},e._refAudio=function(t){!e._btnAudio&&t&&(e._btnAudio=t)},e._onClick=function(){e._btnAudio&&e._btnAudio.toggle()},e._jsx_sentence=h._getJSX(t.data.questions),e._jsx_hint=h._getJSX(t.data.ex_answer);var n=Math.floor(3*Math.random());return e._character=0===n?"/content/digenglish_lib/B/ls_writing/teacher/images/letstalk_bear.png":1===n?"/content/digenglish_lib/B/ls_writing/teacher/images/letstalk_boy.png":"/content/digenglish_lib/B/ls_writing/teacher/images/letstalk_girl.png",e}return e=u,(n=[{key:"componentDidUpdate",value:function(t){var e=this;this.props.view&&!t.view?(this._view=!0,this._hint=!1,this._zoom=!1,this._zoomImgUrl="",this._swiper&&(this._swiper.slideTo(0,0),this._swiper.update(),this._swiper.scrollbar&&this._swiper.scrollbar.updateSize()),p.delay((function(){e._swiper&&(e._swiper.slideTo(0,0),e._swiper.update(),e._swiper.scrollbar&&e._swiper.scrollbar.updateSize())}),300)):!this.props.view&&t.view&&(this._view=!1,this._zoom=!1,this._zoomImgUrl="",d.App.pub_stop())}},{key:"render",value:function(){var t=this.props,e=(t.view,t.data);return l.createElement(l.Fragment,null,l.createElement("div",{className:"question_bg",style:{display:this._view?"":"none"}},l.createElement(m.ToggleBtn,{className:"btn_hint",on:this._hint,onClick:this._viewHint}),l.createElement("div",{className:"popbox"},l.createElement("div",{className:"image_box"},l.createElement("img",{src:d.App.data_url+e.img,draggable:!1})),l.createElement("div",{className:"speechbubble_box"},l.createElement("div",null,l.createElement("div",{className:"balloon"+(this._hint?" view-hint":"")},l.createElement("div",{className:"sentence_box"},l.createElement("div",null,l.createElement("div",{className:"question_box",onClick:this._onClick},this._jsx_sentence))),l.createElement(y,Object.assign({},this._soption,{ref:this._refSwiper}),l.createElement("div",null,l.createElement("div",{className:"sample"+(this._hint?" hide":"")}),l.createElement("div",{className:"hint"+(this._hint?"":" hide")},this._jsx_hint)))))))))}}])&&i(e.prototype,n),a&&i(e,a),u}(l.Component);c([f.observable],v.prototype,"_view",void 0),c([f.observable],v.prototype,"_hint",void 0),c([f.observable],v.prototype,"_zoom",void 0),c([f.observable],v.prototype,"_zoomImgUrl",void 0),v=c([_.observer],v),e.default=v},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=c(t);if(e){var o=c(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?u(t):e}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var p=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},_=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{u(i.next(t))}catch(t){r(t)}}function s(t){try{u(i.throw(t))}catch(t){r(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});var f=n(0),m=n(2),d=n(1),h=n(5),y=n(7),v=n(3),b=n(40),g=n(9),w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}(l,t);var e,n,s,c=a(l);function l(){var t;return i(this,l),(t=c.apply(this,arguments)).m_view=!1,t.m_sendView=!1,t.m_roll="",t.onSend=function(){return _(u(t),void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.props.onSend(this.m_roll),t.next=3,y.wait(400);case 3:this.m_view=!1;case 4:case"end":return t.stop()}}),t,this)})))},t._onClose=function(){t.m_view=!1},t._onRollA=function(){"ROLE PLAY"===t.props.type&&(v.App.pub_playBtnTab(),t.m_roll="A",t.m_sendView=!0)},t._onRollB=function(){"ROLE PLAY"===t.props.type&&(v.App.pub_playBtnTab(),t.m_roll="B",t.m_sendView=!0)},t}return e=l,(n=[{key:"componentDidUpdate",value:function(t){this.props.view&&!t.view?(this.m_view=!0,this.m_sendView="ROLE PLAY"!==this.props.type,this.m_roll=""):!this.props.view&&t.view&&(this.m_view=!1,this.m_sendView=!1,this.m_roll="")}},{key:"render",value:function(){var t=this.props,e=t.view,n=(t.onClosed,t.imgA),i=t.imgB;return f.createElement(g.CoverPopup,{className:"compre_popup "+this.props.type,view:e&&this.m_view,onClosed:this.props.onClosed},f.createElement("span",null,"SHADOWING"===this.props.type?"LISTEN & REPEAT":this.props.type),f.createElement(h.ToggleBtn,{className:"btn_close",onClick:this._onClose}),f.createElement("div",{className:"popup_content"},f.createElement("span",null,"Do you have any questions?"),f.createElement("span",null,"Choose the role."),f.createElement("span",null,"Listen and repeat."),f.createElement("div",{className:"img_box"},f.createElement("div",{className:"A"+("A"===this.m_roll?" on":"")},f.createElement("span",{className:"icon_check A"}),f.createElement("img",{src:v.App.data_url+n,onClick:this._onRollA})),f.createElement("div",{className:"B"+("B"===this.m_roll?" on":"")},f.createElement("span",{className:"icon_check B"}),f.createElement("img",{src:v.App.data_url+i,onClick:this._onRollB})))),f.createElement(b.default,{view:this.m_sendView,preventUpWhenView:!0,type:"teacher",sended:!1,originY:0,onSend:this.onSend}))}}])&&o(e.prototype,n),s&&o(e,s),l}(f.Component);p([d.observable],w.prototype,"m_view",void 0),p([d.observable],w.prototype,"m_sendView",void 0),p([d.observable],w.prototype,"m_roll",void 0),w=p([m.observer],w),e.default=w},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function r(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=s(t);if(e){var o=s(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return a(this,n)}}function a(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var c=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var l=n(0),p=n(1),_=n(2),f=n(41),m=n(8),d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(u,t);var e,n,a,s=r(u);function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=s.call(this,t)).m_btnH=0,e.m_max=0,e.m_sy=-1,e.m_vy=-1,e.m_time=-1,e.m_bSend=!1,e.m_state={y:0,alpha:1,tDur:0,aDur:0,isOn:!1,disabled:!1},e._ref=function(t){if(!(e.m_max>0)&&t){t.setAttribute("touch-action","none");var n=window.getComputedStyle(t),i=m.nteFloat(n.height,0),o=m.nteFloat(n.bottom,0);i>0&&(e.m_btnH=i,e.m_max=i+o+10,e.props.view||(e.m_state.y=e.m_max))}},e._down=function(t){e.m_state.isOn||e.m_state.disabled||(e.m_state.y=e.props.originY,e.m_state.alpha=1,e.m_state.tDur=0,e.m_state.aDur=0,e.m_state.isOn=!0,e.m_vy=0,e.m_time=Date.now())},e._start=function(t,n){e.m_sy=n.y,e.m_bSend=!0},e._drag=function(t,n){if(e.m_state.isOn&&!e.m_state.disabled){var i=n.y-e.m_sy;"teacher"===e.props.type?(n.deltaY<-1?e.m_bSend=!1:n.deltaY>=0&&(e.m_bSend=!0),i<0&&(i=0)):(n.deltaY>1?e.m_bSend=!1:n.deltaY<=0&&(e.m_bSend=!0),i>0&&(i=0)),!1===e.props.preventDrag&&(e.m_state.y=i+e.props.originY);var o=Date.now();e.m_vy=n.deltaY/(o-e.m_time),e.m_time=o}},e._stop=function(t,n){if(e.m_state.isOn&&!e.m_state.disabled)if(e.m_bSend){var i=.5*e.m_vy*1e3,o=n.y-e.m_sy;"teacher"===e.props.type?(i<e.m_btnH?i=e.m_btnH:i>4*e.m_btnH&&(i=4*e.m_btnH),o<0&&(o=0)):(-1*i<e.m_btnH?i=-e.m_btnH:-1*i>4*e.m_btnH&&(i=-4*e.m_btnH),o>0&&(o=0)),e.m_state.tDur=.5,e.m_state.aDur=.5,e.m_state.alpha=0,e.m_state.y=o+i+e.props.originY,e.props.onSend()}else e.m_state.isOn=!1,e.m_state.tDur=.3,e.m_state.aDur=0,e.m_state.y=e.props.originY},t.sended?(e.m_state.alpha=0,e.m_state.disabled=!0):t.view?(e.m_state.y=t.originY,e.m_state.alpha=1,e.m_state.tDur=.3,e.m_state.aDur=0,e.m_state.isOn=!1,e.m_state.disabled=!1):t.view||(e.m_state.y=t.originY,e.m_state.alpha=0,e.m_state.tDur=.3,e.m_state.aDur=.3,e.m_state.isOn=!1,e.m_state.disabled=!0),e}return e=u,(n=[{key:"componentWillReceiveProps",value:function(t){t.sended&&!this.props.sended?(this.m_state.alpha=0,this.m_state.disabled=!0):t.view&&!this.props.view?(this.m_state.y=t.originY,this.m_state.alpha=1,t.preventUpWhenView?(this.m_state.tDur=0,this.m_state.aDur=.3):(this.m_state.tDur=.3,this.m_state.aDur=0),this.m_state.isOn=!1,this.m_state.disabled=!1):!t.view&&this.props.view?(this.m_state.y=this.m_max,this.m_state.alpha=0,this.m_state.tDur=.3,this.m_state.aDur=.3,this.m_state.isOn=!1,this.m_state.disabled=!0):!t.view||t.sended||this.m_state.isOn||t.originY===this.props.originY||(this.m_state.y=t.originY,this.m_state.tDur=.3,this.m_state.aDur=0)}},{key:"render",value:function(){var t=this.m_state,e=t.y,n=t.tDur,i=t.aDur,o=t.alpha,r=t.isOn,a=t.disabled,s={transform:"translateY(".concat(e,"px)"),transition:"transform ".concat(n,"s, opacity ").concat(i/2,"s ").concat(i/2,"s"),opacity:o,pointerEvents:a||!this.props.view?"none":"auto"},u=[];return"pad"===this.props.type?u.push("fel_toteacher"):u.push("fel_topad"),r&&u.push("on"),l.createElement(f.DraggableCore,{onMouseDown:this._down,onDrag:this._drag,onStart:this._start,onStop:this._stop},l.createElement("button",{ref:this._ref,className:u.join(" "),style:s}))}}])&&i(e.prototype,n),a&&i(e,a),u}(l.Component);c([p.observable],d.prototype,"m_state",void 0),d=c([_.observer],d),e.default=d},function(t,e){t.exports=ReactDraggable},function(t,e,n){}]);